(()=>{"use strict";var e,v={},s={};function a(e){var l=s[e];if(void 0!==l)return l.exports;var r=s[e]={exports:{}};return v[e](r,r.exports,a),r.exports}a.m=v,e=[],a.O=(l,r,f,o)=>{if(!r){var c=1/0;for(n=0;n<e.length;n++){for(var[r,f,o]=e[n],d=!0,t=0;t<r.length;t++)(!1&o||c>=o)&&Object.keys(a.O).every(h=>a.O[h](r[t]))?r.splice(t--,1):(d=!1,o<c&&(c=o));if(d){e.splice(n--,1);var u=f();void 0!==u&&(l=u)}}return l}o=o||0;for(var n=e.length;n>0&&e[n-1][2]>o;n--)e[n]=e[n-1];e[n]=[r,f,o]},a.d=(e,l)=>{for(var r in l)a.o(l,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:l[r]})},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),a.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={121:0};a.O.j=f=>0===e[f];var l=(f,o)=>{var t,u,[n,c,d]=o,i=0;if(n.some(_=>0!==e[_])){for(t in c)a.o(c,t)&&(a.m[t]=c[t]);if(d)var b=d(a)}for(f&&f(o);i<n.length;i++)a.o(e,u=n[i])&&e[u]&&e[u][0](),e[u]=0;return a.O(b)},r=self.webpackChunkmythic_ledger=self.webpackChunkmythic_ledger||[];r.forEach(l.bind(null,0)),r.push=l.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkmythic_ledger=self.webpackChunkmythic_ledger||[]).push([[461],{935:()=>{const te=globalThis;function ee(e){return(te.__Zone_symbol_prefix||"__zone_symbol__")+e}const ke=Object.getOwnPropertyDescriptor,Ne=Object.defineProperty,Le=Object.getPrototypeOf,_t=Object.create,Et=Array.prototype.slice,Ie="addEventListener",Me="removeEventListener",Ze=ee(Ie),Ae=ee(Me),ae="true",le="false",ve=ee("");function je(e,r){return Zone.current.wrap(e,r)}function He(e,r,c,t,i){return Zone.current.scheduleMacroTask(e,r,c,t,i)}const j=ee,we=typeof window<"u",Te=we?window:void 0,$=we&&Te||globalThis,Tt="removeAttribute";function xe(e,r){for(let c=e.length-1;c>=0;c--)"function"==typeof e[c]&&(e[c]=je(e[c],r+"_"+c));return e}function We(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const qe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Re=!("nw"in $)&&typeof $.process<"u"&&"[object process]"===$.process.toString(),Ve=!Re&&!qe&&!(!we||!Te.HTMLElement),Xe=typeof $.process<"u"&&"[object process]"===$.process.toString()&&!qe&&!(!we||!Te.HTMLElement),Ce={},yt=j("enable_beforeunload"),Ye=function(e){if(!(e=e||$.event))return;let r=Ce[e.type];r||(r=Ce[e.type]=j("ON_PROPERTY"+e.type));const c=this||e.target||$,t=c[r];let i;return Ve&&c===Te&&"error"===e.type?(i=t&&t.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===i&&e.preventDefault()):(i=t&&t.apply(this,arguments),"beforeunload"===e.type&&$[yt]&&"string"==typeof i?e.returnValue=i:null!=i&&!i&&e.preventDefault()),i};function $e(e,r,c){let t=ke(e,r);if(!t&&c&&ke(c,r)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;const i=j("on"+r+"patched");if(e.hasOwnProperty(i)&&e[i])return;delete t.writable,delete t.value;const u=t.get,E=t.set,T=r.slice(2);let m=Ce[T];m||(m=Ce[T]=j("ON_PROPERTY"+T)),t.set=function(D){let d=this;!d&&e===$&&(d=$),d&&("function"==typeof d[m]&&d.removeEventListener(T,Ye),E&&E.call(d,null),d[m]=D,"function"==typeof D&&d.addEventListener(T,Ye,!1))},t.get=function(){let D=this;if(!D&&e===$&&(D=$),!D)return null;const d=D[m];if(d)return d;if(u){let w=u.call(this);if(w)return t.set.call(this,w),"function"==typeof D[Tt]&&D.removeAttribute(r),w}return null},Ne(e,r,t),e[i]=!0}function Je(e,r,c){if(r)for(let t=0;t<r.length;t++)$e(e,"on"+r[t],c);else{const t=[];for(const i in e)"on"==i.slice(0,2)&&t.push(i);for(let i=0;i<t.length;i++)$e(e,t[i],c)}}const re=j("originalInstance");function be(e){const r=$[e];if(!r)return;$[j(e)]=r,$[e]=function(){const i=xe(arguments,e);switch(i.length){case 0:this[re]=new r;break;case 1:this[re]=new r(i[0]);break;case 2:this[re]=new r(i[0],i[1]);break;case 3:this[re]=new r(i[0],i[1],i[2]);break;case 4:this[re]=new r(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},fe($[e],r);const c=new r(function(){});let t;for(t in c)"XMLHttpRequest"===e&&"responseBlob"===t||function(i){"function"==typeof c[i]?$[e].prototype[i]=function(){return this[re][i].apply(this[re],arguments)}:Ne($[e].prototype,i,{set:function(u){"function"==typeof u?(this[re][i]=je(u,e+"."+i),fe(this[re][i],u)):this[re][i]=u},get:function(){return this[re][i]}})}(t);for(t in r)"prototype"!==t&&r.hasOwnProperty(t)&&($[e][t]=r[t])}function ue(e,r,c){let t=e;for(;t&&!t.hasOwnProperty(r);)t=Le(t);!t&&e[r]&&(t=e);const i=j(r);let u=null;if(t&&(!(u=t[i])||!t.hasOwnProperty(i))&&(u=t[i]=t[r],We(t&&ke(t,r)))){const T=c(u,i,r);t[r]=function(){return T(this,arguments)},fe(t[r],u)}return u}function mt(e,r,c){let t=null;function i(u){const E=u.data;return E.args[E.cbIdx]=function(){u.invoke.apply(this,arguments)},t.apply(E.target,E.args),u}t=ue(e,r,u=>function(E,T){const m=c(E,T);return m.cbIdx>=0&&"function"==typeof T[m.cbIdx]?He(m.name,T[m.cbIdx],m,i):u.apply(E,T)})}function fe(e,r){e[j("OriginalDelegate")]=r}let Ke=!1,Ge=!1;function kt(){if(Ke)return Ge;Ke=!0;try{const e=Te.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Ge=!0)}catch{}return Ge}function Qe(e){return"function"==typeof e}function et(e){return"number"==typeof e}let ge=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ge=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ge=!1}const vt={useG:!0},ne={},tt={},nt=new RegExp("^"+ve+"(\\w+)(true|false)$"),rt=j("propagationStopped");function ot(e,r){const c=(r?r(e):e)+le,t=(r?r(e):e)+ae,i=ve+c,u=ve+t;ne[e]={},ne[e][le]=i,ne[e][ae]=u}function bt(e,r,c,t){const i=t&&t.add||Ie,u=t&&t.rm||Me,E=t&&t.listeners||"eventListeners",T=t&&t.rmAll||"removeAllListeners",m=j(i),D="."+i+":",d="prependListener",w="."+d+":",Z=function(k,h,H){if(k.isRemoved)return;const V=k.callback;let Y;"object"==typeof V&&V.handleEvent&&(k.callback=g=>V.handleEvent(g),k.originalDelegate=V);try{k.invoke(k,h,[H])}catch(g){Y=g}const G=k.options;return G&&"object"==typeof G&&G.once&&h[u].call(h,H.type,k.originalDelegate?k.originalDelegate:k.callback,G),Y};function x(k,h,H){if(!(h=h||e.event))return;const V=k||h.target||e,Y=V[ne[h.type][H?ae:le]];if(Y){const G=[];if(1===Y.length){const g=Z(Y[0],V,h);g&&G.push(g)}else{const g=Y.slice();for(let z=0;z<g.length&&(!h||!0!==h[rt]);z++){const O=Z(g[z],V,h);O&&G.push(O)}}if(1===G.length)throw G[0];for(let g=0;g<G.length;g++){const z=G[g];r.nativeScheduleMicroTask(()=>{throw z})}}}const U=function(k){return x(this,k,!1)},J=function(k){return x(this,k,!0)};function K(k,h){if(!k)return!1;let H=!0;h&&void 0!==h.useG&&(H=h.useG);const V=h&&h.vh;let Y=!0;h&&void 0!==h.chkDup&&(Y=h.chkDup);let G=!1;h&&void 0!==h.rt&&(G=h.rt);let g=k;for(;g&&!g.hasOwnProperty(i);)g=Le(g);if(!g&&k[i]&&(g=k),!g||g[m])return!1;const z=h&&h.eventNameToString,O={},R=g[m]=g[i],b=g[j(u)]=g[u],S=g[j(E)]=g[E],Q=g[j(T)]=g[T];let W;h&&h.prepend&&(W=g[j(h.prepend)]=g[h.prepend]);const q=H?function(s){if(!O.isExisting)return R.call(O.target,O.eventName,O.capture?J:U,O.options)}:function(s){return R.call(O.target,O.eventName,s.invoke,O.options)},A=H?function(s){if(!s.isRemoved){const l=ne[s.eventName];let v;l&&(v=l[s.capture?ae:le]);const C=v&&s.target[v];if(C)for(let y=0;y<C.length;y++)if(C[y]===s){C.splice(y,1),s.isRemoved=!0,s.removeAbortListener&&(s.removeAbortListener(),s.removeAbortListener=null),0===C.length&&(s.allRemoved=!0,s.target[v]=null);break}}if(s.allRemoved)return b.call(s.target,s.eventName,s.capture?J:U,s.options)}:function(s){return b.call(s.target,s.eventName,s.invoke,s.options)},he=h&&h.diff?h.diff:function(s,l){const v=typeof l;return"function"===v&&s.callback===l||"object"===v&&s.originalDelegate===l},de=Zone[j("UNPATCHED_EVENTS")],oe=e[j("PASSIVE_EVENTS")],a=function(s,l,v,C,y=!1,L=!1){return function(){const I=this||e;let M=arguments[0];h&&h.transferEventName&&(M=h.transferEventName(M));let F=arguments[1];if(!F)return s.apply(this,arguments);if(Re&&"uncaughtException"===M)return s.apply(this,arguments);let B=!1;if("function"!=typeof F){if(!F.handleEvent)return s.apply(this,arguments);B=!0}if(V&&!V(s,F,I,arguments))return;const Ee=ge&&!!oe&&-1!==oe.indexOf(M),ie=function f(s){if("object"==typeof s&&null!==s){const l={...s};return s.signal&&(l.signal=s.signal),l}return s}(function N(s,l){return!ge&&"object"==typeof s&&s?!!s.capture:ge&&l?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?{...s,passive:!0}:s:{passive:!0}:s}(arguments[2],Ee)),me=ie?.signal;if(me?.aborted)return;if(de)for(let ce=0;ce<de.length;ce++)if(M===de[ce])return Ee?s.call(I,M,F,ie):s.apply(this,arguments);const Be=!!ie&&("boolean"==typeof ie||ie.capture),lt=!(!ie||"object"!=typeof ie)&&ie.once,At=Zone.current;let Ue=ne[M];Ue||(ot(M,z),Ue=ne[M]);const ut=Ue[Be?ae:le];let Se,pe=I[ut],ft=!1;if(pe){if(ft=!0,Y)for(let ce=0;ce<pe.length;ce++)if(he(pe[ce],F))return}else pe=I[ut]=[];const ht=I.constructor.name,dt=tt[ht];dt&&(Se=dt[M]),Se||(Se=ht+l+(z?z(M):M)),O.options=ie,lt&&(O.options.once=!1),O.target=I,O.capture=Be,O.eventName=M,O.isExisting=ft;const Pe=H?vt:void 0;Pe&&(Pe.taskData=O),me&&(O.options.signal=void 0);const se=At.scheduleEventTask(Se,F,Pe,v,C);if(me){O.options.signal=me;const ce=()=>se.zone.cancelTask(se);s.call(me,"abort",ce,{once:!0}),se.removeAbortListener=()=>me.removeEventListener("abort",ce)}return O.target=null,Pe&&(Pe.taskData=null),lt&&(O.options.once=!0),!ge&&"boolean"==typeof se.options||(se.options=ie),se.target=I,se.capture=Be,se.eventName=M,B&&(se.originalDelegate=F),L?pe.unshift(se):pe.push(se),y?I:void 0}};return g[i]=a(R,D,q,A,G),W&&(g[d]=a(W,w,function(s){return W.call(O.target,O.eventName,s.invoke,O.options)},A,G,!0)),g[u]=function(){const s=this||e;let l=arguments[0];h&&h.transferEventName&&(l=h.transferEventName(l));const v=arguments[2],C=!!v&&("boolean"==typeof v||v.capture),y=arguments[1];if(!y)return b.apply(this,arguments);if(V&&!V(b,y,s,arguments))return;const L=ne[l];let I;L&&(I=L[C?ae:le]);const M=I&&s[I];if(M)for(let F=0;F<M.length;F++){const B=M[F];if(he(B,y))return M.splice(F,1),B.isRemoved=!0,0!==M.length||(B.allRemoved=!0,s[I]=null,C||"string"!=typeof l)||(s[ve+"ON_PROPERTY"+l]=null),B.zone.cancelTask(B),G?s:void 0}return b.apply(this,arguments)},g[E]=function(){const s=this||e;let l=arguments[0];h&&h.transferEventName&&(l=h.transferEventName(l));const v=[],C=st(s,z?z(l):l);for(let y=0;y<C.length;y++){const L=C[y];v.push(L.originalDelegate?L.originalDelegate:L.callback)}return v},g[T]=function(){const s=this||e;let l=arguments[0];if(l){h&&h.transferEventName&&(l=h.transferEventName(l));const v=ne[l];if(v){const L=s[v[le]],I=s[v[ae]];if(L){const M=L.slice();for(let F=0;F<M.length;F++){const B=M[F];this[u].call(this,l,B.originalDelegate?B.originalDelegate:B.callback,B.options)}}if(I){const M=I.slice();for(let F=0;F<M.length;F++){const B=M[F];this[u].call(this,l,B.originalDelegate?B.originalDelegate:B.callback,B.options)}}}}else{const v=Object.keys(s);for(let C=0;C<v.length;C++){const L=nt.exec(v[C]);let I=L&&L[1];I&&"removeListener"!==I&&this[T].call(this,I)}this[T].call(this,"removeListener")}if(G)return this},fe(g[i],R),fe(g[u],b),Q&&fe(g[T],Q),S&&fe(g[E],S),!0}let X=[];for(let k=0;k<c.length;k++)X[k]=K(c[k],t);return X}function st(e,r){if(!r){const u=[];for(let E in e){const T=nt.exec(E);let m=T&&T[1];if(m&&(!r||m===r)){const D=e[E];if(D)for(let d=0;d<D.length;d++)u.push(D[d])}}return u}let c=ne[r];c||(ot(r),c=ne[r]);const t=e[c[le]],i=e[c[ae]];return t?i?t.concat(i):t.slice():i?i.slice():[]}function Pt(e,r){const c=e.Event;c&&c.prototype&&r.patchMethod(c.prototype,"stopImmediatePropagation",t=>function(i,u){i[rt]=!0,t&&t.apply(i,u)})}const De=j("zoneTask");function ye(e,r,c,t){let i=null,u=null;c+=t;const E={};function T(D){const d=D.data;d.args[0]=function(){return D.invoke.apply(this,arguments)};const w=i.apply(e,d.args);return et(w)?d.handleId=w:(d.handle=w,d.isRefreshable=Qe(w.refresh)),D}function m(D){const{handle:d,handleId:w}=D.data;return u.call(e,d??w)}i=ue(e,r+=t,D=>function(d,w){if(Qe(w[0])){const Z={isRefreshable:!1,isPeriodic:"Interval"===t,delay:"Timeout"===t||"Interval"===t?w[1]||0:void 0,args:w},x=w[0];w[0]=function(){try{return x.apply(this,arguments)}finally{const{handle:H,handleId:V,isPeriodic:Y,isRefreshable:G}=Z;!Y&&!G&&(V?delete E[V]:H&&(H[De]=null))}};const U=He(r,w[0],Z,T,m);if(!U)return U;const{handleId:J,handle:K,isRefreshable:X,isPeriodic:k}=U.data;if(J)E[J]=U;else if(K&&(K[De]=U,X&&!k)){const h=K.refresh;K.refresh=function(){const{zone:H,state:V}=U;return"notScheduled"===V?(U._state="scheduled",H._updateTaskCount(U,1)):"running"===V&&(U._state="scheduling"),h.call(this)}}return K??J??U}return D.apply(e,w)}),u=ue(e,c,D=>function(d,w){const Z=w[0];let x;et(Z)?(x=E[Z],delete E[Z]):(x=Z?.[De],x?Z[De]=null:x=Z),x?.type?x.cancelFn&&x.zone.cancelTask(x):D.apply(e,w)})}function it(e,r,c){if(!c||0===c.length)return r;const t=c.filter(u=>u.target===e);if(!t||0===t.length)return r;const i=t[0].ignoreProperties;return r.filter(u=>-1===i.indexOf(u))}function ct(e,r,c,t){e&&Je(e,it(e,r,c),t)}function Fe(e){return Object.getOwnPropertyNames(e).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}function It(e,r,c,t,i){const u=Zone.__symbol__(t);if(r[u])return;const E=r[u]=r[t];r[t]=function(T,m,D){return m&&m.prototype&&i.forEach(function(d){const w=`${c}.${t}::`+d,Z=m.prototype;try{if(Z.hasOwnProperty(d)){const x=e.ObjectGetOwnPropertyDescriptor(Z,d);x&&x.value?(x.value=e.wrapWithCurrentZone(x.value,w),e._redefineProperty(m.prototype,d,x)):Z[d]&&(Z[d]=e.wrapWithCurrentZone(Z[d],w))}else Z[d]&&(Z[d]=e.wrapWithCurrentZone(Z[d],w))}catch{}}),E.call(r,T,m,D)},e.attachOriginToPatched(r[t],E)}const at=function Oe(){const e=globalThis,r=!0===e[ee("forceDuplicateZoneCheck")];if(e.Zone&&(r||"function"!=typeof e.Zone.__symbol__))throw new Error("Zone already loaded.");return e.Zone??=function ze(){const e=te.performance;function r(N){e&&e.mark&&e.mark(N)}function c(N,_){e&&e.measure&&e.measure(N,_)}r("Zone");let t=(()=>{class N{static#e=this.__symbol__=ee;static assertZonePatched(){if(te.Promise!==O.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=N.current;for(;n.parent;)n=n.parent;return n}static get current(){return b.zone}static get currentTask(){return S}static __load_patch(n,o,p=!1){if(O.hasOwnProperty(n)){const P=!0===te[ee("forceDuplicateZoneCheck")];if(!p&&P)throw Error("Already loaded patch: "+n)}else if(!te["__Zone_disable_"+n]){const P="Zone:"+n;r(P),O[n]=o(te,N,R),c(P,P)}}get parent(){return this._parent}get name(){return this._name}constructor(n,o){this._parent=n,this._name=o?o.name||"unnamed":"<root>",this._properties=o&&o.properties||{},this._zoneDelegate=new u(this,this._parent&&this._parent._zoneDelegate,o)}get(n){const o=this.getZoneWith(n);if(o)return o._properties[n]}getZoneWith(n){let o=this;for(;o;){if(o._properties.hasOwnProperty(n))return o;o=o._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,o){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const p=this._zoneDelegate.intercept(this,n,o),P=this;return function(){return P.runGuarded(p,this,arguments,o)}}run(n,o,p,P){b={parent:b,zone:this};try{return this._zoneDelegate.invoke(this,n,o,p,P)}finally{b=b.parent}}runGuarded(n,o=null,p,P){b={parent:b,zone:this};try{try{return this._zoneDelegate.invoke(this,n,o,p,P)}catch(q){if(this._zoneDelegate.handleError(this,q))throw q}}finally{b=b.parent}}runTask(n,o,p){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||K).name+"; Execution: "+this.name+")");const P=n,{type:q,data:{isPeriodic:A=!1,isRefreshable:_e=!1}={}}=n;if(n.state===X&&(q===z||q===g))return;const he=n.state!=H;he&&P._transitionTo(H,h);const de=S;S=P,b={parent:b,zone:this};try{q==g&&n.data&&!A&&!_e&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,P,o,p)}catch(oe){if(this._zoneDelegate.handleError(this,oe))throw oe}}finally{const oe=n.state;if(oe!==X&&oe!==Y)if(q==z||A||_e&&oe===k)he&&P._transitionTo(h,H,k);else{const f=P._zoneDelegates;this._updateTaskCount(P,-1),he&&P._transitionTo(X,H,X),_e&&(P._zoneDelegates=f)}b=b.parent,S=de}}scheduleTask(n){if(n.zone&&n.zone!==this){let p=this;for(;p;){if(p===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);p=p.parent}}n._transitionTo(k,X);const o=[];n._zoneDelegates=o,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(p){throw n._transitionTo(Y,k,X),this._zoneDelegate.handleError(this,p),p}return n._zoneDelegates===o&&this._updateTaskCount(n,1),n.state==k&&n._transitionTo(h,k),n}scheduleMicroTask(n,o,p,P){return this.scheduleTask(new E(G,n,o,p,P,void 0))}scheduleMacroTask(n,o,p,P,q){return this.scheduleTask(new E(g,n,o,p,P,q))}scheduleEventTask(n,o,p,P,q){return this.scheduleTask(new E(z,n,o,p,P,q))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||K).name+"; Execution: "+this.name+")");if(n.state===h||n.state===H){n._transitionTo(V,h,H);try{this._zoneDelegate.cancelTask(this,n)}catch(o){throw n._transitionTo(Y,V),this._zoneDelegate.handleError(this,o),o}return this._updateTaskCount(n,-1),n._transitionTo(X,V),n.runCount=-1,n}}_updateTaskCount(n,o){const p=n._zoneDelegates;-1==o&&(n._zoneDelegates=null);for(let P=0;P<p.length;P++)p[P]._updateTaskCount(n.type,o)}}return N})();const i={name:"",onHasTask:(N,_,n,o)=>N.hasTask(n,o),onScheduleTask:(N,_,n,o)=>N.scheduleTask(n,o),onInvokeTask:(N,_,n,o,p,P)=>N.invokeTask(n,o,p,P),onCancelTask:(N,_,n,o)=>N.cancelTask(n,o)};class u{get zone(){return this._zone}constructor(_,n,o){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=_,this._parentDelegate=n,this._forkZS=o&&(o&&o.onFork?o:n._forkZS),this._forkDlgt=o&&(o.onFork?n:n._forkDlgt),this._forkCurrZone=o&&(o.onFork?this._zone:n._forkCurrZone),this._interceptZS=o&&(o.onIntercept?o:n._interceptZS),this._interceptDlgt=o&&(o.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=o&&(o.onIntercept?this._zone:n._interceptCurrZone),this._invokeZS=o&&(o.onInvoke?o:n._invokeZS),this._invokeDlgt=o&&(o.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=o&&(o.onInvoke?this._zone:n._invokeCurrZone),this._handleErrorZS=o&&(o.onHandleError?o:n._handleErrorZS),this._handleErrorDlgt=o&&(o.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=o&&(o.onHandleError?this._zone:n._handleErrorCurrZone),this._scheduleTaskZS=o&&(o.onScheduleTask?o:n._scheduleTaskZS),this._scheduleTaskDlgt=o&&(o.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=o&&(o.onScheduleTask?this._zone:n._scheduleTaskCurrZone),this._invokeTaskZS=o&&(o.onInvokeTask?o:n._invokeTaskZS),this._invokeTaskDlgt=o&&(o.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=o&&(o.onInvokeTask?this._zone:n._invokeTaskCurrZone),this._cancelTaskZS=o&&(o.onCancelTask?o:n._cancelTaskZS),this._cancelTaskDlgt=o&&(o.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=o&&(o.onCancelTask?this._zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const p=o&&o.onHasTask;(p||n&&n._hasTaskZS)&&(this._hasTaskZS=p?o:i,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,o.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this._zone),o.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this._zone),o.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this._zone))}fork(_,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,_,n):new t(_,n)}intercept(_,n,o){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,_,n,o):n}invoke(_,n,o,p,P){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,_,n,o,p,P):n.apply(o,p)}handleError(_,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,_,n)}scheduleTask(_,n){let o=n;if(this._scheduleTaskZS)this._hasTaskZS&&o._zoneDelegates.push(this._hasTaskDlgtOwner),o=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,_,n),o||(o=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=G)throw new Error("Task is missing scheduleFn.");U(n)}return o}invokeTask(_,n,o,p){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,_,n,o,p):n.callback.apply(o,p)}cancelTask(_,n){let o;if(this._cancelTaskZS)o=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,_,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");o=n.cancelFn(n)}return o}hasTask(_,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,_,n)}catch(o){this.handleError(_,o)}}_updateTaskCount(_,n){const o=this._taskCounts,p=o[_],P=o[_]=p+n;if(P<0)throw new Error("More tasks executed then were scheduled.");0!=p&&0!=P||this.hasTask(this._zone,{microTask:o.microTask>0,macroTask:o.macroTask>0,eventTask:o.eventTask>0,change:_})}}class E{constructor(_,n,o,p,P,q){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=_,this.source=n,this.data=p,this.scheduleFn=P,this.cancelFn=q,!o)throw new Error("callback is not defined");this.callback=o;const A=this;this.invoke=_===z&&p&&p.useG?E.invokeTask:function(){return E.invokeTask.call(te,A,this,arguments)}}static invokeTask(_,n,o){_||(_=this),Q++;try{return _.runCount++,_.zone.runTask(_,n,o)}finally{1==Q&&J(),Q--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(X,k)}_transitionTo(_,n,o){if(this._state!==n&&this._state!==o)throw new Error(`${this.type} '${this.source}': can not transition to '${_}', expecting state '${n}'${o?" or '"+o+"'":""}, was '${this._state}'.`);this._state=_,_==X&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const T=ee("setTimeout"),m=ee("Promise"),D=ee("then");let Z,d=[],w=!1;function x(N){if(Z||te[m]&&(Z=te[m].resolve(0)),Z){let _=Z[D];_||(_=Z.then),_.call(Z,N)}else te[T](N,0)}function U(N){0===Q&&0===d.length&&x(J),N&&d.push(N)}function J(){if(!w){for(w=!0;d.length;){const N=d;d=[];for(let _=0;_<N.length;_++){const n=N[_];try{n.zone.runTask(n,null,null)}catch(o){R.onUnhandledError(o)}}}R.microtaskDrainDone(),w=!1}}const K={name:"NO ZONE"},X="notScheduled",k="scheduling",h="scheduled",H="running",V="canceling",Y="unknown",G="microTask",g="macroTask",z="eventTask",O={},R={symbol:ee,currentZoneFrame:()=>b,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:U,showUncaughtError:()=>!t[ee("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:x};let b={parent:null,zone:new t(null,null)},S=null,Q=0;function W(){}return c("Zone","Zone"),t}(),e.Zone}();(function Zt(e){(function Nt(e){e.__load_patch("ZoneAwarePromise",(r,c,t)=>{const i=Object.getOwnPropertyDescriptor,u=Object.defineProperty,T=t.symbol,m=[],D=!1!==r[T("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],d=T("Promise"),w=T("then"),Z="__creationTrace__";t.onUnhandledError=f=>{if(t.showUncaughtError()){const a=f&&f.rejection;a?console.error("Unhandled Promise rejection:",a instanceof Error?a.message:a,"; Zone:",f.zone.name,"; Task:",f.task&&f.task.source,"; Value:",a,a instanceof Error?a.stack:void 0):console.error(f)}},t.microtaskDrainDone=()=>{for(;m.length;){const f=m.shift();try{f.zone.runGuarded(()=>{throw f.throwOriginal?f.rejection:f})}catch(a){U(a)}}};const x=T("unhandledPromiseRejectionHandler");function U(f){t.onUnhandledError(f);try{const a=c[x];"function"==typeof a&&a.call(this,f)}catch{}}function J(f){return f&&f.then}function K(f){return f}function X(f){return A.reject(f)}const k=T("state"),h=T("value"),H=T("finally"),V=T("parentPromiseValue"),Y=T("parentPromiseState"),G="Promise.then",g=null,z=!0,O=!1,R=0;function b(f,a){return s=>{try{N(f,a,s)}catch(l){N(f,!1,l)}}}const S=function(){let f=!1;return function(s){return function(){f||(f=!0,s.apply(null,arguments))}}},Q="Promise resolved with itself",W=T("currentTaskTrace");function N(f,a,s){const l=S();if(f===s)throw new TypeError(Q);if(f[k]===g){let v=null;try{("object"==typeof s||"function"==typeof s)&&(v=s&&s.then)}catch(C){return l(()=>{N(f,!1,C)})(),f}if(a!==O&&s instanceof A&&s.hasOwnProperty(k)&&s.hasOwnProperty(h)&&s[k]!==g)n(s),N(f,s[k],s[h]);else if(a!==O&&"function"==typeof v)try{v.call(s,l(b(f,a)),l(b(f,!1)))}catch(C){l(()=>{N(f,!1,C)})()}else{f[k]=a;const C=f[h];if(f[h]=s,f[H]===H&&a===z&&(f[k]=f[Y],f[h]=f[V]),a===O&&s instanceof Error){const y=c.currentTask&&c.currentTask.data&&c.currentTask.data[Z];y&&u(s,W,{configurable:!0,enumerable:!1,writable:!0,value:y})}for(let y=0;y<C.length;)o(f,C[y++],C[y++],C[y++],C[y++]);if(0==C.length&&a==O){f[k]=R;let y=s;try{throw new Error("Uncaught (in promise): "+function E(f){return f&&f.toString===Object.prototype.toString?(f.constructor&&f.constructor.name||"")+": "+JSON.stringify(f):f?f.toString():Object.prototype.toString.call(f)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(L){y=L}D&&(y.throwOriginal=!0),y.rejection=s,y.promise=f,y.zone=c.current,y.task=c.currentTask,m.push(y),t.scheduleMicroTask()}}}return f}const _=T("rejectionHandledHandler");function n(f){if(f[k]===R){try{const a=c[_];a&&"function"==typeof a&&a.call(this,{rejection:f[h],promise:f})}catch{}f[k]=O;for(let a=0;a<m.length;a++)f===m[a].promise&&m.splice(a,1)}}function o(f,a,s,l,v){n(f);const C=f[k],y=C?"function"==typeof l?l:K:"function"==typeof v?v:X;a.scheduleMicroTask(G,()=>{try{const L=f[h],I=!!s&&H===s[H];I&&(s[V]=L,s[Y]=C);const M=a.run(y,void 0,I&&y!==X&&y!==K?[]:[L]);N(s,!0,M)}catch(L){N(s,!1,L)}},s)}const P=function(){},q=r.AggregateError;class A{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(a){return a instanceof A?a:N(new this(null),z,a)}static reject(a){return N(new this(null),O,a)}static withResolvers(){const a={};return a.promise=new A((s,l)=>{a.resolve=s,a.reject=l}),a}static any(a){if(!a||"function"!=typeof a[Symbol.iterator])return Promise.reject(new q([],"All promises were rejected"));const s=[];let l=0;try{for(let y of a)l++,s.push(A.resolve(y))}catch{return Promise.reject(new q([],"All promises were rejected"))}if(0===l)return Promise.reject(new q([],"All promises were rejected"));let v=!1;const C=[];return new A((y,L)=>{for(let I=0;I<s.length;I++)s[I].then(M=>{v||(v=!0,y(M))},M=>{C.push(M),l--,0===l&&(v=!0,L(new q(C,"All promises were rejected")))})})}static race(a){let s,l,v=new this((L,I)=>{s=L,l=I});function C(L){s(L)}function y(L){l(L)}for(let L of a)J(L)||(L=this.resolve(L)),L.then(C,y);return v}static all(a){return A.allWithCallback(a)}static allSettled(a){return(this&&this.prototype instanceof A?this:A).allWithCallback(a,{thenCallback:l=>({status:"fulfilled",value:l}),errorCallback:l=>({status:"rejected",reason:l})})}static allWithCallback(a,s){let l,v,C=new this((M,F)=>{l=M,v=F}),y=2,L=0;const I=[];for(let M of a){J(M)||(M=this.resolve(M));const F=L;try{M.then(B=>{I[F]=s?s.thenCallback(B):B,y--,0===y&&l(I)},B=>{s?(I[F]=s.errorCallback(B),y--,0===y&&l(I)):v(B)})}catch(B){v(B)}y++,L++}return y-=2,0===y&&l(I),C}constructor(a){const s=this;if(!(s instanceof A))throw new Error("Must be an instanceof Promise.");s[k]=g,s[h]=[];try{const l=S();a&&a(l(b(s,z)),l(b(s,O)))}catch(l){N(s,!1,l)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return A}then(a,s){let l=this.constructor?.[Symbol.species];(!l||"function"!=typeof l)&&(l=this.constructor||A);const v=new l(P),C=c.current;return this[k]==g?this[h].push(C,v,a,s):o(this,C,v,a,s),v}catch(a){return this.then(null,a)}finally(a){let s=this.constructor?.[Symbol.species];(!s||"function"!=typeof s)&&(s=A);const l=new s(P);l[H]=H;const v=c.current;return this[k]==g?this[h].push(v,l,a,a):o(this,v,l,a,a),l}}A.resolve=A.resolve,A.reject=A.reject,A.race=A.race,A.all=A.all;const _e=r[d]=r.Promise;r.Promise=A;const he=T("thenPatched");function de(f){const a=f.prototype,s=i(a,"then");if(s&&(!1===s.writable||!s.configurable))return;const l=a.then;a[w]=l,f.prototype.then=function(v,C){return new A((L,I)=>{l.call(this,L,I)}).then(v,C)},f[he]=!0}return t.patchThen=de,_e&&(de(_e),ue(r,"fetch",f=>function oe(f){return function(a,s){let l=f.apply(a,s);if(l instanceof A)return l;let v=l.constructor;return v[he]||de(v),l}}(f))),Promise[c.__symbol__("uncaughtPromiseErrors")]=m,A})})(e),function Lt(e){e.__load_patch("toString",r=>{const c=Function.prototype.toString,t=j("OriginalDelegate"),i=j("Promise"),u=j("Error"),E=function(){if("function"==typeof this){const d=this[t];if(d)return"function"==typeof d?c.call(d):Object.prototype.toString.call(d);if(this===Promise){const w=r[i];if(w)return c.call(w)}if(this===Error){const w=r[u];if(w)return c.call(w)}}return c.call(this)};E[t]=c,Function.prototype.toString=E;const T=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":T.call(this)}})}(e),function Mt(e){e.__load_patch("util",(r,c,t)=>{const i=Fe(r);t.patchOnProperties=Je,t.patchMethod=ue,t.bindArguments=xe,t.patchMacroTask=mt;const u=c.__symbol__("BLACK_LISTED_EVENTS"),E=c.__symbol__("UNPATCHED_EVENTS");r[E]&&(r[u]=r[E]),r[u]&&(c[u]=c[E]=r[u]),t.patchEventPrototype=Pt,t.patchEventTarget=bt,t.isIEOrEdge=kt,t.ObjectDefineProperty=Ne,t.ObjectGetOwnPropertyDescriptor=ke,t.ObjectCreate=_t,t.ArraySlice=Et,t.patchClass=be,t.wrapWithCurrentZone=je,t.filterProperties=it,t.attachOriginToPatched=fe,t._redefineProperty=Object.defineProperty,t.patchCallbacks=It,t.getGlobalObjects=()=>({globalSources:tt,zoneSymbolEventNames:ne,eventNames:i,isBrowser:Ve,isMix:Xe,isNode:Re,TRUE_STR:ae,FALSE_STR:le,ZONE_SYMBOL_PREFIX:ve,ADD_EVENT_LISTENER_STR:Ie,REMOVE_EVENT_LISTENER_STR:Me})})}(e)})(at),function Ot(e){e.__load_patch("legacy",r=>{const c=r[e.__symbol__("legacyPatch")];c&&c()}),e.__load_patch("timers",r=>{const c="set",t="clear";ye(r,c,t,"Timeout"),ye(r,c,t,"Interval"),ye(r,c,t,"Immediate")}),e.__load_patch("requestAnimationFrame",r=>{ye(r,"request","cancel","AnimationFrame"),ye(r,"mozRequest","mozCancel","AnimationFrame"),ye(r,"webkitRequest","webkitCancel","AnimationFrame")}),e.__load_patch("blocking",(r,c)=>{const t=["alert","prompt","confirm"];for(let i=0;i<t.length;i++)ue(r,t[i],(E,T,m)=>function(D,d){return c.current.run(E,r,d,m)})}),e.__load_patch("EventTarget",(r,c,t)=>{(function Dt(e,r){r.patchEventPrototype(e,r)})(r,t),function Ct(e,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:c,zoneSymbolEventNames:t,TRUE_STR:i,FALSE_STR:u,ZONE_SYMBOL_PREFIX:E}=r.getGlobalObjects();for(let m=0;m<c.length;m++){const D=c[m],Z=E+(D+u),x=E+(D+i);t[D]={},t[D][u]=Z,t[D][i]=x}const T=e.EventTarget;T&&T.prototype&&r.patchEventTarget(e,r,[T&&T.prototype])}(r,t);const i=r.XMLHttpRequestEventTarget;i&&i.prototype&&t.patchEventTarget(r,t,[i.prototype])}),e.__load_patch("MutationObserver",(r,c,t)=>{be("MutationObserver"),be("WebKitMutationObserver")}),e.__load_patch("IntersectionObserver",(r,c,t)=>{be("IntersectionObserver")}),e.__load_patch("FileReader",(r,c,t)=>{be("FileReader")}),e.__load_patch("on_property",(r,c,t)=>{!function St(e,r){if(Re&&!Xe||Zone[e.symbol("patchEvents")])return;const c=r.__Zone_ignore_on_properties;let t=[];if(Ve){const i=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const u=function pt(){try{const e=Te.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];ct(i,Fe(i),c&&c.concat(u),Le(i))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<t.length;i++){const u=r[t[i]];u&&u.prototype&&ct(u.prototype,Fe(u.prototype),c)}}(t,r)}),e.__load_patch("customElements",(r,c,t)=>{!function Rt(e,r){const{isBrowser:c,isMix:t}=r.getGlobalObjects();(c||t)&&e.customElements&&"customElements"in e&&r.patchCallbacks(r,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(r,t)}),e.__load_patch("XHR",(r,c)=>{!function D(d){const w=d.XMLHttpRequest;if(!w)return;const Z=w.prototype;let U=Z[Ze],J=Z[Ae];if(!U){const R=d.XMLHttpRequestEventTarget;if(R){const b=R.prototype;U=b[Ze],J=b[Ae]}}const K="readystatechange",X="scheduled";function k(R){const b=R.data,S=b.target;S[E]=!1,S[m]=!1;const Q=S[u];U||(U=S[Ze],J=S[Ae]),Q&&J.call(S,K,Q);const W=S[u]=()=>{if(S.readyState===S.DONE)if(!b.aborted&&S[E]&&R.state===X){const _=S[c.__symbol__("loadfalse")];if(0!==S.status&&_&&_.length>0){const n=R.invoke;R.invoke=function(){const o=S[c.__symbol__("loadfalse")];for(let p=0;p<o.length;p++)o[p]===R&&o.splice(p,1);!b.aborted&&R.state===X&&n.call(R)},_.push(R)}else R.invoke()}else!b.aborted&&!1===S[E]&&(S[m]=!0)};return U.call(S,K,W),S[t]||(S[t]=R),z.apply(S,b.args),S[E]=!0,R}function h(){}function H(R){const b=R.data;return b.aborted=!0,O.apply(b.target,b.args)}const V=ue(Z,"open",()=>function(R,b){return R[i]=0==b[2],R[T]=b[1],V.apply(R,b)}),G=j("fetchTaskAborting"),g=j("fetchTaskScheduling"),z=ue(Z,"send",()=>function(R,b){if(!0===c.current[g]||R[i])return z.apply(R,b);{const S={target:R,url:R[T],isPeriodic:!1,args:b,aborted:!1},Q=He("XMLHttpRequest.send",h,S,k,H);R&&!0===R[m]&&!S.aborted&&Q.state===X&&Q.invoke()}}),O=ue(Z,"abort",()=>function(R,b){const S=function x(R){return R[t]}(R);if(S&&"string"==typeof S.type){if(null==S.cancelFn||S.data&&S.data.aborted)return;S.zone.cancelTask(S)}else if(!0===c.current[G])return O.apply(R,b)})}(r);const t=j("xhrTask"),i=j("xhrSync"),u=j("xhrListener"),E=j("xhrScheduled"),T=j("xhrURL"),m=j("xhrErrorBeforeScheduled")}),e.__load_patch("geolocation",r=>{r.navigator&&r.navigator.geolocation&&function gt(e,r){const c=e.constructor.name;for(let t=0;t<r.length;t++){const i=r[t],u=e[i];if(u){if(!We(ke(e,i)))continue;e[i]=(T=>{const m=function(){return T.apply(this,xe(arguments,c+"."+i))};return fe(m,T),m})(u)}}}(r.navigator.geolocation,["getCurrentPosition","watchPosition"])}),e.__load_patch("PromiseRejectionEvent",(r,c)=>{function t(i){return function(u){st(r,i).forEach(T=>{const m=r.PromiseRejectionEvent;if(m){const D=new m(i,{promise:u.promise,reason:u.rejection});T.invoke(D)}})}}r.PromiseRejectionEvent&&(c[j("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),c[j("rejectionHandledHandler")]=t("rejectionhandled"))}),e.__load_patch("queueMicrotask",(r,c,t)=>{!function wt(e,r){r.patchMethod(e,"queueMicrotask",c=>function(t,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}(r,t)})}(at)}},te=>{te(te.s=935)}]);
"use strict";(self.webpackChunkmythic_ledger=self.webpackChunkmythic_ledger||[]).push([[792],{86:(Dd,Sy,uo)=>{var Ci={};uo.r(Ci),uo.d(Ci,{AbortException:()=>r4,AnnotationEditorLayer:()=>s4,AnnotationEditorParamsType:()=>o4,AnnotationEditorType:()=>$T,AnnotationEditorUIManager:()=>a4,AnnotationLayer:()=>l4,AnnotationMode:()=>c4,CMapCompressionType:()=>u4,ColorPicker:()=>d4,DOMSVGFactory:()=>h4,DrawLayer:()=>f4,FeatureTest:()=>p4,GlobalWorkerOptions:()=>zT,ImageKind:()=>g4,InvalidPDFException:()=>m4,MissingPDFException:()=>y4,OPS:()=>v4,PDFDataRangeTransport:()=>_4,PDFDateString:()=>b4,PDFWorker:()=>E4,PasswordResponses:()=>w4,PermissionFlag:()=>A4,PixelsPerInch:()=>C4,RenderingCancelledException:()=>D4,TextLayer:()=>S4,UnexpectedResponseException:()=>I4,Util:()=>T4,VerbosityLevel:()=>WT,XfaLayer:()=>M4,build:()=>x4,createValidAbsoluteUrl:()=>P4,fetchData:()=>R4,getDocument:()=>GT,getFilenameFromUrl:()=>N4,getPdfFilenameFromUrl:()=>O4,getXfaPageViewport:()=>k4,isDataScheme:()=>L4,isPdfFile:()=>F4,noContextMenu:()=>j4,normalizeUnicode:()=>B4,setLayerDimensions:()=>V4,shadow:()=>H4,version:()=>ad});var Sd={};uo.r(Sd),uo.d(Sd,{AnnotationLayerBuilder:()=>K5,DownloadManager:()=>Z5,EventBus:()=>Q5,FindState:()=>J5,GenericL10n:()=>UM,LinkTarget:()=>co,PDFFindController:()=>$M,PDFHistory:()=>e6,PDFLinkService:()=>zM,PDFPageView:()=>t6,PDFScriptingManager:()=>n6,PDFSinglePageViewer:()=>WM,PDFViewer:()=>GM,ProgressBar:()=>i6,RenderingStates:()=>r6,ScrollMode:()=>s6,SimpleLinkService:()=>o6,SpreadMode:()=>a6,StructTreeLayerBuilder:()=>l6,TextLayerBuilder:()=>c6,XfaLayerBuilder:()=>u6,parseQueryString:()=>d6});let Ze=null,hl=1;const er=Symbol("SIGNAL");function ee(n){const e=Ze;return Ze=n,e}const Ty={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function My(n){if((!fo(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==hl)){if(!n.producerMustRecompute(n)&&!Md(n))return n.dirty=!1,void(n.lastCleanEpoch=hl);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hl}}function Td(n){return n&&(n.nextProducerIndex=0),ee(n)}function Md(n){pl(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(My(t),i!==t.version))return!0}return!1}function xd(n){if(pl(n),fo(n))for(let e=0;e<n.producerNode.length;e++)fl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fl(n,e){if(function ky(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),1===n.liveConsumerNode.length&&function Ly(n){return void 0!==n.producerNode}(n))for(let i=0;i<n.producerNode.length;i++)fl(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];pl(r),r.producerIndexOfThis[i]=e}}function fo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Fy=null;function Ee(n){return"function"==typeof n}function Vy(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pd=Vy(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ml(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Wt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ee(i))try{i()}catch(s){e=s instanceof Pd?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{$y(s)}catch(o){e=e??[],o instanceof Pd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$y(e);else{if(e instanceof Wt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ml(t,e)}remove(e){const{_finalizers:t}=this;t&&ml(t,e),e instanceof Wt&&e._removeParent(this)}}Wt.EMPTY=(()=>{const n=new Wt;return n.closed=!0,n})();const Hy=Wt.EMPTY;function Uy(n){return n instanceof Wt||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function $y(n){Ee(n)?n():n.unsubscribe()}const tr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yl={setTimeout(n,e,...t){const{delegate:i}=yl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=yl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zy(n){yl.setTimeout(()=>{const{onUnhandledError:e}=tr;if(!e)throw n;e(n)})}function Rd(){}const ix=Nd("C",void 0,void 0);function Nd(n,e,t){return{kind:n,value:e,error:t}}let nr=null;function vl(n){if(tr.useDeprecatedSynchronousErrorHandling){const e=!nr;if(e&&(nr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=nr;if(nr=null,t)throw i}}else n()}class Od extends Wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uy(e)&&e.add(this)):this.destination=ux}static create(e,t,i){return new Ld(e,t,i)}next(e){this.isStopped?Fd(function sx(n){return Nd("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Fd(function rx(n){return Nd("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fd(ix,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ax=Function.prototype.bind;function kd(n,e){return ax.call(n,e)}class lx{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){_l(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){_l(i)}else _l(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_l(t)}}}class Ld extends Od{constructor(e,t,i){let r;if(super(),Ee(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&tr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&kd(e.next,s),error:e.error&&kd(e.error,s),complete:e.complete&&kd(e.complete,s)}):r=e}this.destination=new lx(r)}}function _l(n){tr.useDeprecatedSynchronousErrorHandling?function ox(n){tr.useDeprecatedSynchronousErrorHandling&&nr&&(nr.errorThrown=!0,nr.error=n)}(n):zy(n)}function Fd(n,e){const{onStoppedNotification:t}=tr;t&&yl.setTimeout(()=>t(n,e))}const ux={closed:!0,next:Rd,error:function cx(n){throw n},complete:Rd},jd="function"==typeof Symbol&&Symbol.observable||"@@observable";function Wy(n){return n}let Dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function hx(n){return n&&n instanceof Od||function dx(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}(n)&&Uy(n)}(t)?t:new Ld(t,i,r);return vl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=qy(i))((r,s)=>{const o=new Ld({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[jd](){return this}pipe(...t){return function Gy(n){return 0===n.length?Wy:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=qy(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function qy(n){var e;return null!==(e=n??tr.Promise)&&void 0!==e?e:Promise}const fx=Vy(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ir=(()=>{class n extends Dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Xy(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new fx}next(t){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Hy:(this.currentObservers=null,s.push(t),new Wt(()=>{this.currentObservers=null,ml(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Dt;return t.source=this,t}}return n.create=(e,t)=>new Xy(e,t),n})();class Xy extends ir{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Hy}}class px extends ir{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Kn(n){return e=>{if(function gx(n){return Ee(n?.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zn(n,e,t,i,r){return new mx(n,e,t,i,r)}class mx extends Od{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Di(n,e){return Kn((t,i)=>{let r=0;t.subscribe(Zn(i,s=>{i.next(n.call(e,s,r++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;class P extends Error{constructor(e,t){super(function Wr(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Qn(n){return{toString:n}.toString()}const Te=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function Qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function qd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const yP=ve({__forward_ref__:ve});function Xd(n){return n.__forward_ref__=Xd,n.toString=function(){return Qe(this())},n}function U(n){return function Cl(n){return"function"==typeof n&&n.hasOwnProperty(yP)&&n.__forward_ref__===Xd}(n)?n():n}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dl(n){return vv(n,Il)||vv(n,_v)}function vv(n,e){return n.hasOwnProperty(e)?n[e]:null}function Sl(n){return n&&(n.hasOwnProperty(Yd)||n.hasOwnProperty(wP))?n[Yd]:null}const Il=ve({\u0275prov:ve}),Yd=ve({\u0275inj:ve}),_v=ve({ngInjectableDef:ve}),wP=ve({ngInjectorDef:ve});class O{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function eh(n){return n&&!!n.\u0275providers}const go=ve({\u0275cmp:ve}),th=ve({\u0275dir:ve}),nh=ve({\u0275pipe:ve}),Jn=ve({\u0275fac:ve}),mo=ve({__NG_ELEMENT_ID__:ve}),wv=ve({__NG_ENV_ID__:ve});function he(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():function G(n){return"string"==typeof n?n:null==n?"":String(n)}(n)}function ih(n,e){throw new P(-201,!1)}var oe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(oe||{});let rh;function Av(){return rh}function Lt(n){const e=rh;return rh=n,e}function Cv(n,e,t){const i=Dl(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&oe.Optional?null:void 0!==e?e:void ih()}const yo={},sh="__NG_DI_FLAG__",Tl="ngTempTokenPath",TP=/\n/gm,Dv="__source";let Zr;function Ti(n){const e=Zr;return Zr=n,e}function PP(n,e=oe.Default){if(void 0===Zr)throw new P(-203,!1);return null===Zr?Cv(n,void 0,e):Zr.get(n,e&oe.Optional?null:void 0,e)}function J(n,e=oe.Default){return(Av()||PP)(U(n),e)}function R(n,e=oe.Default){return J(n,Ml(e))}function Ml(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function oh(n){const e=[];for(let t=0;t<n.length;t++){const i=U(n[t]);if(Array.isArray(i)){if(0===i.length)throw new P(900,!1);let r,s=oe.Default;for(let o=0;o<i.length;o++){const a=i[o],l=RP(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(J(r,s))}else e.push(J(i))}return e}function RP(n){return n[sh]}function sr(n,e){return n.hasOwnProperty(Jn)?n[Jn]:null}function Qr(n,e){n.forEach(t=>Array.isArray(t)?Qr(t,e):e(t))}function Iv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const Tn={},ue=[],Mn=new O(""),xv=new O("",-1),dh=new O("");class Rl{get(e,t=yo){if(t===yo){const i=new Error(`NullInjectorError: No provider for ${Qe(e)}!`);throw i.name="NullInjectorError",i}return t}}var Nl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Nl||{}),gn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(gn||{}),Mi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Mi||{});function BP(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function hh(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Rv(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function Pv(n){return 3===n||4===n||6===n}function Rv(n){return 64===n.charCodeAt(0)}function _o(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Nv(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Nv(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const Ov="ng-template";function VP(n,e,t,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==BP(e[r+1].toLowerCase(),t,0))return!0}else if(fh(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===t)return!0}return!1}function fh(n){return 4===n.type&&n.value!==Ov}function HP(n,e,t){return e===(4!==n.type||t?n.value:Ov)}function UP(n,e,t){let i=4;const r=n.attrs,s=null!==r?function WP(n){for(let e=0;e<n.length;e++)if(Pv(n[e]))return e;return n.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!HP(n,l,t)||""===l&&1===e.length){if(mn(i))return!1;o=!0}}else if(8&i){if(null===r||!VP(n,r,l,t)){if(mn(i))return!1;o=!0}}else{const c=e[++a],u=$P(l,r,fh(n),t);if(-1===u){if(mn(i))return!1;o=!0;continue}if(""!==c){let d;if(d=u>s?"":r[u+1].toLowerCase(),2&i&&c!==d){if(mn(i))return!1;o=!0}}}}else{if(!o&&!mn(i)&&!mn(l))return!1;if(o&&mn(l))continue;o=!1,i=l|1&i}}return mn(i)||o}function mn(n){return!(1&n)}function $P(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function GP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function kv(n,e,t=!1){for(let i=0;i<e.length;i++)if(UP(n,e[i],t))return!0;return!1}function Lv(n,e){return n?":not("+e.trim()+")":e}function XP(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!mn(o)&&(e+=Lv(s,r),r=""),i=o,s=s||!mn(i);t++}return""!==r&&(e+=Lv(s,r)),e}function ph(n){return Qn(()=>{const e=function jv(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Tn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ue,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fv(n.inputs,e),outputs:Fv(n.outputs),debugInfo:null}}(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Nl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gn.Emulated,styles:n.styles||ue,_:null,schemas:n.schemas||null,tView:null,id:""};!function Bv(n){n.features?.forEach(e=>e(n))}(t);const i=n.dependencies;return t.directiveDefs=Ol(i,!1),t.pipeDefs=Ol(i,!0),t.id=function eR(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function ZP(n){return re(n)||Je(n)}function QP(n){return null!==n}function bo(n){return Qn(()=>({type:n.type,bootstrap:n.bootstrap||ue,declarations:n.declarations||ue,imports:n.imports||ue,exports:n.exports||ue,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Fv(n,e){if(null==n)return Tn;const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];let s,o,a=Mi.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==Mi.None?[i,a]:i,e[s]=o):t[s]=i}return t}function re(n){return n[go]||null}function Je(n){return n[th]||null}function ut(n){return n[nh]||null}function Ol(n,e){if(!n)return null;const t=e?ut:ZP;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(QP)}function tR(...n){return{\u0275providers:gh(0,n),\u0275fromNgModule:!0}}function gh(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return Qr(e,o=>{const a=o;kl(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Vv(r,s),t}function Vv(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];mh(r,s=>{e(s,i)})}}function kl(n,e,t,i){if(!(n=U(n)))return!1;let r=null,s=Sl(n);const o=!s&&re(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Sl(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)kl(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{Qr(s.imports,u=>{kl(u,e,t,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&Vv(c,e)}if(!a){const c=sr(r)||(()=>new r);e({provide:r,useFactory:c,deps:ue},r),e({provide:dh,useValue:r,multi:!0},r),e({provide:Mn,useValue:()=>J(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;mh(l,u=>{e(u,c)})}}}return r!==n&&void 0!==n.providers}function mh(n,e){for(let t of n)eh(t)&&(t=t.\u0275providers),Array.isArray(t)?mh(t,e):e(t)}const nR=ve({provide:String,useValue:ve});function yh(n){return null!==n&&"object"==typeof n&&nR in n}function ar(n){return"function"==typeof n}const vh=new O(""),Ll={},rR={};let _h;function Fl(){return void 0===_h&&(_h=new Rl),_h}class on{}class es extends on{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Eh(e,o=>this.processProvider(o)),this.records.set(xv,ts(void 0,this)),r.has("environment")&&this.records.set(on,ts(void 0,this));const s=this.records.get(vh);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dh,ue,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=ee(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ti(this),i=Lt(void 0);try{return e()}finally{Ti(t),Lt(i)}}get(e,t=yo,i=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wv))return e[wv](this);i=Ml(i);const s=Ti(this),o=Lt(void 0);try{if(!(i&oe.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function cR(n){return"function"==typeof n||"object"==typeof n&&n instanceof O}(e)&&Dl(e);l=c&&this.injectableDefInScope(c)?ts(bh(e),Ll):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&oe.Self?Fl():this.parent).get(e,t=i&oe.Optional&&t===yo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Tl]=a[Tl]||[]).unshift(Qe(e)),s)throw a;return function NP(n,e,t,i){const r=n[Tl];throw e[Dv]&&r.unshift(e[Dv]),n.message=function OP(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Qe(e);if(Array.isArray(e))r=e.map(Qe).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Qe(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(TP,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Tl]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Lt(o),Ti(s)}}resolveInjectorInitializers(){const e=ee(null),t=Ti(this),i=Lt(void 0);try{const s=this.get(Mn,ue,oe.Self);for(const o of s)o()}finally{Ti(t),Lt(i),ee(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Qe(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){let t=ar(e=U(e))?e:U(e&&e.provide);const i=function oR(n){return yh(n)?ts(void 0,n.useValue):ts($v(n),Ll)}(e);if(!ar(e)&&!0===e.multi){let r=this.records.get(t);r||(r=ts(void 0,Ll,!0),r.factory=()=>oh(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){const i=ee(null);try{return t.value===Ll&&(t.value=rR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function lR(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=U(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function bh(n){const e=Dl(n),t=null!==e?e.factory:sr(n);if(null!==t)return t;if(n instanceof O)throw new P(204,!1);if(n instanceof Function)return function sR(n){if(n.length>0)throw new P(204,!1);const t=function EP(n){return n&&(n[Il]||n[_v])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new P(204,!1)}function $v(n,e,t){let i;if(ar(n)){const r=U(n);return sr(r)||bh(r)}if(yh(n))i=()=>U(n.useValue);else if(function Uv(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...oh(n.deps||[]));else if(function Hv(n){return!(!n||!n.useExisting)}(n))i=()=>J(U(n.useExisting));else{const r=U(n&&(n.useClass||n.provide));if(!function aR(n){return!!n.deps}(n))return sr(r)||bh(r);i=()=>new r(...oh(n.deps))}return i}function ts(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Eh(n,e){for(const t of n)Array.isArray(t)?Eh(t,e):t&&eh(t)?Eh(t.\u0275providers,e):e(t)}const Me=0,M=1,F=2,$e=3,yn=4,dt=5,St=6,is=7,Ce=8,ze=9,xn=10,$=11,Ao=12,Gv=13,rs=14,xe=15,lr=16,ss=17,ei=18,os=19,qv=20,xi=21,Bl=22,an=23,k=25,Ch=1,Pn=7,as=9,Fe=10;var Hl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Hl||{});function tt(n){return Array.isArray(n)&&"object"==typeof n[Ch]}function yt(n){return Array.isArray(n)&&!0===n[Ch]}function Dh(n){return!!(4&n.flags)}function cr(n){return n.componentOffset>-1}function Ul(n){return!(1&~n.flags)}function vn(n){return!!n.template}function Do(n){return!!(512&n[F])}class Qv{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Jv(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}function So(){return e_}function e_(n){return n.type.prototype.ngOnChanges&&(n.setInput=AR),wR}function wR(){const n=n_(this),e=n?.current;if(e){const t=n.previous;if(t===Tn)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function AR(n,e,t,i,r){const s=this.declaredInputs[i],o=n_(n)||function CR(n,e){return n[t_]=e}(n,{previous:Tn,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Qv(c&&c.currentValue,t,l===Tn),Jv(n,e,r,t)}So.ngInherit=!0;const t_="__ngSimpleChanges__";function n_(n){return n[t_]||null}const Rn=function(n,e,t){};function de(n){for(;Array.isArray(n);)n=n[Me];return n}function It(n,e){return de(e[n.index])}function To(n,e){return n.data[e]}function Yt(n,e){const t=e[n];return tt(t)?t:t[Me]}function xh(n){return!(128&~n[F])}function ln(n,e){return null==e?null:n[e]}function s_(n){n[ss]=0}function o_(n){1024&n[F]||(n[F]|=1024,xh(n)&&zl(n))}function $l(n){return!!(9216&n[F]||n[an]?.dirty)}function Ph(n){n[xn].changeDetectionScheduler?.notify(8),64&n[F]&&(n[F]|=1024),$l(n)&&zl(n)}function zl(n){n[xn].changeDetectionScheduler?.notify(0);let e=ti(n);for(;null!==e&&!(8192&e[F])&&(e[F]|=8192,xh(e));)e=ti(e)}function Wl(n,e){if(!(256&~n[F]))throw new P(911,!1);null===n[xi]&&(n[xi]=[]),n[xi].push(e)}function ti(n){const e=n[$e];return yt(e)?e[$e]:e}const z={lFrame:__(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let l_=!1;function c_(){return z.bindingsEnabled}function D(){return z.lFrame.lView}function te(){return z.lFrame.tView}function Nn(n){return z.lFrame.contextLView=n,n[Ce]}function On(n){return z.lFrame.contextLView=null,n}function _e(){let n=u_();for(;null!==n&&64===n.type;)n=n.parent;return n}function u_(){return z.lFrame.currentTNode}function _n(n,e){const t=z.lFrame;t.currentTNode=n,t.isParent=e}function Oh(){return z.lFrame.isParent}function f_(){return l_}function p_(n){l_=n}function bn(){return z.lFrame.bindingIndex++}function jR(n,e){const t=z.lFrame;t.bindingIndex=t.bindingRootIndex=n,Lh(e)}function Lh(n){z.lFrame.currentDirectiveIndex=n}function jh(){return z.lFrame.currentQueryIndex}function ql(n){z.lFrame.currentQueryIndex=n}function VR(n){const e=n[M];return 2===e.type?e.declTNode:1===e.type?n[dt]:null}function y_(n,e,t){if(t&oe.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&oe.Host||(r=VR(s),null===r||(s=s[rs],10&r.type))););if(null===r)return!1;e=r,n=s}const i=z.lFrame=v_();return i.currentTNode=e,i.lView=n,!0}function Bh(n){const e=v_(),t=n[M];z.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function v_(){const n=z.lFrame,e=null===n?null:n.child;return null===e?__(n):e}function __(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function b_(){const n=z.lFrame;return z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const E_=b_;function Vh(){const n=b_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ht(){return z.lFrame.selectedIndex}function hr(n){z.lFrame.selectedIndex=n}let A_=!0;function xo(){return A_}function kn(n){A_=n}function Xl(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Yl(n,e,t){C_(n,e,3,t)}function Kl(n,e,t,i){(3&n[F])===t&&C_(n,e,t,i)}function Hh(n,e){let t=n[F];(3&t)===e&&(t&=16383,t+=1,n[F]=t)}function C_(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[ss]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[ss]+=65536),(a<s||-1==s)&&(qR(n,t,e,l),n[ss]=(4294901760&n[ss])+l+2),l++}function D_(n,e){Rn(4,n,e);const t=ee(null);try{e.call(n)}finally{ee(t),Rn(5,n,e)}}function qR(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[F]>>14<n[ss]>>16&&(3&n[F])===e&&(n[F]+=16384,D_(a,s)):D_(a,s)}const ls=-1;class Po{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}const $h={};class fr{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Ml(i);const r=this.injector.get(e,$h,i);return r!==$h||t===$h?r:this.parentInjector.get(e,t,i)}}function zh(n){return n!==ls}function Ro(n){return 32767&n}function No(n,e){let t=function ZR(n){return n>>16}(n),i=e;for(;t>0;)i=i[rs],t--;return i}let Wh=!0;function Zl(n){const e=Wh;return Wh=n,e}const I_=255,T_=5;let JR=0;const Ln={};function Ql(n,e){const t=M_(n,e);if(-1!==t)return t;const i=e[M];i.firstCreatePass&&(n.injectorIndex=e.length,Gh(i.data,n),Gh(e,null),Gh(i.blueprint,null));const r=Jl(n,e),s=n.injectorIndex;if(zh(r)){const o=Ro(r),a=No(r,e),l=a[M].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Gh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function M_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Jl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=L_(r),null===i)return ls;if(t++,r=r[rs],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ls}function qh(n,e,t){!function eN(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(mo)&&(i=t[mo]),null==i&&(i=t[mo]=JR++);const r=i&I_;e.data[n+(r>>T_)]|=1<<r}(n,e,t)}function x_(n,e,t){if(t&oe.Optional||void 0!==n)return n;ih()}function P_(n,e,t,i){if(t&oe.Optional&&void 0===i&&(i=null),!(t&(oe.Self|oe.Host))){const r=n[ze],s=Lt(void 0);try{return r?r.get(e,i,t&oe.Optional):Cv(e,i,t&oe.Optional)}finally{Lt(s)}}return x_(i,0,t)}function R_(n,e,t,i=oe.Default,r){if(null!==n){if(2048&e[F]&&!(i&oe.Self)){const o=function oN(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[F]&&!(512&o[F]);){const a=N_(s,o,t,i|oe.Self,Ln);if(a!==Ln)return a;let l=s.parent;if(!l){const c=o[qv];if(c){const u=c.get(t,Ln,i);if(u!==Ln)return u}l=L_(o),o=o[rs]}s=l}return r}(n,e,t,i,Ln);if(o!==Ln)return o}const s=N_(n,e,t,i,Ln);if(s!==Ln)return s}return P_(e,t,i,r)}function N_(n,e,t,i,r){const s=function iN(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(mo)?n[mo]:void 0;return"number"==typeof e?e>=0?e&I_:rN:e}(t);if("function"==typeof s){if(!y_(e,n,i))return i&oe.Host?x_(r,0,i):P_(e,t,i,r);try{let o;if(o=s(i),null!=o||i&oe.Optional)return o;ih()}finally{E_()}}else if("number"==typeof s){let o=null,a=M_(n,e),l=ls,c=i&oe.Host?e[xe][dt]:null;for((-1===a||i&oe.SkipSelf)&&(l=-1===a?Jl(n,e):e[a+8],l!==ls&&k_(i,!1)?(o=e[M],a=Ro(l),e=No(l,e)):a=-1);-1!==a;){const u=e[M];if(O_(s,a,u.data)){const d=nN(a,e,t,o,i,c);if(d!==Ln)return d}l=e[a+8],l!==ls&&k_(i,e[M].data[a+8]===c)&&O_(s,a,e)?(o=u,a=Ro(l),e=No(l,e)):a=-1}}return r}function nN(n,e,t,i,r,s){const o=e[M],a=o.data[n+8],u=ec(a,o,t,null==i?cr(a)&&Wh:i!=o&&!!(3&a.type),r&oe.Host&&s===a);return null!==u?pr(e,o,u,a):Ln}function ec(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&vn(f)&&f.type===t)return l}return null}function pr(n,e,t,i){let r=n[t];const s=e.data;if(function XR(n){return n instanceof Po}(r)){const o=r;o.resolving&&function DP(n,e){throw e&&e.join(" > "),new P(-200,n)}(he(s[t]));const a=Zl(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Lt(o.injectImpl):null;y_(n,i,oe.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function GR(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=e_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Lt(c),Zl(a),o.resolving=!1,E_()}}return r}function O_(n,e,t){return!!(t[e+(n>>T_)]&1<<n)}function k_(n,e){return!(n&oe.Self||n&oe.Host&&e)}class nt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return R_(this._tNode,this._lView,e,Ml(i),t)}}function rN(){return new nt(_e(),D())}function L_(n){const e=n[M],t=e.type;return 2===t?e.declTNode:1===t?n[dt]:null}function H_(n,e=null,t=null,i){const r=function U_(n,e=null,t=null,i,r=new Set){const s=[t||ue,tR(n)];return i=i||("object"==typeof n?void 0:Qe(n)),new es(s,e||Fl(),i||null,r)}(n,e,t,i);return r.resolveInjectorInitializers(),r}class ft{static#e=this.THROW_IF_NOT_FOUND=yo;static#t=this.NULL=new Rl;static create(e,t){if(Array.isArray(e))return H_({name:""},t,e,"");{const i=e.name??"";return H_({name:i},e.parent,e.providers,i)}}static#n=this.\u0275prov=Q({token:ft,providedIn:"any",factory:()=>J(xv)});static#i=this.__NG_ELEMENT_ID__=-1}new O("").__NG_ELEMENT_ID__=n=>{const e=_e();if(null===e)throw new P(204,!1);if(2&e.type)return e.value;if(n&oe.Optional)return null;throw new P(204,!1)};function Kh(n){return n.ngOriginalError}const z_=!0;let Oo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=mN;static#t=this.__NG_ENV_ID__=t=>t}return n})();class gN extends Oo{constructor(e){super(),this._lView=e}onDestroy(e){return Wl(this._lView,e),()=>function Rh(n,e){if(null===n[xi])return;const t=n[xi].indexOf(e);-1!==t&&n[xi].splice(t,1)}(this._lView,e)}}function mN(){return new gN(D())}let Pi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new px(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();const vt=class yN extends ir{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,function zv(){return void 0!==Av()||null!=function xP(){return Zr}()}()&&(this.destroyRef=R(Oo,{optional:!0})??void 0,this.pendingTasks=R(Pi,{optional:!0})??void 0)}emit(e){const t=ee(null);try{super.next(e)}finally{ee(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Wt&&e.add(a),a}wrapInTimeout(e){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==i&&this.pendingTasks?.remove(i)})}}};function ic(...n){}function W_(n){let e,t;function i(){n=ic;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function G_(n){return queueMicrotask(()=>n()),()=>{n=ic}}const Zh="isAngularZone",rc=Zh+"_ID";let vN=0;class fe{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=z_}=e;if(typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,function EN(n){const e=()=>{!function bN(n){function e(){W_(()=>{n.callbackScheduled=!1,Jh(n),n.isCheckStableRunning=!0,Qh(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Jh(n))}(n)},t=vN++;n._inner=n._inner.fork({name:"angular",properties:{[Zh]:!0,[rc]:t,[rc+t]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(function wN(n){return Y_(n,"__ignore_ng_zone__")}(l))return i.invokeTask(s,o,a,l);try{return q_(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),X_(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return q_(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function AN(n){return Y_(n,"__scheduler_tick__")}(l)&&e(),X_(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Jh(n),Qh(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Zh)}static assertInAngularZone(){if(!fe.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(fe.isInAngularZone())throw new P(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,_N,ic,ic);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const _N={};function Qh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Jh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function q_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function X_(n){n._nesting--,Qh(n)}class ef{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vt,this.onMicrotaskEmpty=new vt,this.onStable=new vt,this.onError=new vt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}function Y_(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Fn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Kh(e);for(;t&&Kh(t);)t=Kh(t);return t||null}}const DN=new O("",{providedIn:"root",factory:()=>{const n=R(fe),e=R(Fn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function SN(){return ds(_e(),D())}function ds(n,e){return new gr(It(n,e))}let gr=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=SN}return n})();function Z_(n){return n instanceof gr?n.nativeElement:n}function IN(){return this._results[Symbol.iterator]()}class tf{static#e=Symbol.iterator;get changes(){return this._changes??=new vt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=tf.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=IN)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Ft(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function jP(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Lo(n){return!(128&~n.flags)}const rf=new Map;let MN=0;function sf(n){rf.delete(n[os])}const sc="__ngContext__";function _t(n,e){tt(e)?(n[sc]=e[os],function PN(n){rf.set(n[os],n)}(e)):n[sc]=e}function ab(n){return cb(n[Ao])}function lb(n){return cb(n[yn])}function cb(n){for(;null!==n&&!yt(n);)n=n[yn];return n}let lf;const jo=new O("",{providedIn:"root",factory:()=>XN}),XN="ng",yb=new O(""),Ni=new O("",{providedIn:"platform",factory:()=>"unknown"}),vb=new O("",{providedIn:"root",factory:()=>function Ri(){if(void 0!==lf)return lf;if(typeof document<"u")return document;throw new P(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let _b=()=>null;function gf(n,e,t=!1){return _b(n,e,t)}const Ib=new O("",{providedIn:"root",factory:()=>!1});let pc;function zb(n){return function aO(n){return function bf(){if(void 0===pc&&(pc=null,Te.trustedTypes))try{pc=Te.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pc}()?.createScriptURL(n)||n}(n[0])}var ki=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ki||{});let Tf;function Mf(n,e){return Tf(n,e)}function vs(n,e,t,i,r){if(null!=i){let s,o=!1;yt(i)?s=i:tt(i)&&(o=!0,i=i[Me]);const a=de(i);0===n&&null!==t?null==r?iE(e,t,a):yr(e,t,a,r||null,!0):1===n&&null!==t?yr(e,t,a,r||null,!0):2===n?function Xo(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function tk(n,e,t,i,r){const s=t[Pn];s!==de(t)&&vs(e,n,i,s,r);for(let a=Fe;a<t.length;a++){const l=t[a];wc(l[M],l,n,e,i,s)}}(e,n,s,t,r)}}function _c(n,e,t){return n.createElement(e,t)}function eE(n,e){e[xn].changeDetectionScheduler?.notify(9),wc(n,e,e[$],2,null,null)}function tE(n,e){const t=n[as],i=e[$e];(tt(i)||e[xe]!==i[$e][xe])&&(n[F]|=Hl.HasTransplantedViews),null===t?n[as]=[e]:t.push(e)}function Rf(n,e){const t=n[as],i=t.indexOf(e);t.splice(i,1)}function qo(n,e){if(n.length<=Fe)return;const t=Fe+e,i=n[t];if(i){const r=i[lr];null!==r&&r!==n&&Rf(r,i),e>0&&(n[t-1][yn]=i[yn]);const s=xl(n,Fe+e);!function qO(n,e){eE(n,e),e[Me]=null,e[dt]=null}(i[M],i);const o=s[ei];null!==o&&o.detachView(s[M]),i[$e]=null,i[yn]=null,i[F]&=-129}return i}function bc(n,e){if(!(256&e[F])){const t=e[$];t.destroyNode&&wc(n,e,t,3,null,null),function YO(n){let e=n[Ao];if(!e)return Nf(n[M],n);for(;e;){let t=null;if(tt(e))t=e[Ao];else{const i=e[Fe];i&&(t=i)}if(!t){for(;e&&!e[yn]&&e!==n;)tt(e)&&Nf(e[M],e),e=e[$e];null===e&&(e=n),tt(e)&&Nf(e[M],e),t=e&&e[yn]}e=t}}(e)}}function Nf(n,e){if(256&e[F])return;const t=ee(null);try{e[F]&=-129,e[F]|=256,e[an]&&xd(e[an]),function QO(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Po)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Rn(4,a,l);try{l.call(a)}finally{Rn(5,a,l)}}else{Rn(4,r,s);try{s.call(r)}finally{Rn(5,r,s)}}}}}(n,e),function ZO(n,e){const t=n.cleanup,i=e[is];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[is]=null);const r=e[xi];if(null!==r){e[xi]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[M].type&&e[$].destroy();const i=e[lr];if(null!==i&&yt(e[$e])){i!==e[$e]&&Rf(i,e);const r=e[ei];null!==r&&r.detachView(n)}sf(e)}finally{ee(t)}}function Of(n,e,t){return function nE(n,e,t){let i=e;for(;null!==i&&168&i.type;)i=(e=i).parent;if(null===i)return t[Me];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===gn.None||s===gn.Emulated)return null}return It(i,t)}}(n,e.parent,t)}function yr(n,e,t,i,r){n.insertBefore(e,t,i,r)}function iE(n,e,t){n.appendChild(e,t)}function rE(n,e,t,i,r){null!==i?yr(n,e,t,i,r):iE(n,e,t)}function kf(n,e){return n.parentNode(e)}let Lf,aE=function oE(n,e,t){return 40&n.type?It(n,t):null};function Ec(n,e,t,i){const r=Of(n,i,e),s=e[$],a=function sE(n,e,t){return aE(n,e,t)}(i.parent||e[dt],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)rE(s,r,t[l],a,!1);else rE(s,r,t,a,!1);void 0!==Lf&&Lf(s,i,e,t,r)}function vr(n,e){if(null!==e){const t=e.type;if(3&t)return It(e,n);if(4&t)return Ff(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return vr(n,i);{const r=n[e.index];return yt(r)?Ff(-1,r):de(r)}}if(128&t)return vr(n,e.next);if(32&t)return Mf(e,n)()||de(n[e.index]);{const i=cE(n,e);return null!==i?Array.isArray(i)?i[0]:vr(ti(n[xe]),i):vr(n,e.next)}}return null}function cE(n,e){return null!==e?n[xe][dt].projection[e.projection]:null}function Ff(n,e){const t=Fe+n+1;if(t<e.length){const i=e[t],r=i[M].firstChild;if(null!==r)return vr(i,r)}return e[Pn]}function jf(n,e,t,i,r,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=i[t.index],l=t.type;if(o&&0===e&&(a&&_t(de(a),i),t.flags|=2),32&~t.flags)if(8&l)jf(n,e,t.child,i,r,s,!1),vs(e,n,r,a,s);else if(32&l){const c=Mf(t,i);let u;for(;u=c();)vs(e,n,r,u,s);vs(e,n,r,a,s)}else 16&l?dE(n,e,i,t,r,s):vs(e,n,r,a,s);t=o?t.projectionNext:t.next}}function wc(n,e,t,i,r,s){jf(t,i,n.firstChild,e,r,s,!1)}function dE(n,e,t,i,r,s){const o=t[xe],l=o[dt].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)vs(e,n,r,l[c],s);else{let c=l;const u=o[$e];Lo(i)&&(c.flags|=128),jf(n,e,c,u,r,s,!0)}}function hE(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fE(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&hh(n,e,i),null!==r&&hE(n,e,r),null!==s&&function ik(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const q={};function jn(n=1){pE(te(),D(),ht()+n,!1)}function pE(n,e,t,i){if(!i)if(3&~e[F]){const s=n.preOrderHooks;null!==s&&Kl(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Yl(e,s,t)}hr(t)}function ne(n,e=oe.Default){const t=D();return null===t?J(n,e):R_(_e(),t,U(n),e)}function gE(n,e,t,i,r,s){const o=ee(null);try{let a=null;r&Mi.SignalBased&&(a=e[i][er]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&Mi.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,i):Jv(e,a,i,s)}finally{ee(o)}}function Ac(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[Me]=r,d[F]=204|i,(null!==c||n&&2048&n[F])&&(d[F]|=2048),s_(d),d[$e]=d[rs]=n,d[Ce]=t,d[xn]=o||n&&n[xn],d[$]=a||n&&n[$],d[ze]=l||n&&n[ze]||null,d[dt]=s,d[os]=function xN(){return MN++}(),d[St]=u,d[qv]=c,d[xe]=2==e.type?n[xe]:d,d}function _r(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Bf(n,e,t,i,r){const s=u_(),o=Oh(),l=n.data[e]=function hk(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return function dr(){return null!==z.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function FR(){return z.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Mo(){const n=z.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _n(s,!0),s}function Yo(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function mE(n,e,t,i,r){const s=ht(),o=2&i;try{hr(-1),o&&e.length>k&&pE(n,e,k,!1),Rn(o?2:0,r),t(i,r)}finally{hr(s),Rn(o?3:1,r)}}function Vf(n,e,t){if(Dh(e)){const i=ee(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ee(i)}}}function Hf(n,e,t){c_()&&(function _k(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;cr(t)&&function Sk(n,e,t){const i=It(e,n),r=yE(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Cc(n,Ac(n,r,null,o,i,e,null,n[xn].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ql(t,e),_t(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=pr(e,n,a,t);_t(c,e),null!==o&&Ik(0,a-r,c,l,0,o),vn(l)&&(Yt(t.index,e)[Ce]=pr(e,n,a,t))}}(n,e,t,It(t,e)),!(64&~t.flags)&&wE(n,e,t))}function Uf(n,e,t=It){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function yE(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=$f(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $f(n,e,t,i,r,s,o,a,l,c,u){const d=k+i,h=d+r,f=function ok(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:q);return t}(d,h),p="function"==typeof c?c():c;return f[M]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}let vE=()=>null;function _E(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;i??={};let a,l=Mi.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==r){if(!r.hasOwnProperty(s))continue;c=r[s]}0===n?bE(i,t,c,a,l):bE(i,t,c,a)}return i}function bE(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],void 0!==r&&s.push(r)}function zf(n,e,t,i){if(c_()){const r=null===i?null:{"":-1},s=function Ek(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(kv(e,o.selectors,!1))if(i||(i=[]),vn(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Wf(n,e,a.length)}else i.unshift(o),Wf(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&EE(n,e,t,o,r,a),r&&function wk(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new P(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=_o(t.mergedAttrs,t.attrs)}function EE(n,e,t,i,r,s){for(let c=0;c<i.length;c++)qh(Ql(t,e),n,i[c].type);!function Ck(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Yo(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=_o(t.mergedAttrs,u.hostAttrs),Dk(n,t,e,l,u),Ak(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function fk(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;l=_E(0,d.inputs,u,l,h?h.inputs:null),c=_E(1,d.outputs,u,c,p);const g=null===l||null===o||fh(e)?null:Tk(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function wE(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function BR(){return z.lFrame.currentDirectiveIndex}();try{hr(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];Lh(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&bk(l,c)}}finally{hr(-1),Lh(o)}}function bk(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Wf(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ak(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;vn(e)&&(t[""]=n)}}function Dk(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=sr(r.type)),o=new Po(s,vn(r),ne);n.blueprint[i]=o,t[i]=o,function yk(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function vk(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Yo(n,t,r.hostVars,q),r)}function Ik(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)gE(i,t,o[a++],o[a++],o[a++],o[a++])}function Tk(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function AE(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function CE(n,e){const t=n.contentQueries;if(null!==t){const i=ee(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];ql(t[r]),a.contentQueries(2,e[o],o)}}}finally{ee(i)}}}function Cc(n,e){return n[Ao]?n[Gv][yn]=e:n[Ao]=e,n[Gv]=e,e}function qf(n,e,t){ql(0);const i=ee(null);try{e(n,t)}finally{ee(i)}}function DE(n){return n[is]??=[]}function SE(n){return n.cleanup??=[]}function Dc(n,e){const t=n[ze],i=t?t.get(Fn,null):null;i&&i.handleError(e)}function Xf(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];gE(n.data[o],e[o],i,a,l,r)}}function Mk(n,e){const t=Yt(e,n),i=t[M];!function xk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Me];null!==r&&null===t[St]&&(t[St]=gf(r,t[ze])),Yf(i,t,t[Ce])}function Yf(n,e,t){Bh(e);try{const i=n.viewQuery;null!==i&&qf(1,i,t);const r=n.template;null!==r&&mE(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ei]?.finishViewCreation(n),n.staticContentQueries&&CE(n,e),n.staticViewQueries&&qf(2,n.viewQuery,t);const s=n.components;null!==s&&function Pk(n,e){for(let t=0;t<e.length;t++)Mk(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[F]&=-5,Vh()}}function _s(n,e,t,i){const r=ee(null);try{const s=e.tView,l=Ac(n,s,t,4096&n[F]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);l[lr]=n[e.index];const u=n[ei];return null!==u&&(l[ei]=u.createEmbeddedView(s)),Yf(s,l,t),l}finally{ee(r)}}function br(n,e){return!e||null===e.firstChild||Lo(n)}function bs(n,e,t,i=!0){const r=e[M];if(function KO(n,e,t,i){const r=Fe+i,s=t.length;i>0&&(t[r-1][yn]=e),i<s-Fe?(e[yn]=t[r],Iv(t,Fe+i,e)):(t.push(e),e[yn]=null),e[$e]=t;const o=e[lr];null!==o&&t!==o&&tE(o,e);const a=e[ei];null!==a&&a.insertView(n),Ph(e),e[F]|=128}(r,e,n,t),i){const o=Ff(t,n),a=e[$],l=kf(a,n[Pn]);null!==l&&function XO(n,e,t,i,r,s){i[Me]=r,i[dt]=e,wc(n,i,t,1,r,s)}(r,n[dt],a,e,l,o)}const s=e[St];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Ko(n,e,t,i,r=!1){for(;null!==t;){if(128===t.type){t=r?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&i.push(de(s)),yt(s)&&ME(s,i);const o=t.type;if(8&o)Ko(n,e,t.child,i);else if(32&o){const a=Mf(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=cE(e,t);if(Array.isArray(a))i.push(...a);else{const l=ti(e[xe]);Ko(l[M],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function ME(n,e){for(let t=Fe;t<n.length;t++){const i=n[t],r=i[M].firstChild;null!==r&&Ko(i[M],i,r,e)}n[Pn]!==n[Me]&&e.push(n[Pn])}let xE=[];const kk={...Ty,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{zl(n.lView)},consumerOnSignalRead(){this.lView[an]=this}},Fk={...Ty,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ti(n.lView);for(;e&&!PE(e[M]);)e=ti(e);e&&o_(e)},consumerOnSignalRead(){this.lView[an]=this}};function PE(n){return 2!==n.type}const jk=100;function Sc(n,e=!0,t=0){const i=n[xn],r=i.rendererFactory;r.begin?.();try{!function Bk(n,e){const t=f_();try{p_(!0),Zf(n,e);let i=0;for(;$l(n);){if(i===jk)throw new P(103,!1);i++,Zf(n,1)}}finally{p_(t)}}(n,t)}catch(o){throw e&&Dc(n,o),o}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function Vk(n,e,t,i){const r=e[F];if(!(256&~r))return;e[xn].inlineEffectRunner?.flush(),Bh(e);let a=!0,l=null,c=null;PE(n)?(c=function Rk(n){return n[an]??function Nk(n){const e=xE.pop()??Object.create(kk);return e.lView=n,e}(n)}(e),l=Td(c)):null===function Iy(){return Ze}()?(a=!1,c=function Lk(n){const e=n[an]??Object.create(Fk);return e.lView=n,e}(e),l=Td(c)):e[an]&&(xd(e[an]),e[an]=null);try{s_(e),function g_(n){return z.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&mE(n,e,t,2,i);const u=!(3&~r);if(u){const f=n.preOrderCheckHooks;null!==f&&Yl(e,f,null)}else{const f=n.preOrderHooks;null!==f&&Kl(e,f,0,null),Hh(e,0)}if(function Hk(n){for(let e=ab(n);null!==e;e=lb(e)){if(!(e[F]&Hl.HasTransplantedViews))continue;const t=e[as];for(let i=0;i<t.length;i++)o_(t[i])}}(e),NE(e,0),null!==n.contentQueries&&CE(n,e),u){const f=n.contentCheckHooks;null!==f&&Yl(e,f)}else{const f=n.contentHooks;null!==f&&Kl(e,f,1),Hh(e,1)}!function sk(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)hr(~r);else{const s=r,o=t[++i],a=t[++i];jR(o,s),a(2,e[s])}}}finally{hr(-1)}}(n,e);const d=n.components;null!==d&&kE(e,d,0);const h=n.viewQuery;if(null!==h&&qf(2,h,i),u){const f=n.viewCheckHooks;null!==f&&Yl(e,f)}else{const f=n.viewHooks;null!==f&&Kl(e,f,2),Hh(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Bl]){for(const f of e[Bl])f();e[Bl]=null}e[F]&=-73}catch(u){throw zl(e),u}finally{null!==c&&(function Ny(n,e){if(ee(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(fo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)fl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(c,l),a&&function Ok(n){n.lView[an]!==n&&(n.lView=null,xE.push(n))}(c)),Vh()}}function NE(n,e){for(let t=ab(n);null!==t;t=lb(t))for(let i=Fe;i<t.length;i++)OE(t[i],e)}function Uk(n,e,t){OE(Yt(e,n),t)}function OE(n,e){xh(n)&&Zf(n,e)}function Zf(n,e){const i=n[M],r=n[F],s=n[an];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!Md(s)),o||=!1,s&&(s.dirty=!1),n[F]&=-9217,o)Vk(i,n,i.template,n[Ce]);else if(8192&r){NE(n,1);const a=i.components;null!==a&&kE(n,a,1)}}function kE(n,e,t){for(let i=0;i<e.length;i++)Uk(n,e[i],t)}function Zo(n,e){const t=f_()?64:1088;for(n[xn].changeDetectionScheduler?.notify(e);n;){n[F]|=t;const i=ti(n);if(Do(n)&&!i)return n;n=i}return null}class Qo{get rootNodes(){const e=this._lView,t=e[M];return Ko(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ce]}set context(e){this._lView[Ce]=e}get destroyed(){return!(256&~this._lView[F])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[$e];if(yt(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(qo(e,i),xl(t,i))}this._attachedToViewContainer=!1}bc(this._lView[M],this._lView)}onDestroy(e){Wl(this._lView,e)}markForCheck(){Zo(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){Ph(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,Sc(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Do(this._lView),t=this._lView[lr];null!==t&&!e&&Rf(t,this._lView),eE(this._lView[M],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e;const t=Do(this._lView),i=this._lView[lr];null!==i&&!t&&tE(i,this._lView),Ph(this._lView)}}let oi=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Wk}return n})();const $k=oi,zk=class extends $k{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=_s(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Qo(r)}};function Wk(){return Ic(_e(),D())}function Ic(n,e){return 4&n.type?new zk(e,n,ds(n,e)):null}let nw=()=>null;function wr(n,e){return nw(n,e)}class ws{}const oa=new O("",{providedIn:"root",factory:()=>!1}),iw=new O(""),lp=new O("");class FL{}class rw{}class BL{resolveComponentFactory(e){throw function jL(n){const e=Error(`No component factory found for ${Qe(n)}.`);return e.ngComponent=n,e}(e)}}class As{static#e=this.NULL=new BL}class cp{}let HL=(()=>{class n{static#e=this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();function Oc(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=qd(r,a):2==s&&(i=qd(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class cw extends As{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=re(e);return new ca(t,this.ngModule)}}function uw(n,e){const t=[];for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i];if(void 0===r)continue;const s=Array.isArray(r),o=s?r[0]:r;t.push(e?{propName:o,templateName:i,isSignal:!!((s?r[1]:Mi.None)&Mi.SignalBased)}:{propName:o,templateName:i})}return t}class ca extends rw{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=uw(e.inputs,!0);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return uw(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function YP(n){return n.map(XP).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){const s=ee(null);try{let o=(r=r||this.ngModule)instanceof on?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new fr(e,o):e,l=a.get(cp,null);if(null===l)throw new P(407,!1);const d={rendererFactory:l,sanitizer:a.get(HL,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(ws,null)},h=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?function ak(n,e,t,i){const s=i.get(Ib,!1)||t===gn.ShadowDom,o=n.selectRootElement(e,s);return function lk(n){vE(n)}(o),o}(h,i,this.componentDef.encapsulation,a):_c(h,f,function zL(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f));let g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let y=null;null!==p&&(y=gf(p,a,!0));const m=$f(0,null,null,1,0,null,null,null,null,null,null),v=Ac(null,m,null,g,null,null,d,h,a,null,y);Bh(v);let _,b,E=null;try{const w=this.componentDef;let C,I=null;w.findHostDirectiveDefs?(C=[],I=new Map,w.findHostDirectiveDefs(w,C,I),C.push(w)):C=[w];const A=function GL(n,e){const t=n[M],i=k;return n[i]=e,_r(t,i,2,"#host",null)}(v,p);E=function qL(n,e,t,i,r,s,o){const a=r[M];!function XL(n,e,t,i){for(const r of n)e.mergedAttrs=_o(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Oc(e,e.mergedAttrs,!0),null!==t&&fE(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=gf(e,r[ze]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Ac(r,yE(t),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&Wf(a,n,i.length-1),Cc(r,d),r[n.index]=d}(A,p,w,C,v,d,h),b=To(m,k),p&&function KL(n,e,t,i){if(i)hh(n,t,["ng-version","18.2.4"]);else{const{attrs:r,classes:s}=function KP(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!mn(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&hh(n,t,r),s&&s.length>0&&hE(n,t,s.join(" "))}}(h,w,p,i),void 0!==t&&function ZL(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(b,this.ngContentSelectors,t),_=function YL(n,e,t,i,r,s){const o=_e(),a=r[M],l=It(o,r);EE(a,r,o,t,null,i);for(let u=0;u<t.length;u++)_t(pr(r,a,o.directiveStart+u,o),r);wE(a,r,o),l&&_t(l,r);const c=pr(r,a,o.directiveStart+o.componentOffset,o);if(n[Ce]=r[Ce]=c,null!==s)for(const u of s)u(c,e);return Vf(a,o,r),c}(E,w,C,I,v,[QL]),Yf(m,v,null)}catch(w){throw null!==E&&sf(E),sf(v),w}finally{Vh()}return new WL(this.componentType,_,ds(b,v),v,b)}finally{ee(s)}}}class WL extends FL{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qo(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Xf(s[M],s,r,e,t),this.previousInputValues.set(e,t),Zo(Yt(this._tNode.index,s),1)}}get injector(){return new nt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function QL(){const n=_e();Xl(D()[M],n)}let Vn=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=JL}return n})();function JL(){return fw(_e(),D())}const e1=Vn,dw=class extends e1{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ds(this._hostTNode,this._hostLView)}get injector(){return new nt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Jl(this._hostTNode,this._hostLView);if(zh(e)){const t=No(e,this._hostLView),i=Ro(e);return new nt(t[M].data[i+8],t)}return new nt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=hw(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=wr(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,br(this._hostTNode,o)),a}createComponent(e,t,i,r,s){const o=e&&!function wo(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const l=o?e:new ca(re(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const g=(o?c:this.parentInjector).get(on,null);g&&(s=g)}const u=re(l.componentType??{}),d=wr(this._lContainer,u?.id??null),f=l.create(c,r,d?.firstChild??null,s);return this.insertImpl(f.hostView,a,br(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function TR(n){return yt(n[$e])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=r[$e],c=new dw(l,l[dt],l[$e]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return bs(o,r,s,i),e.attachToViewContainerRef(),Iv(hp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=hw(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=qo(this._lContainer,t);i&&(xl(hp(this._lContainer),t),bc(i[M],i))}detach(e){const t=this._adjustIndex(e,-1),i=qo(this._lContainer,t);return i&&null!=xl(hp(this._lContainer),t)?new Qo(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function hw(n){return n[8]}function hp(n){return n[8]||(n[8]=[])}function fw(n,e){let t;const i=e[n.index];return yt(i)?t=i:(t=AE(i,e,null,n),e[n.index]=t,Cc(e,t)),pw(t,e,n,i),new dw(t,n,e)}let pw=function mw(n,e,t,i){if(n[Pn])return;let r;r=8&t.type?de(i):function t1(n,e){const t=n[$],i=t.createComment(""),r=It(e,n);return yr(t,kf(t,r),i,function JO(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Pn]=r},fp=()=>!1;class pp{constructor(e){this.queryList=e,this.matches=null}clone(){return new pp(this.queryList)}setDirty(){this.queryList.setDirty()}}class gp{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new gp(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==bp(e,t).matches&&this.queries[t].setDirty()}}class yw{constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function c1(n){return n.split(",").map(e=>e.trim())}(e):e}}class mp{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new mp(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class yp{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new yp(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,s1(t,s)),this.matchTNodeWithReadOption(e,t,ec(t,e,s,!1,!1))}else i===oi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ec(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===gr||r===Vn||r===oi&&4&t.type)this.addMatch(t.index,-2);else{const s=ec(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function s1(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function a1(n,e,t,i){return-1===t?function o1(n,e){return 11&n.type?ds(n,e):4&n.type?Ic(n,e):null}(e,n):-2===t?function l1(n,e,t){return t===gr?ds(e,n):t===oi?Ic(e,n):t===Vn?fw(e,n):void 0}(n,e,i):pr(n,n[M],t,e)}function vw(n,e,t,i){const r=e[ei].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:a1(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function vp(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=vw(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=Fe;d<u.length;d++){const h=u[d];h[lr]===h[$e]&&vp(h[M],h,c,i)}if(null!==u[as]){const d=u[as];for(let h=0;h<d.length;h++){const f=d[h];vp(f[M],f,c,i)}}}}}return i}function bw(n,e,t){const i=te();return i.firstCreatePass&&(function ww(n,e,t){null===n.queries&&(n.queries=new mp),n.queries.track(new yp(e,t))}(i,new yw(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),function _w(n,e,t){const i=new tf(!(4&~t));return function dk(n,e,t,i){const r=DE(e);r.push(t),n.firstCreatePass&&SE(n).push(i,r.length-1)}(n,e,i,i.destroy),(e[ei]??=new gp).queries.push(new pp(i))-1}(i,D(),e)}function bp(n,e){return n.queries.getByIndex(e)}function Aw(n,e){const t=n[M],i=bp(t,e);return i.crossesNgTemplate?vp(t,n,e,[]):vw(t,n,i,e)}const Cw=new Set;function Mt(n){Cw.has(n)||(Cw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}class Cr{}class $w extends Cr{constructor(e){super(),this.componentFactoryResolver=new cw(this),this.instance=null;const t=new es([...e.providers,{provide:Cr,useValue:this},{provide:As,useValue:this.componentFactoryResolver}],e.parent||Fl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function je(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ha(n,e,t,i,r,s,o,a,l,c){const u=t+k,d=e.firstCreatePass?function B1(n,e,t,i,r,s,o,a,l){const c=e.consts,u=_r(e,n,4,o||null,a||null);zf(e,t,u,ln(c,l)),Xl(e,u);const d=u.tView=$f(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,i,r,s,o,a,l):e.data[u];_n(d,!1);const h=Ww(e,n,d,t);xo()&&Ec(e,n,h,d),_t(h,n);const f=AE(h,n,h,d);return n[u]=f,Cc(n,f),function gw(n,e,t){return fp(n,e,t)}(f,d,n),Ul(d)&&Hf(e,n,d),null!=l&&Uf(n,d,c),d}function Bc(n,e,t,i,r,s,o,a){const l=D(),c=te();return ha(l,c,n,e,t,i,r,ln(c.consts,s),o,a),Bc}let Ww=function Gw(n,e,t,i){return kn(!0),e[$].createComment("")};var Is=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Is||{});let Qw=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static#e=this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();class ga{constructor(){this.ngZone=R(fe),this.scheduler=R(ws),this.errorHandler=R(Fn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static#e=this.PHASES=[Is.EarlyRead,Is.Write,Is.MixedReadWrite,Is.Read];execute(){this.executing=!0;for(const e of ga.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static#t=this.\u0275prov=Q({token:ga,providedIn:"root",factory:()=>new ga})}function Bp(n,e,t){const i=D();return je(i,bn(),e)&&function Vt(n,e,t,i,r,s,o,a){const l=It(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(Xf(n,t,u,i,r),cr(e)&&function gk(n,e){const t=Yt(e,n);16&t[F]||(t[F]|=64)}(t,e.index)):3&e.type&&(i=function pk(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}(te(),function De(){const n=z.lFrame;return To(n.tView,n.selectedIndex)}(),i,n,e,i[$],t,!1),Bp}function Vp(n,e,t,i,r){const o=r?"class":"style";Xf(n,t,e.inputs[o],o,i)}function ai(n,e){Mt("NgControlFlow");const t=D(),i=bn(),r=t[i]!==q?t[i]:-1,s=-1!==r?qc(t,k+r):void 0;if(je(t,i,n)){const a=ee(null);try{if(void 0!==s&&function Kf(n,e){const t=qo(n,e);return void 0!==t&&bc(t[M],t),t}(s,0),-1!==n){const l=k+n,c=qc(t,l),u=function zp(n,e){return To(n,e)}(t[M],l),d=wr(c,u.tView.ssrId);bs(c,_s(t,u,e,{dehydratedView:d}),0,br(u,d))}}finally{ee(a)}}else if(void 0!==s){const a=function TE(n,e){const t=Fe+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Ce]=e)}}function qc(n,e){return n[e]}function B(n,e,t,i){const r=D(),s=te(),o=k+n,a=r[$],l=s.firstCreatePass?function d2(n,e,t,i,r,s){const o=e.consts,l=_r(e,n,2,i,ln(o,r));return zf(e,t,l,ln(o,s)),null!==l.attrs&&Oc(l,l.attrs,!1),null!==l.mergedAttrs&&Oc(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],c=WA(s,r,l,a,e,n);r[o]=c;const u=Ul(l);return _n(l,!0),fE(a,c,l),!function Ds(n){return!(32&~n.flags)}(l)&&xo()&&Ec(s,r,c,l),0===function MR(){return z.lFrame.elementDepthCount}()&&_t(c,r),function xR(){z.lFrame.elementDepthCount++}(),u&&(Hf(s,r,l),Vf(s,l,r)),null!==i&&Uf(r,l),B}function V(){let n=_e();Oh()?function kh(){z.lFrame.isParent=!1}():(n=n.parent,_n(n,!1));const e=n;(function RR(n){return z.skipHydrationRootTNode===n})(e)&&function LR(){z.skipHydrationRootTNode=null}(),function PR(){z.lFrame.elementDepthCount--}();const t=te();return t.firstCreatePass&&(Xl(t,n),Dh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function YR(n){return!!(8&n.flags)}(e)&&Vp(t,e,D(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function KR(n){return!!(16&n.flags)}(e)&&Vp(t,e,D(),e.stylesWithoutHost,!1),V}function li(n,e,t,i){return B(n,e,t,i),V(),li}let WA=(n,e,t,i,r,s)=>(kn(!0),_c(i,r,function w_(){return z.lFrame.currentNamespace}()));function ci(){return D()}const Xc="en-US";let QA=Xc,mC=(n,e,t)=>{};function An(n,e,t,i){const r=D(),s=te(),o=_e();return function Yp(n,e,t,i,r,s,o){const a=Ul(i),c=n.firstCreatePass&&SE(n),u=e[Ce],d=DE(e);let h=!0;if(3&i.type||o){const g=It(i,e),y=o?o(g):g,m=d.length,v=o?b=>o(de(b[i.index])):i.index;let _=null;if(!o&&a&&(_=function aj(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[is],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,h=!1;else{s=bC(i,e,u,s),mC(g,r,s);const b=t.listen(y,r,s);d.push(s,b),c&&c.push(r,v,m,m+1)}}else s=bC(i,e,u,s);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const E=e[p[y]][p[y+1]].subscribe(s),w=d.length;d.push(s,E),c&&c.push(r,i.index,w,-(w+1))}}}(s,r,r[$],o,n,e,i),An}function _C(n,e,t,i){const r=ee(null);try{return Rn(6,e,t),!1!==t(i)}catch(s){return Dc(n,s),!1}finally{Rn(7,e,t),ee(r)}}function bC(n,e,t,i){return function r(s){if(s===Function)return i;Zo(n.componentOffset>-1?Yt(n.index,e):e,5);let a=_C(e,t,i,s),l=r.__ngNextListenerFn__;for(;l;)a=_C(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function zn(n=1){return function HR(n){return(z.lFrame.contextLView=function a_(n,e){for(;n>0;)e=e[rs],n--;return e}(n,z.lFrame.contextLView))[Ce]}(n)}function RC(){return function _p(n,e){return n[ei].queries[e].queryList}(D(),jh())}function Y(n,e=""){const t=D(),i=te(),r=n+k,s=i.firstCreatePass?_r(i,r,1,e,null):i.data[r],o=UC(i,t,s,e,n);t[r]=o,xo()&&Ec(i,t,o,s),_n(s,!1)}let UC=(n,e,t,i,r)=>(kn(!0),function xf(n,e){return n.createText(e)}(e[$],i));function Jp(n,e,t,i,r){if(n=U(n),Array.isArray(n))for(let s=0;s<n.length;s++)Jp(n[s],e,t,i,r);else{const s=te(),o=D(),a=_e();let l=ar(n)?n:U(n.provide);const c=$v(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(ar(n)||!n.multi){const f=new Po(c,r,ne),p=tg(l,e,r?u:u+h,d);-1===p?(qh(Ql(a,o),s,l),eg(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=tg(l,e,u+h,d),p=tg(l,e,u,u+h),y=p>=0&&t[p];if(r&&!y||!r&&!(f>=0&&t[f])){qh(Ql(a,o),s,l);const m=function Oj(n,e,t,i,r){const s=new Po(n,t,ne);return s.multi=[],s.index=e,s.componentProviders=0,n0(s,r,i&&!t),s}(r?Nj:Rj,t.length,r,i,c);!r&&y&&(t[p].providerFactory=m),eg(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),o.push(m)}else eg(s,n,f>-1?f:p,n0(t[r?p:f],c,!r&&i));!r&&i&&y&&t[p].componentProviders++}}}function eg(n,e,t,i){const r=ar(e),s=function iR(n){return!!n.useClass}(e);if(r||s){const l=(s?U(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function n0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function tg(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Rj(n,e,t,i){return ng(this.multi,[])}function Nj(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=pr(t,t[M],this.providerFactory.index,i);s=a.slice(0,o),ng(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],ng(r,s);return s}function ng(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function r0(n,e=[]){return t=>{t.providersResolver=(i,r)=>function Pj(n,e,t){const i=te();if(i.firstCreatePass){const r=vn(n);Jp(t,i.data,i.blueprint,r,!0),Jp(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}let kj=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=gh(0,t.type),r=i.length>0?function zw(n,e,t=null){return new $w({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(J(on))})}return n})();function s0(n){Mt("NgStandalone"),n.getStandaloneInjector=e=>e.get(kj).getOrCreateStandaloneInjector(n)}const R0=new O("");function dg(n){return!!n&&"function"==typeof n.then}function N0(n){return!!n&&"function"==typeof n.subscribe}const ZB=new O("");let O0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=R(ZB,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(dg(s))t.push(s);else if(N0(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hg=new O("");let Wn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=R(DN),this.afterRenderManager=R(Qw),this.zonelessEnabled=R(oa),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ir,this.afterTick=new ir,this.componentTypes=[],this.components=[],this.isStable=R(Pi).hasPendingTasks.pipe(Di(t=>!t)),this._injector=R(on)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof rw;if(!this._injector.get(O0).done)throw!r&&function or(n){const e=re(n)||Je(n)||ut(n);return null!==e&&e.standalone}(t),new P(405,!1);let o;o=r?t:this._injector.get(As).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function QB(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Cr),c=o.create(ft.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(R0,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),ru(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new P(101,!1);const t=ee(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ee(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(cp,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;0!==this.dirtyFlags&&i++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const i=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:s}of this._views)tV(r,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>$l(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;ru(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(hg,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ru(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new P(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ru(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tV(n,e,t,i){(t||$l(n))&&Sc(n,e,t&&!i?0:1)}let sV=(()=>{class n{constructor(){this.zone=R(fe),this.changeDetectionScheduler=R(ws),this.applicationRef=R(Wn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fg({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new fe({...pg(),scheduleInRootZone:t}),[{provide:fe,useFactory:n},{provide:Mn,multi:!0,useFactory:()=>{const i=R(sV,{optional:!0});return()=>i.initialize()}},{provide:Mn,multi:!0,useFactory:()=>{const i=R(aV);return()=>{i.initialize()}}},!0===e?{provide:iw,useValue:!0}:[],{provide:lp,useValue:t??z_}]}function pg(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let aV=(()=>{class n{constructor(){this.subscription=new Wt,this.initialized=!1,this.zone=R(fe),this.pendingTasks=R(Pi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ia=(()=>{class n{constructor(){this.appRef=R(Wn),this.taskService=R(Pi),this.ngZone=R(fe),this.zonelessEnabled=R(oa),this.disableScheduling=R(iw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Wt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(lp,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ef||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?G_:W_;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,G_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Bi=new O("",{providedIn:"root",factory:()=>R(Bi,oe.Optional|oe.SkipSelf)||function lV(){return typeof $localize<"u"&&$localize.locale||Xc}()}),mg=new O("");function ou(n){return!!n.platformInjector}let Vi=null;let vg=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=vV}return n})();function vV(n){return function _V(n,e,t){if(cr(n)&&!t){const i=Yt(n.index,e);return new Qo(i,i)}return 175&n.type?new Qo(e[xe],e):null}(_e(),D(),!(16&~n))}function UV(n){try{const{rootComponent:e,appProviders:t,platformProviders:i}=n,r=function yV(n=[]){if(Vi)return Vi;const e=function W0(n=[],e){return ft.create({name:e,providers:[{provide:vh,useValue:"platform"},{provide:mg,useValue:new Set([()=>Vi=null])},...n]})}(n);return Vi=e,function k0(){!function QM(n){Fy=n}(()=>{throw new P(600,!1)})}(),function G0(n){n.get(yb,null)?.forEach(t=>t())}(e),e}(i),s=[fg({}),{provide:ws,useExisting:Ia},...t||[]];return function U0(n){const e=ou(n)?n.r3Injector:n.moduleRef.injector,t=e.get(fe);return t.run(()=>{ou(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const i=e.get(Fn,null);let r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),ou(n)){const s=()=>e.destroy(),o=n.platformInjector.get(mg);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{ru(n.allPlatformModules,n.moduleRef),r.unsubscribe()});return function eV(n,e,t){try{const i=t();return dg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(i,t,()=>{const s=e.get(O0);return s.runInitializers(),s.donePromise.then(()=>{if(function A2(n){"string"==typeof n&&(QA=n.toLowerCase().replace(/_/g,"-"))}(e.get(Bi,Xc)||Xc),ou(n)){const a=e.get(Wn);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function pV(n,e){const t=n.injector.get(Wn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new P(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new $w({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}const vD=new O("");let MD=null;function Ig(){return MD}class gH{}const ui=new O("");function jD(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let PU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=Kr({})}return n})();function GD(n){return"server"===n}class qD{}class a$ extends gH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Wg extends a${static makeCurrent(){!function pH(n){MD??=n}(new Wg)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function l$(){return Oa=Oa||document.querySelector("base"),Oa?Oa.getAttribute("href"):null}();return null==t?null:function c$(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jD(document.cookie,e)}}let Oa=null,d$=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();const xu=new O("");let iS=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new P(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(J(xu),J(fe))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();class Gg{constructor(e){this._doc=e}}const qg="ng-app-id";let rS=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=GD(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${qg}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(qg),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(qg,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(J(ui),J(jo),J(vb,8),J(Ni))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();const Xg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yg=/%COMP%/g,g$=new O("",{providedIn:"root",factory:()=>!0});function oS(n,e){return e.map(t=>t.replace(Yg,n))}let aS=(()=>{class n{constructor(t,i,r,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=GD(a),this.defaultRenderer=new Kg(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===gn.ShadowDom&&(i={...i,encapsulation:gn.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof cS?r.applyToHost(t):r instanceof Zg&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case gn.Emulated:s=new cS(l,c,i,this.appId,u,o,a,d);break;case gn.ShadowDom:return new _$(l,c,t,i,o,a,this.nonce,d);default:s=new Zg(l,c,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(J(iS),J(rS),J(jo),J(g$),J(ui),J(Ni),J(fe),J(vb))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();class Kg{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Xg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lS(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(lS(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new P(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Xg[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Xg[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ki.DashCase|ki.Important)?e.style.setProperty(t,i,r&ki.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Ig().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function lS(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _$ extends Kg{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=oS(r.id,r.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zg extends Kg{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?oS(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class cS extends Zg{constructor(e,t,i,r,s,o,a,l){const c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=function m$(n){return"_ngcontent-%COMP%".replace(Yg,n)}(c),this.hostAttr=function y$(n){return"_nghost-%COMP%".replace(Yg,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let b$=(()=>{class n extends Gg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(J(ui))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),E$=(()=>{class n extends Gg{constructor(t){super(t),this.delegate=R(vD,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,i,r){return this.delegate.addEventListener(t,i,r)}removeEventListener(t,i,r){return this.delegate.removeEventListener(t,i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(J(ui))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();const uS=["alt","control","meta","shift"],w$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},A$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};const M$=[{provide:Ni,useValue:"browser"},{provide:yb,useValue:function S$(){Wg.makeCurrent()},multi:!0},{provide:ui,useFactory:function T$(){return function qN(n){lf=n}(document),document},deps:[]}],P$=[{provide:vh,useValue:"root"},{provide:Fn,useFactory:function I$(){return new Fn},deps:[]},{provide:xu,useClass:b$,multi:!0,deps:[ui,fe,Ni]},{provide:xu,useClass:(()=>{class n extends Gg{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ig().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),uS.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=w$[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),uS.forEach(o=>{o!==r&&(0,A$[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(J(ui))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),multi:!0,deps:[ui]},{provide:xu,useClass:E$,multi:!0},aS,rS,iS,{provide:cp,useExisting:aS},{provide:qD,useClass:d$,deps:[]},[]],Qg={now:()=>(Qg.delegate||Date).now(),delegate:void 0};class k$ extends ir{constructor(e=1/0,t=1/0,i=Qg){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function Hi(n){return this instanceof Hi?(this.v=n,this):new Hi(n)}function yS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function nm(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const im=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function vS(n){return Ee(n?.then)}function _S(n){return Ee(n[jd])}function bS(n){return Symbol.asyncIterator&&Ee(n?.[Symbol.asyncIterator])}function ES(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wS=function iz(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function AS(n){return Ee(n?.[wS])}function CS(n){return function mS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(f){return function(p){return Promise.resolve(p).then(f,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(f,p){i[f]&&(r[f]=function(g){return new Promise(function(y,m){s.push([f,g,y,m])>1||l(f,g)})},p&&(r[f]=p(r[f])))}function l(f,p){try{!function c(f){f.value instanceof Hi?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}(i[f](p))}catch(g){h(s[0][3],g)}}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Hi(t.read());if(r)return yield Hi(void 0);yield yield Hi(i)}}finally{t.releaseLock()}})}function DS(n){return Ee(n?.getReader)}function fi(n){if(n instanceof Dt)return n;if(null!=n){if(_S(n))return function rz(n){return new Dt(e=>{const t=n[jd]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(im(n))return function sz(n){return new Dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(vS(n))return function oz(n){return new Dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zy)})}(n);if(bS(n))return SS(n);if(AS(n))return function az(n){return new Dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(DS(n))return function lz(n){return SS(CS(n))}(n)}throw ES(n)}function SS(n){return new Dt(e=>{(function cz(n,e){var t,i,r,s;return function pS(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=yS(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ui(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function ka(n,e,t=1/0){return Ee(e)?ka((i,r)=>Di((s,o)=>e(i,s,r,o))(fi(n(i,r))),t):("number"==typeof e&&(t=e),Kn((i,r)=>function uz(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let y=!1;fi(t(g,u++)).subscribe(Zn(e,m=>{r?.(m),s?f(m):e.next(m)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){const m=l.shift();o?Ui(e,o,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(Zn(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}const IS=new Dt(n=>n.complete());function rm(n){return n[n.length-1]}function TS(n){return function fz(n){return n&&Ee(n.schedule)}(rm(n))?n.pop():void 0}function MS(n,e=0){return Kn((t,i)=>{t.subscribe(Zn(i,r=>Ui(i,n,()=>i.next(r),e),()=>Ui(i,n,()=>i.complete(),e),r=>Ui(i,n,()=>i.error(r),e)))})}function xS(n,e=0){return Kn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function PS(n,e){if(!n)throw new Error("Iterable cannot be null");return new Dt(t=>{Ui(t,e,()=>{const i=n[Symbol.asyncIterator]();Ui(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function La(n,e){return e?function bz(n,e){if(null!=n){if(_S(n))return function gz(n,e){return fi(n).pipe(xS(e),MS(e))}(n,e);if(im(n))return function yz(n,e){return new Dt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(vS(n))return function mz(n,e){return fi(n).pipe(xS(e),MS(e))}(n,e);if(bS(n))return PS(n,e);if(AS(n))return function vz(n,e){return new Dt(t=>{let i;return Ui(t,e,()=>{i=n[wS](),Ui(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Ee(i?.return)&&i.return()})}(n,e);if(DS(n))return function _z(n,e){return PS(CS(n),e)}(n,e)}throw ES(n)}(n,e):fi(n)}function RS(n,e){return Kn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Zn(i,l=>{r?.unsubscribe();let c=0;const u=s++;fi(n(l,u)).subscribe(r=Zn(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const Ru={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return Ru.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return Ru.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let sm;function xz(n,e,t){let i=t;return function Az(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function Dz(n,e){if(!sm){const t=Element.prototype;sm=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&sm.call(n,e)}(n,r)||(i=s,0))),i}class Rz{constructor(e,t){this.componentFactory=t.get(As).resolveComponentFactory(e)}create(e){return new Nz(this.componentFactory,e)}}class Nz{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new k$(1),this.events=this.eventEmitters.pipe(RS(i=>function Ez(...n){const e=TS(n),t=function pz(n,e){return"number"==typeof rm(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?fi(i[0]):function dz(n=1/0){return ka(Wy,n)}(t)(La(i,e)):IS}(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(fe),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Ru.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function Sz(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=ft.create({providers:[],parent:this.injector}),i=function Mz(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],l=xz(a,e,r);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(vg),this.implementsOnChanges=function Cz(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Wn).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Di(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Ru.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Qv(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Oz extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function NS(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function x(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){NS(s,i,r,o,a,"next",l)}function a(l){NS(s,i,r,o,a,"throw",l)}o(void 0)})}}function OS(...n){return La(n,TS(n))}function kS(n,e){return Kn((t,i)=>{let r=0;t.subscribe(Zn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function LS(n){return Kn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Nu{}class Ou{}class hn{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof hn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new hn;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof hn?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Fz{encodeKey(e){return FS(e)}encodeValue(e){return FS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Bz=/%(\d[a-f0-9])/gi,Vz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FS(n){return encodeURIComponent(n).replace(Bz,(e,t)=>Vz[t]??e)}function ku(n){return`${n}`}class $i{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Fz,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jz(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(ku):[ku(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $i({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ku(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(ku(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Hz{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function jS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BS(n){return typeof Blob<"u"&&n instanceof Blob}function VS(n){return typeof FormData<"u"&&n instanceof FormData}class Fa{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Uz(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new hn,this.context??=new Hz,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new $i,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||jS(this.body)||BS(this.body)||VS(this.body)||function $z(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof $i?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VS(this.body)?null:BS(this.body)?this.body.type||null:jS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $i?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Fa(t,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}}var zi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(zi||{});class om{constructor(e,t=200,i="OK"){this.headers=e.headers||new hn,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Lu extends om{constructor(e={}){super(e),this.type=zi.ResponseHeader}clone(e={}){return new Lu({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Pr extends om{constructor(e={}){super(e),this.type=zi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Pr({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xs extends om{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function am(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let US=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Fa)s=t;else{let l,c;l=r.headers instanceof hn?r.headers:new hn(r.headers),r.params&&(c=r.params instanceof $i?r.params:new $i({fromObject:r.params})),s=new Fa(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=OS(s).pipe(function Lz(n,e){return Ee(e)?ka(n,e,1):ka(n,1)}(l=>this.handler.handle(l)));if(t instanceof Fa||"events"===r.observe)return o;const a=o.pipe(kS(l=>l instanceof Pr));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Di(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Di(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Di(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Di(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new $i).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,am(r,i))}post(t,i,r={}){return this.request("POST",t,am(r,i))}put(t,i,r={}){return this.request("PUT",t,am(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(J(Nu))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();const Gz=/^\)\]\}',?\n/;function $S(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let lm=(()=>{class n{constructor(){this.fetchImpl=R(Xz,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=R(fe)}handle(t){return new Dt(i=>{const r=new AbortController;return this.doRequest(t,r.signal,i).then(cm,s=>i.error(new Xs({error:s}))),()=>r.abort()})}doRequest(t,i,r){var s=this;return x(function*(){const o=s.createRequestInit(t);let a;try{const p=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:i,...o}));(function Yz(n){n.then(cm,cm)})(p),r.next({type:zi.Sent}),a=yield p}catch(p){return void r.error(new Xs({error:p,status:p.status??0,statusText:p.statusText,url:t.urlWithParams,headers:p.headers}))}const l=new hn(a.headers),c=a.statusText,u=$S(a)??t.urlWithParams;let d=a.status,h=null;if(t.reportProgress&&r.next(new Lu({headers:l,status:d,statusText:c,url:u})),a.body){const p=a.headers.get("content-length"),g=[],y=a.body.getReader();let v,_,m=0;const b=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular(x(function*(){for(;;){const{done:w,value:C}=yield y.read();if(w)break;if(g.push(C),m+=C.length,t.reportProgress){_="text"===t.responseType?(_??"")+(v??=new TextDecoder).decode(C,{stream:!0}):void 0;const I=()=>r.next({type:zi.DownloadProgress,total:p?+p:void 0,loaded:m,partialText:_});b?b.run(I):I()}}}));const E=s.concatChunks(g,m);try{const w=a.headers.get("Content-Type")??"";h=s.parseBody(t,E,w)}catch(w){return void r.error(new Xs({error:w,headers:new hn(a.headers),status:a.status,statusText:a.statusText,url:$S(a)??t.urlWithParams}))}}0===d&&(d=h?200:0),d>=200&&d<300?(r.next(new Pr({body:h,headers:l,status:d,statusText:c,url:u})),r.complete()):r.error(new Xs({error:h,headers:l,status:d,statusText:c,url:u}))})()}parseBody(t,i,r){switch(t.responseType){case"json":const s=(new TextDecoder).decode(i).replace(Gz,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){const i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>i[s]=o.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){const r=new Uint8Array(i);let s=0;for(const o of t)r.set(o,s),s+=o.length;return r}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();class Xz{}function cm(){}function zS(n,e){return e(n)}function Kz(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const Qz=new O(""),ja=new O(""),WS=new O(""),GS=new O("",{providedIn:"root",factory:()=>!0});function Jz(){let n=null;return(e,t)=>{null===n&&(n=(R(Qz,{optional:!0})??[]).reduceRight(Kz,zS));const i=R(Pi);if(R(GS)){const s=i.add();return n(e,t).pipe(LS(()=>i.remove(s)))}return n(e,t)}}let qS=(()=>{class n extends Nu{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=R(Pi),this.contributeToStability=R(GS)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(ja),...this.injector.get(WS,[])]));this.chain=i.reduceRight((r,s)=>function Zz(n,e,t){return(i,r)=>function uR(n,e){n instanceof es&&n.assertNotDestroyed();const i=Ti(n),r=Lt(void 0);try{return e()}finally{Ti(i),Lt(r)}}(t,()=>e(i,s=>n(s,r)))}(r,s,this.injector),zS)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(LS(()=>this.pendingTasks.remove(i)))}return this.chain(t,i=>this.backend.handle(i))}static#e=this.\u0275fac=function(i){return new(i||n)(J(Ou),J(on))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();const r3=/^\)\]\}',?\n/;let YS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new P(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?La(i.\u0275loadImpl()):OS(null)).pipe(RS(()=>new Dt(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((g,y)=>o.setRequestHeader(g,y.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const g=o.statusText||"OK",y=new hn(o.getAllResponseHeaders()),m=function s3(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new Lu({headers:y,status:o.status,statusText:g,url:m}),l},u=()=>{let{headers:g,status:y,statusText:m,url:v}=c(),_=null;204!==y&&(_=typeof o.response>"u"?o.responseText:o.response),0===y&&(y=_?200:0);let b=y>=200&&y<300;if("json"===t.responseType&&"string"==typeof _){const E=_;_=_.replace(r3,"");try{_=""!==_?JSON.parse(_):null}catch(w){_=E,b&&(b=!1,_={error:w,text:_})}}b?(s.next(new Pr({body:_,headers:g,status:y,statusText:m,url:v||void 0})),s.complete()):s.error(new Xs({error:_,headers:g,status:y,statusText:m,url:v||void 0}))},d=g=>{const{url:y}=c(),m=new Xs({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:y||void 0});s.error(m)};let h=!1;const f=g=>{h||(s.next(c()),h=!0);let y={type:zi.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),"text"===t.responseType&&o.responseText&&(y.partialText=o.responseText),s.next(y)},p=g=>{let y={type:zi.UploadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),s.next(y)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),s.next({type:zi.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(J(qD))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();const um=new O(""),KS=new O("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ZS=new O("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class QS{}let l3=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=jD(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(J(ui),J(Ni),J(KS))};static#t=this.\u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function c3(n,e){const t=n.url.toLowerCase();if(!R(um)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=R(QS).getToken(),r=R(ZS);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Wi=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Wi||{});function u3(...n){const e=[US,YS,qS,{provide:Nu,useExisting:qS},{provide:Ou,useFactory:()=>R(lm,{optional:!0})??R(YS)},{provide:ja,useValue:c3,multi:!0},{provide:um,useValue:!0},{provide:QS,useClass:l3}];for(const t of n)e.push(...t.\u0275providers);return function Eo(n){return{\u0275providers:n}}(e)}const JS=new O("");function d3(){return function Rr(n,e){return{\u0275kind:n,\u0275providers:e}}(Wi.LegacyInterceptors,[{provide:JS,useFactory:Jz},{provide:ja,useExisting:JS,multi:!0}])}let h3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=Kr({providers:[u3(d3())]})}return n})(),dm=(()=>{class n{httpClient;constructor(t){this.httpClient=t}serviceUrl="http://localhost:8000";registerUser(t,i){return this.httpClient.post(`${this.serviceUrl}/register`,{hostname:i,username:t.username,business_name:t.business_name,business_address:t.business_address,business_phone:t.business_phone,business_email:t.business_email})}static \u0275fac=function(i){return new(i||n)(J(US))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const C3=n=>{if(typeof window>"u")return;const e=function dI(){const n=function A3(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0}();if(n.__xstate__)return n.__xstate__}();e&&e.register(n)};class hI{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current)return this._last.next=t,void(this._last=t);this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const fI=".",D3="",gI="xstate.init",hm="xstate.stop";function fm(n,e){return{type:`xstate.done.state.${n}`,output:e}}function mI(n){return{type:gI,input:n}}function pi(n){setTimeout(()=>{throw n})}const P3="function"==typeof Symbol&&Symbol.observable||"@@observable";function yI(n,e){const t=vI(n),i=vI(e);return"string"==typeof i?"string"==typeof t&&i===t:"string"==typeof t?t in i:Object.keys(t).every(r=>r in i&&yI(t[r],i[r]))}function pm(n){if(EI(n))return n;let e=[],t="";for(let i=0;i<n.length;i++){switch(n.charCodeAt(i)){case 92:t+=n[i+1],i++;continue;case 46:e.push(t),t="";continue}t+=n[i]}return e.push(t),e}function vI(n){return function pW(n){return!!n&&"object"==typeof n&&"machine"in n&&"value"in n}(n)?n.value:"string"!=typeof n?n:function R3(n){if(1===n.length)return n[0];const e={};let t=e;for(let i=0;i<n.length-1;i++)if(i===n.length-2)t[n[i]]=n[i+1];else{const r=t;t={},r[n[i]]=t}return e}(pm(n))}function _I(n,e){const t={},i=Object.keys(n);for(let r=0;r<i.length;r++){const s=i[r];t[s]=e(n[s],s,n,r)}return t}function bI(n){return EI(n)?n:[n]}function Gi(n){return void 0===n?[]:bI(n)}function gm(n,e,t,i){return"function"==typeof n?n({context:e,event:t,self:i}):n}function EI(n){return Array.isArray(n)}function Ys(n){return bI(n).map(e=>typeof e>"u"||"string"==typeof e?{target:e}:e)}function wI(n){if(void 0!==n&&n!==D3)return Gi(n)}function mm(n,e,t){const i="object"==typeof n,r=i?n:void 0;return{next:(i?n.next:n)?.bind(r),error:(i?n.error:e)?.bind(r),complete:(i?n.complete:t)?.bind(r)}}function AI(n,e){return`${e}.${n}`}function ym(n,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return n.implementations.actors[e];const[,i,r]=t,o=n.getStateNodeById(r).config.invoke;return(Array.isArray(o)?o[i]:o).src}function CI(n,e){return`${n.sessionId}.${e}`}let O3=0;let Nt=function(n){return n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped",n}({});const L3={clock:{setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n)},logger:console.log.bind(console),devTools:!1};class F3{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new hI(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Nt.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...L3,...t},{clock:r,logger:s,parent:o,syncSnapshot:a,id:l,systemId:c,inspect:u}=i;this.system=o?o.system:function k3(n,e){const t=new Map,i=new Map,r=new WeakMap,s=new Set,o={},{clock:a,logger:l}=e,c={schedule:(h,f,p,g,y=Math.random().toString(36).slice(2))=>{const m={source:h,target:f,event:p,delay:g,id:y,startedAt:Date.now()},v=CI(h,y);d._snapshot._scheduledEvents[v]=m;const _=a.setTimeout(()=>{delete o[v],delete d._snapshot._scheduledEvents[v],d._relay(h,f,p)},g);o[v]=_},cancel:(h,f)=>{const p=CI(h,f),g=o[p];delete o[p],delete d._snapshot._scheduledEvents[p],void 0!==g&&a.clearTimeout(g)},cancelAll:h=>{for(const f in d._snapshot._scheduledEvents){const p=d._snapshot._scheduledEvents[f];p.source===h&&c.cancel(h,p.id)}}},d={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>"x:"+O3++,_register:(h,f)=>(t.set(h,f),h),_unregister:h=>{t.delete(h.sessionId);const f=r.get(h);void 0!==f&&(i.delete(f),r.delete(h))},get:h=>i.get(h),_set:(h,f)=>{const p=i.get(h);if(p&&p!==f)throw new Error(`Actor with system ID '${h}' already exists.`);i.set(h,f),r.set(f,h)},inspect:h=>{const f=mm(h);return s.add(f),{unsubscribe(){s.delete(f)}}},_sendInspectionEvent:h=>{if(!s.size)return;const f={...h,rootId:n.sessionId};s.forEach(p=>p.next?.(f))},_relay:(h,f,p)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:f,event:p}),f._send(p)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const f in h){const{source:p,target:g,event:y,delay:m,id:v}=h[f];c.schedule(p,g,y,m,v)}},_clock:a,_logger:l};return d}(this,{clock:r,logger:s}),u&&!o&&this.system.inspect(mm(u)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=t?.logger??this.system._logger,this.clock=t?.clock??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=i,this.src=i.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),f=this.eventListeners.get("*");if(!h&&!f)return;const p=new Set([...h?h.values():[],...f?f.values():[]]);for(const g of Array.from(p))g(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState(t?.snapshot??t?.state),c&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(e,t){let i;for(this._snapshot=e;i=this._deferred.shift();)try{i()}catch(r){this._deferred.length=0,this._snapshot={...e,status:"error",error:r}}switch(this._snapshot.status){case"active":for(const r of this.observers)try{r.next?.(e)}catch(s){pi(s)}break;case"done":for(const r of this.observers)try{r.next?.(e)}catch(s){pi(s)}this._stopProcedure(),this._complete(),this._doneEvent=function M3(n,e){return{type:`xstate.done.actor.${n}`,output:e,actorId:n}}(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,i){const r=mm(e,t,i);if(this._processingStatus!==Nt.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(s){pi(s)}break;case"error":{const s=this._snapshot.error;if(r.error)try{r.error(s)}catch(o){pi(o)}else pi(s);break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(e,t){let i=this.eventListeners.get(e);i||(i=new Set,this.eventListeners.set(e,i));const r=t.bind(void 0);return i.add(r),{unsubscribe:()=>{i.delete(r)}}}start(){if(this._processingStatus===Nt.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{"active"===i.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Nt.Running;const e=mI(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,i;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(r){i={err:r}}if(i){const{err:r}=i;return this._snapshot={...this._snapshot,status:"error",error:r},void this._error(r)}this.update(t,e),e.type===hm&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Nt.Stopped?this:(this.mailbox.clear(),this._processingStatus===Nt.NotStarted?(this._processingStatus=Nt.Stopped,this):(this.mailbox.enqueue({type:hm}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(t){pi(t)}this.observers.clear()}_reportError(e){if(!this.observers.size)return void(this._parent||pi(e));let t=!1;for(const i of this.observers){const r=i.error;t||=!r;try{r?.(e)}catch(s){pi(s)}}this.observers.clear(),t&&pi(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,function x3(n,e){return{type:`xstate.error.actor.${n}`,error:e,actorId:n}}(this.id,e))}_stopProcedure(){return this._processingStatus!==Nt.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new hI(this._process.bind(this)),this._processingStatus=Nt.Stopped,this.system._unregister(this)),this}_send(e){this._processingStatus!==Nt.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&("function"==typeof e?e:C3)(this)}toJSON(){return{xstate$$type:1,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[P3](){return this}getSnapshot(){return this._snapshot}}function Ba(n,...[e]){return new F3(n,e)}function j3(n,e,t,i,{sendId:r}){return[e,"function"==typeof r?r(t,i):r]}function B3(n,e){n.defer(()=>{n.system.scheduler.cancel(n.self,e)})}function H3(n,e,t,i,{id:r,systemId:s,src:o,input:a,syncSnapshot:l}){const c="string"==typeof o?ym(e.machine,o):o,u="function"==typeof r?r(t):r;let d;return c&&(d=Ba(c,{id:u,src:o,parent:n.self,syncSnapshot:l,systemId:s,input:"function"==typeof a?a({context:e.context,event:t.event,self:n.self}):a})),[kr(e,{children:{...e.children,[u]:d}}),{id:r,actorRef:d}]}function U3(n,{actorRef:t}){t&&n.defer(()=>{t._processingStatus!==Nt.Stopped&&t.start()})}function $3(...[n,{id:e,systemId:t,input:i,syncSnapshot:r=!1}={}]){function s(o,a){}return s.type="snapshot.spawnChild",s.id=e,s.systemId=t,s.src=n,s.input=i,s.syncSnapshot=r,s.resolve=H3,s.execute=U3,s}function z3(n,e,t,i,{actorRef:r}){const s="function"==typeof r?r(t,i):r,o="string"==typeof s?e.children[s]:s;let a=e.children;return o&&(a={...a},delete a[o.id]),[kr(e,{children:a}),o]}function W3(n,e){if(e){if(n.system._unregister(e),e._processingStatus!==Nt.Running)return void n.stopChild(e);n.defer(()=>{n.stopChild(e)})}}function DI(n){function e(t,i){}return e.type="xstate.stopChild",e.actorRef=n,e.resolve=z3,e.execute=W3,e}function Ks(n,e,t,i){const{machine:r}=i,s="function"==typeof n,o=s?n:r.implementations.guards["string"==typeof n?n:n.type];if(!s&&!o)throw new Error(`Guard '${"string"==typeof n?n:n.type}' is not implemented.'.`);if("function"!=typeof o)return Ks(o,e,t,i);const a={context:e,event:t},l=s||"string"==typeof n?void 0:"params"in n?"function"==typeof n.params?n.params({context:e,event:t}):n.params:void 0;return"check"in o?o.check(i,a,o):o(a,l)}const _m=n=>"atomic"===n.type||"final"===n.type;function Zs(n){return Object.values(n.states).filter(e=>"history"!==e.type)}function Va(n,e){const t=[];if(e===n)return t;let i=n.parent;for(;i&&i!==e;)t.push(i),i=i.parent;return t}function Hu(n){const e=new Set(n),t=II(e);for(const i of e)if("compound"!==i.type||t.get(i)&&t.get(i).length){if("parallel"===i.type)for(const r of Zs(i))if("history"!==r.type&&!e.has(r)){const s=xI(r);for(const o of s)e.add(o)}}else xI(i).forEach(r=>e.add(r));for(const i of e){let r=i.parent;for(;r;)e.add(r),r=r.parent}return e}function SI(n,e){const t=e.get(n);if(!t)return{};if("compound"===n.type){const r=t[0];if(!r)return{};if(_m(r))return r.key}const i={};for(const r of t)i[r.key]=SI(r,e);return i}function II(n){const e=new Map;for(const t of n)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function TI(n,e){return SI(n,II(Hu(e)))}function bm(n,e){return"compound"===e.type?Zs(e).some(t=>"final"===t.type&&n.has(t)):"parallel"===e.type?Zs(e).every(t=>bm(n,t)):"final"===e.type}const Ha=n=>"#"===n[0];function Z3(n){const e=n.config.after;if(!e)return[];return Object.keys(e).flatMap((r,s)=>{const o=e[r],a="string"==typeof o?{target:o}:o,l=Number.isNaN(+r)?r:+r,c=(r=>{const o=function T3(n,e){return{type:`xstate.after.${n}.${e}`}}(r,n.id),a=o.type;return n.entry.push(function AW(n,e){function t(i,r){}return t.type="xstate.raise",t.event=n,t.id=e?.id,t.delay=e?.delay,t.resolve=EW,t.execute=wW,t}(o,{id:a,delay:r})),n.exit.push(function V3(n){function e(t,i){}return e.type="xstate.cancel",e.sendId=n,e.resolve=j3,e.execute=B3,e}(a)),a})(l);return Gi(a).map(u=>({...u,event:c,delay:l}))}).map(r=>{const{delay:s}=r;return{...Nr(n,r.event,r),delay:s}})}function Nr(n,e,t){const i=wI(t.target),r=t.reenter??!1,s=function eW(n,e){if(void 0!==e)return e.map(t=>{if("string"!=typeof t)return t;if(Ha(t))return n.machine.getStateNodeById(t);const i=t[0]===fI;if(i&&!n.parent)return Uu(n,t.slice(1));const r=i?n.key+t:t;if(!n.parent)throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`);try{return Uu(n.parent,r)}catch(s){throw new Error(`Invalid transition definition for state node '${n.id}':\n${s.message}`)}})}(n,i),o={...t,actions:Gi(t.actions),guard:t.guard,target:s,source:n,reenter:r,eventType:e,toJSON:()=>({...o,source:`#${n.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function MI(n){const e=wI(n.config.target);return e?{target:e.map(t=>"string"==typeof t?Uu(n.parent,t):t)}:n.parent.initial}function Or(n){return"history"===n.type}function xI(n){const e=PI(n);for(const t of e)for(const i of Va(t,n))e.add(i);return e}function PI(n){const e=new Set;return function t(i){if(!e.has(i))if(e.add(i),"compound"===i.type)t(i.initial.target[0]);else if("parallel"===i.type)for(const r of Zs(i))t(r)}(n),e}function Qs(n,e){if(Ha(e))return n.machine.getStateNodeById(e);if(!n.states)throw new Error(`Unable to retrieve child state '${e}' from '${n.id}'; no child states exist.`);const t=n.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${n.id}'`);return t}function Uu(n,e){if("string"==typeof e&&Ha(e))try{return n.machine.getStateNodeById(e)}catch{}const t=pm(e).slice();let i=n;for(;t.length;){const r=t.shift();if(!r.length)break;i=Qs(i,r)}return i}function $u(n,e){if("string"==typeof e){const r=n.states[e];if(!r)throw new Error(`State '${e}' does not exist on '${n.id}'`);return[n,r]}const t=Object.keys(e),i=t.map(r=>Qs(n,r)).filter(Boolean);return[n.machine.root,n].concat(i,t.reduce((r,s)=>{const o=Qs(n,s);if(!o)return r;const a=$u(o,e[s]);return r.concat(a)},[]))}function Em(n,e,t,i){return"string"==typeof e?function tW(n,e,t,i){const s=Qs(n,e).next(t,i);return s&&s.length?s:n.next(t,i)}(n,e,t,i):1===Object.keys(e).length?function nW(n,e,t,i){const r=Object.keys(e),o=Em(Qs(n,r[0]),e[r[0]],t,i);return o&&o.length?o:n.next(t,i)}(n,e,t,i):function iW(n,e,t,i){const r=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const l=Em(Qs(n,s),o,t,i);l&&r.push(...l)}return r.length?r:n.next(t,i)}(n,e,t,i)}function rW(n){return Object.keys(n.states).map(e=>n.states[e]).filter(e=>"history"===e.type)}function qi(n,e){let t=n;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function sW(n,e){const t=new Set(n),i=new Set(e);for(const r of t)if(i.has(r))return!0;for(const r of i)if(t.has(r))return!0;return!1}function RI(n,e,t){const i=new Set;for(const r of n){let s=!1;const o=new Set;for(const a of i)if(sW(Am([r],e,t),Am([a],e,t))){if(!qi(r.source,a.source)){s=!0;break}o.add(a)}if(!s){for(const a of o)i.delete(a);i.add(r)}}return Array.from(i)}function wm(n,e){if(!n.target)return[];const t=new Set;for(const i of n.target)if(Or(i))if(e[i.id])for(const r of e[i.id])t.add(r);else for(const r of wm(MI(i),e))t.add(r);else t.add(i);return[...t]}function NI(n,e){const t=wm(n,e);if(!t)return;if(!n.reenter&&t.every(r=>r===n.source||qi(r,n.source)))return n.source;const i=function oW(n){const[e,...t]=n;for(const i of Va(e,void 0))if(t.every(r=>qi(r,i)))return i}(t.concat(n.source));return i||(n.reenter?void 0:n.source.machine.root)}function Am(n,e,t){const i=new Set;for(const r of n)if(r.target?.length){const s=NI(r,t);r.reenter&&r.source===s&&i.add(s);for(const o of e)qi(o,s)&&i.add(o)}return[...i]}function Cm(n,e,t,i,r,s){if(!n.length)return e;const o=new Set(e._nodes);let a=e.historyValue;const l=RI(n,o,a);let c=e;r||([c,a]=function dW(n,e,t,i,r,s,o){let a=n;const l=Am(i,r,s);let c;l.sort((u,d)=>d.order-u.order);for(const u of l)for(const d of rW(u)){let h;h="deep"===d.history?f=>_m(f)&&qi(f,u):f=>f.parent===u,c??={...s},c[d.id]=Array.from(r).filter(h)}for(const u of l)a=eo(a,e,t,[...u.exit,...u.invoke.map(d=>DI(d.id))],o),r.delete(u);return[a,c||s]}(c,i,t,l,o,a,s)),c=eo(c,i,t,l.flatMap(d=>d.actions),s),c=function cW(n,e,t,i,r,s,o,a){let l=n;const c=new Set,u=new Set;(function uW(n,e,t,i){for(const r of n){const s=NI(r,e);for(const a of r.target||[])!Or(a)&&(r.source!==a||r.source!==s||r.reenter)&&(i.add(a),t.add(a)),Js(a,e,t,i);const o=wm(r,e);for(const a of o){const l=Va(a,s);"parallel"===s?.type&&l.push(s),OI(i,e,t,l,!r.source.parent&&r.reenter?void 0:s)}}})(i,o,u,c),a&&u.add(n.machine.root);const d=new Set;for(const h of[...c].sort((f,p)=>f.order-p.order)){r.add(h);const f=[];f.push(...h.entry);for(const p of h.invoke)f.push($3(p.src,{...p,syncSnapshot:!!p.onSnapshot}));if(u.has(h)&&f.push(...h.initial.actions),l=eo(l,e,t,f,s,h.invoke.map(p=>p.id)),"final"===h.type){const p=h.parent;let g="parallel"===p?.type?p:p?.parent,y=g||h;for("compound"===p?.type&&s.push(fm(p.id,void 0!==h.output?gm(h.output,l.context,e,t.self):void 0));"parallel"===g?.type&&!d.has(g)&&bm(r,g);)d.add(g),s.push(fm(g.id)),y=g,g=g.parent;if(g)continue;l=kr(l,{status:"done",output:lW(l,e,t,l.machine.root,y)})}}return l}(c,i,t,l,o,s,a,r);const u=[...o];"done"===c.status&&(c=eo(c,i,t,u.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),s));try{return a===e.historyValue&&function aW(n,e){if(n.length!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}(e._nodes,o)?c:kr(c,{_nodes:u,historyValue:a})}catch(d){throw d}}function lW(n,e,t,i,r){if(void 0===i.output)return;const s=fm(r.id,void 0!==r.output&&r.parent?gm(r.output,n.context,e,t.self):void 0);return gm(i.output,n.context,s,t.self)}function Js(n,e,t,i){if(Or(n))if(e[n.id]){const r=e[n.id];for(const s of r)i.add(s),Js(s,e,t,i);for(const s of r)Dm(s,n.parent,i,e,t)}else{const r=MI(n);for(const s of r.target)i.add(s),r===n.parent?.initial&&t.add(n.parent),Js(s,e,t,i);for(const s of r.target)Dm(s,n.parent,i,e,t)}else if("compound"===n.type){const[r]=n.initial.target;Or(r)||(i.add(r),t.add(r)),Js(r,e,t,i),Dm(r,n,i,e,t)}else if("parallel"===n.type)for(const r of Zs(n).filter(s=>!Or(s)))[...i].some(s=>qi(s,r))||(Or(r)||(i.add(r),t.add(r)),Js(r,e,t,i))}function OI(n,e,t,i,r){for(const s of i)if((!r||qi(s,r))&&n.add(s),"parallel"===s.type)for(const o of Zs(s).filter(a=>!Or(a)))[...n].some(a=>qi(a,o))||(n.add(o),Js(o,e,t,n))}function Dm(n,e,t,i,r){OI(t,i,r,Va(n,e))}let kI=!1;function LI(n,e,t,i,r,s){const{machine:o}=n;let a=n;for(const l of i){let f=function(){t.system._sendInspectionEvent({type:"@xstate.action",actorRef:t.self,action:{type:"string"==typeof l?l:"object"==typeof l?l.type:l.name||"(anonymous)",params:h}});try{kI=u,u(d,h)}finally{kI=!1}};const c="function"==typeof l,u=c?l:o.implementations.actions["string"==typeof l?l:l.type];if(!u)continue;const d={context:a.context,event:e,self:t.self,system:t.system},h=c||"string"==typeof l?void 0:"params"in l?"function"==typeof l.params?l.params({context:a.context,event:e}):l.params:void 0;if(!("resolve"in u)){t.self._processingStatus===Nt.Running?f():t.defer(()=>{f()});continue}const p=u,[g,y,m]=p.resolve(t,a,d,h,u,r);a=g,"retryResolve"in p&&s?.push([p,y]),"execute"in p&&(t.self._processingStatus===Nt.Running?p.execute(t,y):t.defer(p.execute.bind(null,t,y))),m&&(a=LI(a,e,t,m,r,s))}return a}function eo(n,e,t,i,r,s){const o=s?[]:void 0,a=LI(n,e,t,i,{internalQueue:r,deferredActorIds:s},o);return o?.forEach(([l,c])=>{l.retryResolve(t,a,c)}),a}function Sm(n,e,t,i=[]){let r=n;const s=[];function o(c,u,d){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:u,snapshot:c,_transitions:d}),s.push(c)}if(e.type===hm)return r=kr(FI(r,e,t),{status:"stopped"}),o(r,e,[]),{snapshot:r,microstates:s};let a=e;if(a.type!==gI){const c=a,u=function N3(n){return n.type.startsWith("xstate.error.actor")}(c),d=jI(c,r);if(u&&!d.length)return r=kr(n,{status:"error",error:c.error}),o(r,c,[]),{snapshot:r,microstates:s};r=Cm(d,n,t,a,!1,i),o(r,c,d)}let l=!0;for(;"active"===r.status;){let c=l?hW(r,a):[];const u=c.length?r:void 0;if(!c.length){if(!i.length)break;a=i.shift(),c=jI(a,r)}r=Cm(c,r,t,a,!1,i),l=r!==u,o(r,a,c)}return"active"!==r.status&&FI(r,a,t),{snapshot:r,microstates:s}}function FI(n,e,t){return eo(n,e,t,Object.values(n.children).map(i=>DI(i)),[])}function jI(n,e){return e.machine.getTransitionData(e,n)}function hW(n,e){const t=new Set,i=n._nodes.filter(_m);for(const r of i)e:for(const s of[r].concat(Va(r,void 0)))if(s.always)for(const o of s.always)if(void 0===o.guard||Ks(o.guard,n.context,e,n)){t.add(o);break e}return RI(Array.from(t),new Set(n._nodes),n.historyValue)}const gW=function(e){return yI(e,this.value)},mW=function(e){return this.tags.has(e)},yW=function(e){const t=this.machine.getTransitionData(this,e);return!!t?.length&&t.some(i=>void 0!==i.target||i.actions.length)},vW=function(){const{_nodes:e,tags:t,machine:i,getMeta:r,toJSON:s,can:o,hasTag:a,matches:l,...c}=this;return{...c,tags:Array.from(t)}},_W=function(){return this._nodes.reduce((e,t)=>(void 0!==t.meta&&(e[t.id]=t.meta),e),{})};function zu(n,e){return{status:n.status,output:n.output,error:n.error,machine:e,context:n.context,_nodes:n._nodes,value:TI(e.root,n._nodes),tags:new Set(n._nodes.flatMap(t=>t.tags)),children:n.children,historyValue:n.historyValue||{},matches:gW,hasTag:mW,can:yW,getMeta:_W,toJSON:vW}}function kr(n,e={}){return zu({...n,...e},n.machine)}function BI(n){let e;for(const t in n){const i=n[t];if(i&&"object"==typeof i)if("sessionId"in i&&"send"in i&&"ref"in i)e??=Array.isArray(n)?n.slice():{...n},e[t]={xstate$$type:1,id:i.id};else{const r=BI(i);r!==i&&(e??=Array.isArray(n)?n.slice():{...n},e[t]=r)}}return e??n}function EW(n,e,t,i,{event:r,id:s,delay:o},{internalQueue:a}){const l=e.machine.implementations.delays;if("string"==typeof r)throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const c="function"==typeof r?r(t,i):r;let u;if("string"==typeof o){const d=l&&l[o];u="function"==typeof d?d(t,i):d}else u="function"==typeof o?o(t,i):o;return"number"!=typeof u&&a.push(c),[e,{event:c,id:s,delay:u}]}function wW(n,e){const{event:t,delay:i,id:r}=e;"number"!=typeof i||n.defer(()=>{const s=n.self;n.system.scheduler.schedule(s,s,t,i,r)})}function CW(n,{machine:e,context:t},i,r){return(o,a)=>{const l=((o,a={})=>{const{systemId:l,input:c}=a;if("string"==typeof o){const u=ym(e,o);if(!u)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const d=Ba(u,{id:a.id,parent:n.self,syncSnapshot:a.syncSnapshot,input:"function"==typeof c?c({context:t,event:i,self:n.self}):c,src:o,systemId:l});return r[d.id]=d,d}return Ba(o,{id:a.id,parent:n.self,syncSnapshot:a.syncSnapshot,input:a.input,src:o,systemId:l})})(o,a);return r[l.id]=l,n.defer(()=>{l._processingStatus!==Nt.Stopped&&l.start()}),l}}function DW(n,e,t,i,{assignment:r}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:t.event,spawn:CW(n,e,t.event,s),self:n.self,system:n.system};let a={};if("function"==typeof r)a=r(o,i);else for(const c of Object.keys(r)){const u=r[c];a[c]="function"==typeof u?u(o,i):u}return[kr(e,{context:Object.assign({},e.context,a),children:Object.keys(s).length?{...e.children,...s}:e.children})]}function VI(n){function e(t,i){}return e.type="xstate.assign",e.assignment=n,e.resolve=DW,e}const HI=new WeakMap;function to(n,e,t){let i=HI.get(n);return i?e in i||(i[e]=t()):(i={[e]:t()},HI.set(n,i)),i[e]}const LW={},Ua=n=>"string"==typeof n?{type:n}:"function"==typeof n?"resolve"in n?{type:n.type}:{type:n.name}:n;class Mm{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(fI),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?_I(this.config.states,(i,r)=>new Mm(i,{_parent:this,_key:r,_machine:this.machine})):LW,"compound"===this.type&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=Gi(this.config.entry).slice(),this.exit=Gi(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"!==this.type&&this.parent?void 0:this.config.output,this.tags=Gi(e.tags).slice()}_initialize(){this.transitions=function Q3(n){const e=new Map;if(n.config.on)for(const t of Object.keys(n.config.on)){if(""===t)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');e.set(t,Ys(n.config.on[t]).map(r=>Nr(n,t,r)))}if(n.config.onDone){const t=`xstate.done.state.${n.id}`;e.set(t,Ys(n.config.onDone).map(i=>Nr(n,t,i)))}for(const t of n.invoke){if(t.onDone){const i=`xstate.done.actor.${t.id}`;e.set(i,Ys(t.onDone).map(r=>Nr(n,i,r)))}if(t.onError){const i=`xstate.error.actor.${t.id}`;e.set(i,Ys(t.onError).map(r=>Nr(n,i,r)))}if(t.onSnapshot){const i=`xstate.snapshot.${t.id}`;e.set(i,Ys(t.onSnapshot).map(r=>Nr(n,i,r)))}}for(const t of n.after){let i=e.get(t.eventType);i||(i=[],e.set(t.eventType,i)),i.push(t)}return e}(this),this.config.always&&(this.always=Ys(this.config.always).map(e=>Nr(this,"",e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Ua),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Ua),eventType:null})}:void 0,history:this.history,states:_I(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Ua)})),entry:this.entry.map(Ua),exit:this.exit.map(Ua),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return to(this,"invoke",()=>Gi(this.config.invoke).map((e,t)=>{const{src:i,systemId:r}=e,s=e.id??AI(this.id,t),o="string"==typeof i?i:`xstate.invoke.${AI(this.id,t)}`;return{...e,src:o,id:s,systemId:r,toJSON(){const{onDone:a,onError:l,...c}=e;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return to(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(r=>[t,r])).reduce((t,[i,r])=>(t[i]=t[i]||[],t[i].push(r),t),{}))}get after(){return to(this,"delayedTransitions",()=>Z3(this))}get initial(){return to(this,"initial",()=>function J3(n,e){const t="string"==typeof e?n.states[e]:e?n.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${n.id}`);const i={source:n,actions:e&&"string"!=typeof e?Gi(e.actions):[],eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...i,source:`#${n.id}`,target:t?[`#${t.id}`]:[]})};return i}(this,this.config.initial))}next(e,t){const i=t.type,r=[];let s;const o=to(this,`candidates-${i}`,()=>function K3(n,e){return n.transitions.get(e)||[...n.transitions.keys()].filter(i=>{if("*"===i)return!0;if(!i.endsWith(".*"))return!1;const r=i.split("."),s=e.split(".");for(let o=0;o<r.length;o++){const a=r[o];if("*"===a)return o===r.length-1;if(a!==s[o])return!1}return!0}).sort((i,r)=>r.length-i.length).flatMap(i=>n.transitions.get(i))}(this,i));for(const a of o){const{guard:l}=a,c=e.context;let u=!1;try{u=!l||Ks(l,c,t,e)}catch(d){const h="string"==typeof l?l:"object"==typeof l?l.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${i}' in state node '${this.id}':\n${d.message}`)}if(u){r.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return to(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const i of Object.keys(e)){const r=e[i];if(r.states)for(const s of r.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(e)}}class xm{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Mm(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:i,actors:r,delays:s}=this.implementations;return new xm(this.config,{actions:{...t,...e.actions},guards:{...i,...e.guards},actors:{...r,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=function fW(n,e){return TI(n,[...Hu($u(n,e))])}(this.root,e.value),i=Hu($u(this.root,t));return zu({_nodes:[...i],context:e.context||{},children:{},status:bm(i,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,i){return Sm(e,t,i).snapshot}microstep(e,t,i){return Sm(e,t,i).microstates}getTransitionData(e,t){return Em(this.root,e.value,e,t)||[]}getPreInitialState(e,t,i){const{context:r}=this.config,s=zu({context:"function"!=typeof r&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return"function"==typeof r?eo(s,t,e,[VI(({spawn:a,event:l,self:c})=>r({spawn:a,input:l.input,self:c}))],i):s}getInitialSnapshot(e,t){const i=mI(t),r=[],s=this.getPreInitialState(e,i,r),o=Cm([{target:[...PI(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,i,!0,r),{snapshot:a}=Sm(o,i,e,r);return a}start(e){Object.values(e.children).forEach(t=>{"active"===t.getSnapshot().status&&t.start()})}getStateNodeById(e){const t=pm(e),i=t.slice(1),r=Ha(t[0])?t[0].slice(1):t[0],s=this.idMap.get(r);if(!s)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return Uu(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return function bW(n,e){const{_nodes:t,tags:i,machine:r,children:s,context:o,can:a,hasTag:l,matches:c,getMeta:u,toJSON:d,...h}=n,f={};for(const g in s){const y=s[g];f[g]={snapshot:y.getPersistedSnapshot(e),src:y.src,systemId:y._systemId,syncSnapshot:y._syncSnapshot}}return{...h,context:BI(o),children:f}}(e,t)}restoreSnapshot(e,t){const i={},r=e.children;Object.keys(r).forEach(l=>{const c=r[l],u=c.snapshot,d=c.src,h="string"==typeof d?ym(this,d):d;if(!h)return;const f=Ba(h,{id:l,parent:t.self,syncSnapshot:c.syncSnapshot,snapshot:u,src:d,systemId:c.systemId});i[l]=f});const s=zu({...e,children:i,_nodes:Array.from(Hu($u(this.root,e.value)))},this);let o=new Set;return function a(l,c){if(!o.has(l)){o.add(l);for(let u in l){const d=l[u];if(d&&"object"==typeof d){if("xstate$$type"in d&&1===d.xstate$$type){l[u]=c[d.id];continue}a(d,c)}}}}(s.context,i),s}}function $I({schemas:n,actors:e,actions:t,guards:i,delays:r}){return{createMachine:s=>function jW(n,e){return new xm(n,e)}({...s,schemas:n},{actors:e,actions:t,guards:i,delays:r})}}$I({types:{context:{},events:{}},actions:{registerUser:function({context:n},t){console.log("Registering user...",t),"mythicLedgerService"in n?console.dir(n.mythicLedgerService):console.error("MythicLedgerService is not initialized")}},guards:{succesful:function({}){return!0},failed:function({}){return!0},exists:function({}){return!0},doesNotExist:function({}){return!0},successful:function({}){return!0},"New guard":function({}){return!0}}});const HW={types:{context:{},events:{}},actions:{registerUser:function({context:n},t){console.log("Registering user...",t),"mythicLedgerService"in n&&n.mythicLedgerService instanceof dm?n.mythicLedgerService.registerUser(n.user,n.hostname).subscribe(i=>{console.log("User registered",i)}):console.error("MythicLedgerService is not initialized")}},guards:{succesful:function({}){return!0},failed:function({}){return!0},exists:function({}){return!0},doesNotExist:function({}){return!0},successful:function({}){return!0}}},{isArray:UW}=Array;const WW=["addListener","removeListener"],GW=["addEventListener","removeEventListener"],qW=["on","off"];function Ne(n,e,t,i){if(Ee(t)&&(i=t,t=void 0),i)return Ne(n,e,t).pipe(function zW(n){return Di(e=>function $W(n,e){return UW(e)?n(...e):n(e)}(n,e))}(i));const[r,s]=function KW(n){return Ee(n.addEventListener)&&Ee(n.removeEventListener)}(n)?GW.map(o=>a=>n[o](e,a,t)):function XW(n){return Ee(n.addListener)&&Ee(n.removeListener)}(n)?WW.map(zI(n,e)):function YW(n){return Ee(n.on)&&Ee(n.off)}(n)?qW.map(zI(n,e)):[];if(!r&&im(n))return ka(o=>Ne(o,e,t))(fi(n));if(!r)throw new TypeError("Invalid event target");return new Dt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function zI(n,e){return t=>i=>n[t](e,i)}function Oe(n){return Kn((e,t)=>{fi(n).subscribe(Zn(t,()=>t.complete(),Rd)),!t.closed&&e.subscribe(t)})}class ZW extends Wt{constructor(e,t){super()}schedule(e,t=0){return this}}const Wu={setInterval(n,e,...t){const{delegate:i}=Wu;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Wu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class $a{constructor(e,t=$a.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}$a.now=Qg.now;const eG=new class JW extends $a{constructor(e,t=$a.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class QW extends ZW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Wu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Wu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ml(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});var za={d:(n,e)=>{for(var t in e)za.o(e,t)&&!za.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},K=globalThis.pdfjsLib={};za.d(K,{AbortException:()=>Fr,AnnotationEditorLayer:()=>i4,AnnotationEditorParamsType:()=>X,AnnotationEditorType:()=>ae,AnnotationEditorUIManager:()=>Za,AnnotationLayer:()=>t4,AnnotationMode:()=>Xi,CMapCompressionType:()=>Rm,ColorPicker:()=>qn,DOMSVGFactory:()=>Bm,DrawLayer:()=>wt,FeatureTest:()=>Ut,GlobalWorkerOptions:()=>Ja,ImageKind:()=>qu,InvalidPDFException:()=>GI,MissingPDFException:()=>Lr,OPS:()=>Sn,PDFDataRangeTransport:()=>xT,PDFDateString:()=>rT,PDFWorker:()=>ct,PasswordResponses:()=>sG,PermissionFlag:()=>rG,PixelsPerInch:()=>no,RenderingCancelledException:()=>Vm,TextLayer:()=>nn,UnexpectedResponseException:()=>Zu,Util:()=>L,VerbosityLevel:()=>Xu,XfaLayer:()=>OT,build:()=>k8,createValidAbsoluteUrl:()=>cG,fetchData:()=>Qu,getDocument:()=>S8,getFilenameFromUrl:()=>EG,getPdfFilenameFromUrl:()=>wG,getXfaPageViewport:()=>AG,isDataScheme:()=>Ju,isPdfFile:()=>Hm,noContextMenu:()=>fn,normalizeUnicode:()=>mG,setLayerDimensions:()=>jr,shadow:()=>le,version:()=>O8});const bt=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),WI=[1,0,0,1,0,0],Pm=[.001,0,0,.001,0,0],Xi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},X={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},rG={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},qu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Xu={ERRORS:0,WARNINGS:1,INFOS:5},Rm={NONE:0,BINARY:1},Sn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},sG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yu=Xu.WARNINGS;function aG(){return Yu}function Ku(n){Yu>=Xu.INFOS&&console.log(`Info: ${n}`)}function se(n){Yu>=Xu.WARNINGS&&console.log(`Warning: ${n}`)}function qe(n){throw new Error(n)}function ot(n,e){n||qe(e)}function cG(n,e=null,t=null){if(!n)return null;try{if(t&&"string"==typeof n&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=function gG(n){return decodeURIComponent(escape(n))}(n)}catch{}const i=e?new URL(n,e):new URL(n);if(function lG(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function le(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Yi=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Nm extends Yi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Om extends Yi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class GI extends Yi{constructor(e){super(e,"InvalidPDFException")}}class Lr extends Yi{constructor(e){super(e,"MissingPDFException")}}class Zu extends Yi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class uG extends Yi{constructor(e){super(e,"FormatError")}}class Fr extends Yi{constructor(e){super(e,"AbortException")}}function qI(n){("object"!=typeof n||void 0===n?.length)&&qe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=n.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Ga(n){"string"!=typeof n&&qe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=255&n.charCodeAt(i);return t}function km(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}class Ut{static get isLittleEndian(){return le(this,"isLittleEndian",function hG(){const n=new Uint8Array(4);return n[0]=1,1===new Uint32Array(n.buffer,0,1)[0]}())}static get isEvalSupported(){return le(this,"isEvalSupported",function fG(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof navigator?.platform?le(this,"platform",{isMac:navigator.platform.includes("Mac")}):le(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return le(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Lm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class L{static makeHexColor(e,t,i){return`#${Lm[e]}${Lm[t]}${Lm[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-(e[2]*t[0]+e[3]*t[2])*(e[0]*t[1]+e[1]*t[3])))/2,u=a-l||1;return[Math.sqrt(a+l||1),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[i,s,r,o]}static#e(e,t,i,r,s,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,h=c*c,f=h*c,p=d*(d*(d*e+3*c*t)+3*h*i)+f*r,g=d*(d*(d*s+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(e,t,i,r,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12)return void(Math.abs(u)>=1e-12&&this.#e(e,t,i,r,s,o,a,l,-d/u,h));const f=u**2-4*d*c;if(f<0)return;const p=Math.sqrt(f),g=2*c;this.#e(e,t,i,r,s,o,a,l,(-u+p)/g,h),this.#e(e,t,i,r,s,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(e,t,i,r,s,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],this.#t(e,i,s,a,t,r,o,l,3*(3*(i-s)-e+a),6*(e-2*i+s),3*(i-e),c),this.#t(e,i,s,a,t,r,o,l,3*(3*(r-o)-t+l),6*(t-2*r+o),3*(r-t),c),c}}let Fm=null,XI=null;function mG(n){return Fm||(Fm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,XI=new Map([["\ufb05","\u017ft"]])),n.replaceAll(Fm,(e,t,i)=>t?t.normalize("NFKC"):XI.get(i))}const YI="pdfjs_internal_id_";class KI{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}class ZI{#e=!1;constructor({enableHWA:e=!1}={}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){qe("Abstract method `_createCanvas` called.")}}class QI{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch({name:e}){var t=this;return x(function*(){if(!t.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const i=t.baseUrl+e+(t.isCompressed?".bcmap":"");return t._fetchData(i,t.isCompressed?Rm.BINARY:Rm.NONE).catch(s=>{throw new Error(`Unable to load ${t.isCompressed?"binary ":""}CMap at: ${i}`)})})()}_fetchData(e,t){qe("Abstract method `_fetchData` called.")}}class JI{constructor({baseUrl:e=null}){this.baseUrl=e}fetch({filename:e}){var t=this;return x(function*(){if(!t.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const i=`${t.baseUrl}${e}`;return t._fetchData(i).catch(r=>{throw new Error(`Unable to load font data at: ${i}`)})})()}_fetchData(e){qe("Abstract method `_fetchData` called.")}}class vG{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){qe("Abstract method `_createSVG` called.")}}const mi="http://www.w3.org/2000/svg";class no{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function Qu(n){return jm.apply(this,arguments)}function jm(){return(jm=x(function*(n,e="text"){if(Xa(n,document.baseURI)){const t=yield fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){switch(e){case"arraybuffer":case"blob":case"json":return void t(r.response)}return void t(r.responseText)}i(new Error(r.statusText))}},r.send(null)})})).apply(this,arguments)}class eT extends QI{_fetchData(e,t){return Qu(e,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):Ga(i),compressionType:t}))}}class tT extends JI{_fetchData(e){return Qu(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Bm extends vG{_createSVG(e){return document.createElementNS(mi,e)}}class qa{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=s;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,u,d,h,f,p,g,y;switch((i%=360)<0&&(i+=360),i){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,h=-h),0===c?(f=Math.abs(l-e[1])*t+r,p=Math.abs(a-e[0])*t+s,g=(e[3]-e[1])*t,y=(e[2]-e[0])*t):(f=Math.abs(a-e[0])*t+r,p=Math.abs(l-e[1])*t+s,g=(e[2]-e[0])*t,y=(e[3]-e[1])*t),this.transform=[c*t,u*t,d*t,h*t,f-c*t*a-d*t*l,p-u*t*a-h*t*l],this.width=g,this.height=y}get rawDims(){const{viewBox:e}=this;return le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new qa({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return L.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=L.applyTransform([e[0],e[1]],this.transform),i=L.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return L.applyInverseTransform([e,t],this.transform)}}class Vm extends Yi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Ju(n){const e=n.length;let t=0;for(;t<e&&""===n[t].trim();)t++;return"data:"===n.substring(t,t+5).toLowerCase()}function Hm(n){return"string"==typeof n&&/\.pdf$/i.test(n)}function EG(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function wG(n,e="document.pdf"){if("string"!=typeof n)return e;if(Ju(n))return se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class nT{started=Object.create(null);times=[];time(e){e in this.started&&se(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||se(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms\n`);return e.join("")}}function Xa(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return"http:"===t||"https:"===t}catch{return!1}}function fn(n){n.preventDefault()}let iT;class rT{static toDateObject(e){if(!e||"string"!=typeof e)return null;iT||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=iT.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(o+=u,a+=d):"+"===c&&(o-=u,a-=d),new Date(Date.UTC(i,r,s,o,a,l))}}function AG(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new qa({viewBox:s,scale:e,rotation:t})}function Um(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(se(`Not a valid color format: "${n}"`),[0,0,0])}function Pe(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform();return[e,t,i,r,s,o]}function yi(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform().invertSelf();return[e,t,i,r,s,o]}function jr(n,e,t=!1,i=!0){if(e instanceof qa){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=n,a=Ut.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,c=`var(--scale-factor) * ${s}px`,u=a?`round(${l}, 1px)`:`calc(${l})`,d=a?`round(${c}, 1px)`:`calc(${c})`;t&&e.rotation%180!=0?(o.width=d,o.height=u):(o.width=u,o.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Ya{#e=null;#t=null;#n;#i=null;#r=null;static#s=null;constructor(e){this.#n=e,Ya.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",fn,{signal:t}),e.addEventListener("pointerdown",Ya.#a,{signal:t});const i=this.#i=document.createElement("div");i.className="buttons",e.append(i);const r=this.#n.toolbarPosition;if(r){const{style:s}=e,o="ltr"===this.#n._uiManager.direction?1-r[0]:r[0];s.insetInlineEnd=100*o+"%",s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),e}static#a(e){e.stopPropagation()}#l(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#d(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#c(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#l.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",fn,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown()}#u(){const{editorType:e,_uiManager:t}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Ya.#s[e]),this.#c(i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#i.append(i)}get#o(){const e=document.createElement("div");return e.className="divider",e}addAltText(e){var t=this;return x(function*(){const i=yield e.render();t.#c(i),t.#i.prepend(i,t.#o),t.#r=e})()}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#c(t),this.#i.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class DG{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",fn,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#r(e,t){let i=0,r=0;for(const s of e){const o=s.y+s.height;if(o<i)continue;const a=s.x+(t?s.width:0);o>i?(r=a,i=o):t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,i]}show(e,t,i){const[r,s]=this.#r(t,i),{style:o}=this.#t||=this.#i();e.append(this.#t),o.insetInlineEnd=100*r+"%",o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;e.addEventListener("contextmenu",fn,{signal:i}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#e.append(e)}}function ed(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}class IG{#e=0;get id(){return"pdfjs_internal_editor_"+this.#e++}}class $m{#e=function yG(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(255*Math.random());return qI(n)}();#t=0;#n=null;static get _isSVGFittingCanvas(){const i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;return r.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',le(this,"_isSVGFittingCanvas",r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),0===new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0])))}#i(e,t){var i=this;return x(function*(){i.#n||=new Map;let r=i.#n.get(e);if(null===r)return null;if(r?.bitmap)return r.refCounter+=1,r;try{let s;if(r||={bitmap:null,id:`image_${i.#e}_${i.#t++}`,refCounter:0,isSvg:!1},"string"==typeof t?(r.url=t,s=yield Qu(t,"blob")):s=r.file=t,"image/svg+xml"===s.type){const o=$m._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,u()},a.onload=x(function*(){const h=r.svgUrl=a.result;l.src=(yield o)?`${h}#svgView(preserveAspectRatio(none))`:h}),l.onerror=a.onerror=d});a.readAsDataURL(s),yield c}else r.bitmap=yield createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return i.#n.set(e,r),r&&i.#n.set(r.id,r),r})()}getFromFile(e){var t=this;return x(function*(){const{lastModified:i,name:r,size:s,type:o}=e;return t.#i(`${i}_${r}_${s}_${o}`,e)})()}getFromUrl(e){var t=this;return x(function*(){return t.#i(e,e)})()}getFromId(e){var t=this;return x(function*(){t.#n||=new Map;const i=t.#n.get(e);return i?i.bitmap?(i.refCounter+=1,i):i.file?t.getFromFile(i.file):t.getFromUrl(i.url):null})()}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class TG{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),this.#t)return;const l={cmd:e,undo:t,post:i,type:s};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(l);if(o&&this.#e[this.#i].type===s)return a&&(l.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=l);const c=this.#i+1;c===this.#n?this.#e.splice(0,1):(this.#i=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(-1===this.#i)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class Ka{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ut.platform;for(const[i,r,s={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(r.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class zm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function CG(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,Um(i))}e.remove()}(e),le(this,"_colors",e)}convert(e){const t=Um(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,o)=>s===t[o]))return zm._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?L.makeHexColor(...t):e}}let Za=(()=>{class n{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#r=null;#s=null;#a=null;#l=new TG;#d=null;#c=0;#u=new Set;#o=null;#h=null;#p=new Set;#f=!1;#g=!1;#y=!1;#m=null;#v=null;#b=null;#w=null;#E=!1;#C=null;#x=new IG;#I=!1;#A=!1;#T=null;#S=null;#P=null;#O=null;#D=ae.NONE;#_=new Set;#M=null;#R=null;#L=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#k=null;#F=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=n.prototype,i=a=>a.#F.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return"text"!==c&&"number"!==c}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return le(this,"_keyboardManager",new Ka([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,r,s,o,a,l,c,u,d,h){const f=this._signal=this.#e.signal;this.#F=t,this.#j=i,this.#r=r,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),this.#J(),this.#ie(),this.#G(),this.#s=o.annotationStorage,this.#m=o.filterFactory,this.#R=a,this.#w=l||null,this.#f=c,this.#g=u,this.#y=d,this.#O=h||null,this.viewParameters={realScale:no.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#e?.abort(),this.#e=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#_.clear(),this.#l.destroy(),this.#r?.destroy(),this.#C?.hide(),this.#C=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#k&&(clearTimeout(this.#k),this.#k=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#O}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return le(this,"hcmFilter",this.#R?this.#m.addHCMFilter(this.#R.foreground,this.#R.background):"none")}get direction(){return le(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return le(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#P=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){"enableNewAltTextWhenAddingImage"===t&&(this.#y=i)}onPageChanging({pageNumber:t}){this.#c=t-1}focusMainContainer(){this.#F.focus()}findParent(t,i){for(const r of this.#i.values()){const{x:s,y:o,width:a,height:l}=r.div.getBoundingClientRect();if(t>=s&&t<=s+a&&i>=o&&i<=o+l)return r}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*no.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#V({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#W(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const r of this.#i.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a}=i,l=i.toString(),u=this.#V(i).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;i.empty();const h=this.#W(u),f=this.#D===ae.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a,text:l}),f&&this.showAllEditors("highlight",!0,!0)};f?this.switchToMode(ae.HIGHLIGHT,p):p()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const r=this.#V(t).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#C||=new DG(this),this.#C.show(r,s,"ltr"===this.direction))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#Q(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#M&&(this.#C?.hide(),this.#M=null,this.#N({hasSelectedText:!1})));const{anchorNode:i}=t;if(i===this.#M)return;const s=this.#V(t).closest(".textLayer");if(s){if(this.#C?.hide(),this.#M=i,this.#N({hasSelectedText:!0}),(this.#D===ae.HIGHLIGHT||this.#D===ae.NONE)&&(this.#D===ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#D===ae.HIGHLIGHT?this.#W(s):null;o?.toggleDrawing();const a=new AbortController,l=this.combinedSignal(a),c=u=>{"pointerup"===u.type&&0!==u.button||(a.abort(),o?.toggleDrawing(!0),"pointerup"===u.type&&this.#z("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}else this.#M&&(this.#C?.hide(),this.#M=null,this.#N({hasSelectedText:!1}))}#z(t=""){this.#D===ae.HIGHLIGHT?this.highlightSelection(t):this.#f&&this.#Z()}#J(){document.addEventListener("selectionchange",this.#Q.bind(this),{signal:this._signal})}#ee(){if(this.#b)return;this.#b=new AbortController;const t=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#te(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#z("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#_)if(i.div.contains(t)){this.#S=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#S)return;const[t,i]=this.#S;this.#S=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#G(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ne(){this.#T?.abort(),this.#T=null}#q(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#X(){this.#d?.abort(),this.#d=null}#ie(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#G(),this.#q()}removeEditListeners(){this.#ne(),this.#X()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(i))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const i of t.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(i.type))return r.paste(i,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const r of this.#_){const s=r.serialize(!0);s&&i.push(s)}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(o.type))return void a.paste(o,this.currentLayer);let r=i.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(o){return void se(`paste: "${o.message}".`)}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const c of r){const u=s.deserialize(c);if(!u)return;o.push(u)}this.addCommands({cmd:()=>{for(const c of o)this.#Y(c);this.#K(o)},undo:()=>{for(const c of o)c.remove()},mustExec:!0})}catch(o){se(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!0),this.#D!==ae.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#z("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#N(t){Object.entries(t).some(([r,s])=>this.#H[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,t)}),this.#D===ae.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#U([[X.HIGHLIGHT_FREE,!0]]))}#U(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ee(),this.#q(),this.#N({isEditing:this.#D!==ae.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#te(),this.#X(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const i of this.#h)this.#U(i.defaultPropertiesToUpdate)}}getId(){return this.#x.id}get currentLayer(){return this.#i.get(this.#c)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#c}addLayer(t){this.#i.set(t.pageIndex,t),this.#I?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t,i=null,r=!1){if(this.#D!==t){if(this.#D=t,t===ae.NONE)return this.setEditingState(!1),void this.#se();this.setEditingState(!0),this.#re(),this.unselectAll();for(const s of this.#i.values())s.updateMode(t);if(!i&&r)return void this.addNewEditorFromKeyboard();if(i)for(const s of this.#n.values())if(s.annotationElementId===i){this.setSelected(s),s.enterInEditMode();break}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){if(this.#h){switch(t){case X.CREATE:return void this.currentLayer.addNewEditor();case X.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(i);break;case X.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(t,i),this.showAllEditors("highlight",i)}for(const r of this.#_)r.updateParams(t,i);for(const r of this.#h)r.updateDefaultParams(t,i)}}showAllEditors(t,i,r=!1){for(const o of this.#n.values())o.editorType===t&&o.show(i);(this.#L?.get(X.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#U([[X.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#A!==t){this.#A=t;for(const i of this.#i.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}#re(){if(!this.#I){this.#I=!0;for(const t of this.#i.values())t.enable();for(const t of this.#n.values())t.enable()}}#se(){if(this.unselectAll(),this.#I){this.#I=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const i=[];for(const r of this.#n.values())r.pageIndex===t&&i.push(r);return i}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#u.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#u.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#u.has(t)}removeDeletedAnnotationElement(t){this.#u.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Y(t){const i=this.#i.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#U(t.propertiesToUpdate))}get#oe(){let t=null;for(t of this.#_);return t}updateUI(t){this.#oe===t&&this.#U(t.propertiesToUpdate)}toggleSelected(t){if(this.#_.has(t))return this.#_.delete(t),t.unselect(),void this.#N({hasSelectedEditor:this.hasSelection});this.#_.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){for(const i of this.#_)i!==t&&i.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#_.size}get isEnterHandled(){return 1===this.#_.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#N({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#l.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(t){this.#l.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#_];this.addCommands({cmd:()=>{for(const s of t)s.remove()},undo:()=>{for(const s of t)this.#Y(s)},mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#K(t){for(const i of this.#_)i.unselect();this.#_.clear();for(const i of t)i.isEmpty()||(this.#_.add(i),i.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#K(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#D===ae.NONE))&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=t,this.#B[1]+=i;const[s,o]=this.#B,a=[...this.#_];this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const c of a)this.#n.has(c.id)&&c.translateInPage(s,o)},undo:()=>{for(const c of a)this.#n.has(c.id)&&c.translateInPage(-s,-o)},mustExec:!1})},1e3);for(const c of a)c.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const t of this.#_)this.#o.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const t=this.#o;this.#o=null;let i=!1;for(const[{x:s,y:o,pageIndex:a},l]of t)l.newX=s,l.newY=o,l.newPageIndex=a,i||=s!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!i)return!1;const r=(s,o,a,l)=>{if(this.#n.has(s.id)){const c=this.#i.get(l);c?s._setParentAndPosition(c,o,a):(s.pageIndex=l,s.x=o,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:a,newPageIndex:l}]of t)r(s,o,a,l)},undo:()=>{for(const[s,{savedX:o,savedY:a,savedPageIndex:l}]of t)r(s,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#o)for(const r of this.#o.keys())r.drag(t,i)}rebuild(t){if(null===t.parent){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#_.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#D}get imageManager(){return le(this,"imageManager",new $m)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let u=0,d=i.rangeCount;u<d;u++)if(!t.contains(i.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:o,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-r)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-r)/o,y:1-(d+f-s)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-r)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-r)/o,y:(d-s)/a,width:h/o,height:f/a})}const c=[];for(let u=0,d=i.rangeCount;u<d;u++){const h=i.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:g,height:y}of h.getClientRects())0===g||0===y||c.push(l(f,p,g,y))}return 0===c.length?null:c}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#a||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const i=this.#a?.get(t.data.id);if(!i)return;const r=this.#s.getRawValue(i);r&&(this.#D===ae.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}}return n})(),sT=(()=>{class n{#e=null;#t=!1;#n=null;#i=null;#r=null;#s=!1;#a=null;#l=null;#d=null;#c=null;#u=!1;static _l10nPromise=null;constructor(t){this.#l=t,this.#u=t._uiManager.useNewAltTextFlow}static initialize(t){n._l10nPromise||=t}render(){var t=this;return x(function*(){const i=t.#n=document.createElement("button");let r;i.className="altText",t.#u?(i.classList.add("new"),r=yield n._l10nPromise.get("pdfjs-editor-new-alt-text-missing-button-label")):r=yield n._l10nPromise.get("pdfjs-editor-alt-text-button-label"),i.textContent=r,i.setAttribute("aria-label",r),i.tabIndex="0";const s=t.#l._uiManager._signal;i.addEventListener("contextmenu",fn,{signal:s}),i.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const o=a=>{a.preventDefault(),t.#l._uiManager.editAltText(t.#l),t.#u&&t.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:t.#o}})};return i.addEventListener("click",o,{capture:!0,signal:s}),i.addEventListener("keydown",a=>{a.target===i&&"Enter"===a.key&&(t.#s=!0,o(a))},{signal:s}),yield t.#h(),i})()}get#o(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#u?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#u?null!==this.#e||!!this.#d:this.isEmpty()}get guessedText(){return this.#d}setGuessedText(t){var i=this;return x(function*(){null===i.#e&&(i.#d=t,i.#c=yield n._l10nPromise.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer")({generatedAltText:t}),i.#h())})()}toggleAltTextBadge(t=!1){if(!this.#u||this.#e)return this.#a?.remove(),void(this.#a=null);if(!this.#a){const i=this.#a=document.createElement("div");i.className="noAltTextBadge",this.#l.div.append(i)}this.#a.classList.toggle("hidden",!t)}serialize(t){let i=this.#e;return!t&&this.#d===i&&(i=this.#c),{altText:i,decorative:this.#t,guessedText:this.#d,textWithDisclaimer:this.#c}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:i,guessedText:r,textWithDisclaimer:s,cancel:o=!1}){r&&(this.#d=r,this.#c=s),(this.#e!==t||this.#t!==i)&&(o||(this.#e=t,this.#t=i),this.#h())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#o}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a?.remove(),this.#a=null}#h(){var t=this;return x(function*(){const i=t.#n;if(!i)return;if(t.#u){const o=t.#o,a="review"===o?"to-review":o;if(i.classList.toggle("done",!!t.#e),n._l10nPromise.get(`pdfjs-editor-new-alt-text-${a}-button-label`).then(l=>{i.setAttribute("aria-label",l);for(const c of i.childNodes)if(c.nodeType===Node.TEXT_NODE){c.textContent=l;break}}),!t.#e)return void t.#i?.remove()}else{if(!t.#e&&!t.#t)return i.classList.remove("done"),void t.#i?.remove();i.classList.add("done"),n._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{i.setAttribute("aria-label",o)})}let r=t.#i;if(!r){t.#i=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip");const o=r.id=`alt-text-tooltip-${t.#l.id}`;i.setAttribute("aria-describedby",o);const a=100,l=t.#l._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(t.#r),t.#r=null},{once:!0}),i.addEventListener("mouseenter",()=>{t.#r=setTimeout(()=>{t.#r=null,t.#i.classList.add("show"),t.#l._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),i.addEventListener("mouseleave",()=>{t.#r&&(clearTimeout(t.#r),t.#r=null),t.#i?.classList.remove("show")},{signal:l})}r.innerText=t.#t?yield n._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t.#e,r.parentNode||i.append(r),t.#l.getImageForAltText()?.setAttribute("aria-describedby",r.id)})()}}return n})();class W{#e=null;#t=null;#n=null;#i=!1;#r=!1;#s=null;#a=null;#l=null;#d="";#c=!1;#u=null;#o=!1;#h=!1;#p=!1;#f=null;#g=0;#y=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10nPromise=null;static _l10nResizer=null;#v=!1;#b=W._zIndex++;static _borderLineWidth=-1;static _colorManager=new zm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=W.prototype._resizeWithKeyboard,t=Za.TRANSLATE_SMALL,i=Za.TRANSLATE_BIG;return le(this,"_resizerKeyboardManager",new Ka([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],W.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new MG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,i){if(W._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),W._l10nPromise||=new Map([...["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-new-alt-text-added-button-label","pdfjs-editor-new-alt-text-missing-button-label","pdfjs-editor-new-alt-text-to-review-button-label"].map(s=>[s,e.get(s)]),...["pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer"].map(s=>[s,e.get.bind(e,s)])]),i?.strings)for(const s of i.strings)W._l10nPromise.set(s,e.get(s));if(-1!==W._borderLineWidth)return;const r=getComputedStyle(document.documentElement);W._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){qe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#v}set _isDraggable(e){this.#v=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#c?this.#c=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/o,this.fixAndSetPosition()}#w([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()}translate(e,t){this.#w(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y],this.#w(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#u||=[this.x,this.y];const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,l]=this.getBaseTranslation();s+=a,o+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=W,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:s,width:o,height:a}=this;if(o*=t,a*=i,r*=t,s*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),s=Math.max(0,Math.min(i-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(i,Math.max(o,s));break;case 180:r=Math.min(t,Math.max(o,r)),s=Math.min(i,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(i-o,s))}this.x=r/=t,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c;const{style:u}=this.div;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#E(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return W.#E(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return W.#E(e,t,360-this.parentRotation)}#C(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,r=t*e,s=i*e;return Ut.isCSSRoundSupported?[Math.round(r),Math.round(s)]:[r,s]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!this.#r&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!this.#r&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");this.#s.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#I.bind(this,i),{signal:t}),r.addEventListener("contextmenu",fn,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#s)}#I(e,t){t.preventDefault();const{isMac:i}=Ut.platform;if(0!==t.button||t.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#T.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",fn,{signal:o});const a=this.x,l=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=d,this.div.style.cursor=h,this.#A(a,l,c,u)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#A(e,t,i,r){const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===i&&l===r||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[c,u]=this.parentDimensions;this.setDims(c*i,u*r),this.fixAndSetPosition()},mustExec:!0})}#T(e,t){const[i,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=W.MIN_SIZE/i,u=W.MIN_SIZE/r,d=Z=>Math.round(1e4*Z)/1e4,h=this.#C(this.rotation),f=(Z,ie)=>[h[0]*Z+h[2]*ie,h[1]*Z+h[3]*ie],p=this.#C(360-this.rotation);let y,m,v=!1,_=!1;switch(e){case"topLeft":v=!0,y=(Z,ie)=>[0,0],m=(Z,ie)=>[Z,ie];break;case"topMiddle":y=(Z,ie)=>[Z/2,0],m=(Z,ie)=>[Z/2,ie];break;case"topRight":v=!0,y=(Z,ie)=>[Z,0],m=(Z,ie)=>[0,ie];break;case"middleRight":_=!0,y=(Z,ie)=>[Z,ie/2],m=(Z,ie)=>[0,ie/2];break;case"bottomRight":v=!0,y=(Z,ie)=>[Z,ie],m=(Z,ie)=>[0,0];break;case"bottomMiddle":y=(Z,ie)=>[Z/2,ie],m=(Z,ie)=>[Z/2,0];break;case"bottomLeft":v=!0,y=(Z,ie)=>[0,ie],m=(Z,ie)=>[Z,0];break;case"middleLeft":_=!0,y=(Z,ie)=>[0,ie/2],m=(Z,ie)=>[Z,ie/2]}const b=y(a,l),E=m(a,l);let w=f(...E);const C=d(s+w[0]),I=d(o+w[1]);let A=1,T=1,[N,me]=this.screenToPageTranslation(t.movementX,t.movementY);if([N,me]=[p[0]*(Z=N/i)+p[2]*(ie=me/r),p[1]*Z+p[3]*ie],v){const Z=Math.hypot(a,l);A=T=Math.max(Math.min(Math.hypot(E[0]-b[0]-N,E[1]-b[1]-me)/Z,1/a,1/l),c/a,u/l)}else _?A=Math.max(c,Math.min(1,Math.abs(E[0]-b[0]-N)))/a:T=Math.max(u,Math.min(1,Math.abs(E[1]-b[1]-me)))/l;var Z,ie;const be=d(a*A),ye=d(l*T);w=f(...m(be,ye));const Le=C-w[0],Ct=I-w[1];this.width=be,this.height=ye,this.x=Le,this.y=Ct,this.setDims(i*be,r*ye),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){var e=this;return x(function*(){return e._editToolbar||e.#h||(e._editToolbar=new Ya(e),e.div.append(e._editToolbar.render()),e.#n&&(yield e._editToolbar.addAltText(e.#n))),e._editToolbar})()}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){var e=this;return x(function*(){e.#n||(sT.initialize(W._l10nPromise),e.#n=new sT(e),e.#e&&(e.#n.data=e.#e,e.#e=null),yield e.addEditToolbar())})()}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){var t=this;return x(function*(){yield t.#n?.setGuessedText(e)})()}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#O();const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),ed(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Ut.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#c=!0,this._isDraggable?this.#P(e):this.#S(e))}#S(e){const{isMac:t}=Ut.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);t&&(this.div.classList.add("moving"),this.#g=e.clientX,this.#y=e.clientY,window.addEventListener("pointermove",a=>{const{clientX:l,clientY:c}=a,[u,d]=this.screenToPageTranslation(l-this.#g,c-this.#y);this.#g=l,this.#y=c,this._uiManager.dragSelectedEditors(u,d)},{passive:!0,capture:!0,signal:r}));const s=()=>{i.abort(),t&&this.div.classList.remove("moving"),this.#c=!1,this._uiManager.endDragSession()||this.#S(e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/r,u=t/r,d=this.x*s,h=this.y*o,f=this.width*s,p=this.height*o;switch(i){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,o]=e,a=s-i,l=o-r;switch(this.rotation){case 0:return[i,t-o,a,l];case 90:return[i,t-r,l,a];case 180:return[s,t-r,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#O(){if(this.#l||!this.div)return;this.#l=new AbortController;const e=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#O()}rotate(e){}serialize(e=!1,t=null){qe("An editor must be serializable")}static deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,r.#e=e.accessibilityData;const[s,o]=r.pageDimensions,[a,l,c,u]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=l/o,r.width=c/s,r.height=u/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#s.classList.remove("hidden"),ed(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#a={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#s.children;if(!this.#t){this.#t=Array.from(t);const o=this.#D.bind(this),a=this.#_.bind(this),l=this._uiManager._signal;for(const c of this.#t){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#M.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",W._l10nResizer[u])}}const i=this.#t[0];let r=0;for(const o of t){if(o===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)this.#s.append(this.#s.firstChild);else if(s>r)for(let a=0;a<s-r;a++)this.#s.firstChild.before(this.#s.lastChild);let o=0;for(const a of t){const c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",W._l10nResizer[c])}}this.#R(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#D(e){W._resizerKeyboardManager.exec(this,e)}#_(e){this.#p&&e.relatedTarget?.parentNode!==this.#s&&this.#L()}#M(e){this.#d=this.#p?e:""}#R(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#T(this.#d,{movementX:e,movementY:t})}#L(){if(this.#p=!1,this.#R(-1),this.#a){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=this.#a;this.#A(e,t,i,r),this.#a=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#r=!0;const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:i}=e;let r=this.#m.get(i);return r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(i),0===this.#m.size&&(this.#m=null)},W._telemetryTimeout),void this.#m.set(i,r)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}class MG extends W{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const oT=3285377520,pn=4294901760,Gn=65535;class aT{constructor(e){this.h1=e?4294967295&e:oT,this.h2=e?4294967295&e:oT}update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let g=0,y=e.length;g<y;g++){const m=e.charCodeAt(g);m<=255?t[i++]=m:(t[i++]=m>>>8,t[i++]=255&m)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),i=t.byteLength}const r=i>>2,s=i-4*r,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,h=461845907,f=d&Gn,p=h&Gn;for(let g=0;g<r;g++)1&g?(a=o[g],a=a*d&pn|a*f&Gn,a=a<<15|a>>>17,a=a*h&pn|a*p&Gn,c^=a,c=c<<13|c>>>19,c=5*c+3864292196):(l=o[g],l=l*d&pn|l*f&Gn,l=l<<15|l>>>17,l=l*h&pn|l*p&Gn,u^=l,u=u<<13|u>>>19,u=5*u+3864292196);switch(a=0,s){case 3:a^=t[4*r+2]<<16;case 2:a^=t[4*r+1]<<8;case 1:a^=t[4*r],a=a*d&pn|a*f&Gn,a=a<<15|a>>>17,a=a*h&pn|a*p&Gn,1&r?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&pn|36045*e&Gn,t=4283543511*t&pn|(2950163797*(t<<16|e>>>16)&pn)>>>16,e^=t>>>1,e=444984403*e&pn|60499*e&Gn,t=3301882366*t&pn|(3120437893*(t<<16|e>>>16)&pn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Wm=Object.freeze({map:null,hash:"",transfer:void 0});class Gm{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#n.values())if(t instanceof W)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let r=!1;if(void 0!==i)for(const[s,o]of Object.entries(t))i[s]!==o&&(r=!0,i[s]=o);else r=!0,this.#n.set(e,t);r&&this.#i(),t instanceof W&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?km(this.#n):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new lT(this)}get serializable(){if(0===this.#n.size)return Wm;const e=new Map,t=new aT,i=[],r=Object.create(null);let s=!1;for(const[o,a]of this.#n){const l=a instanceof W?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Wm}get editorStats(){let e=null;const t=new Map;for(const i of this.#n.values()){if(!(i instanceof W))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||=Object.create(null);const o=e[s]||=new Map;for(const[a,l]of Object.entries(r)){if("type"===a)continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof W)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class lT extends Gm{#e;constructor(e){super();const{map:t,hash:i,transfer:r}=e.serializable,s=structuredClone(t,r?{transfer:r}:null);this.#e={map:s,hash:i,transfer:r}}get print(){qe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return le(this,"modifiedIds",{ids:new Set,hash:""})}}class xG{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont({systemFontInfo:e,_inspectFont:t}){var i=this;return x(function*(){if(e&&!i.#e.has(e.loadedName)){if(ot(!i.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),i.isFontLoadingAPISupported){const{loadedName:r,src:s,style:o}=e,a=new FontFace(r,s,o);i.addNativeFontFace(a);try{yield a.load(),i.#e.add(r),t?.(e)}catch{se(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),i.removeNativeFontFace(a)}return}qe("Not implemented: loadSystemFont without the Font Loading API.")}})()}bind(e){var t=this;return x(function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(yield t.loadSystemFont(e));if(t.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){t.addNativeFontFace(r);try{yield r.loaded}catch(s){throw se(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const i=e.createFontFaceRule();if(i){if(t.insertRule(i),t.isSyncFontLoadingSupported)return;yield new Promise(r=>{const s=t._queueLoadingCallback(r);t._prepareFontLoadEvent(e,s)})}})()}get isFontLoadingAPISupported(){return le(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return(bt||typeof navigator<"u"&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),le(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:i}=this,r={done:!1,complete:function t(){for(ot(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}},callback:e};return i.push(r),r}get _loadTestFont(){return le(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function i(b,E){return b.charCodeAt(E)<<24|b.charCodeAt(E+1)<<16|b.charCodeAt(E+2)<<8|255&b.charCodeAt(E+3)}function r(b,E,w,C){return b.substring(0,E)+C+b.substring(E+w)}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=r(h,976,d.length,d);const g=1482184792;let y=i(h,16);for(s=0,o=d.length-3;s<o;s+=4)y=y-g+i(d,s)|0;s<d.length&&(y=y-g+i(d+"XXX",s)|0),h=r(h,16,4,function dG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n)}(y));const m=`url(data:font/opentype;base64,${btoa(h)});`;this.insertRule(`@font-face {font-family:"${d}";src:${m}}`);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const b of[e.loadedName,d]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=b,_.append(E)}this._document.body.append(_),function u(b,E){if(++c>30)return se("Load test font never loaded."),void E();l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?E():setTimeout(u.bind(null,b,E))}(d,()=>{_.remove(),t.complete()})}}class PG{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=!0===t,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=qI(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(this.cssFontInfo){let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(s){se(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[t]=function(s,o){};const r=[];for(let s=0,o=i.length;s<o;)switch(i[s++]){case 0:{const[a,l,c,u,d,h]=i.slice(s,s+6);r.push(f=>f.bezierCurveTo(a,l,c,u,d,h)),s+=6}break;case 1:{const[a,l]=i.slice(s,s+2);r.push(c=>c.moveTo(a,l)),s+=2}break;case 2:{const[a,l]=i.slice(s,s+2);r.push(c=>c.lineTo(a,l)),s+=2}break;case 3:{const[a,l,c,u]=i.slice(s,s+4);r.push(d=>d.quadraticCurveTo(a,l,c,u)),s+=4}break;case 4:r.push(a=>a.restore());break;case 5:r.push(a=>a.save());break;case 6:ot(2===r.length,"Scale command is only valid at the third position.");break;case 7:{const[a,l,c,u,d,h]=i.slice(s,s+6);r.push(f=>f.transform(a,l,c,u,d,h)),s+=6}break;case 8:{const[a,l]=i.slice(s,s+2);r.push(c=>c.translate(a,l)),s+=2}}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let l=2,c=r.length;l<c;l++)r[l](o)}}}if(bt){var qm=Promise.withResolvers(),Xm=null;(function(){var e=x(function*(){const t=yield import("fs"),i=yield import("http"),r=yield import("https"),s=yield import("url");return new Map(Object.entries({fs:t,http:i,https:r,url:s,canvas:void 0,path2d:void 0}))});return function(){return e.apply(this,arguments)}})()().then(e=>{Xm=e,qm.resolve()},e=>{se(`loadPackages: ${e}`),Xm=new Map,qm.resolve()})}class Ki{static get promise(){return qm.promise}static get(e){return Xm?.get(e)}}const cT=function(n){return Ki.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};function Ym(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class Km{getPattern(){qe("Abstract method `getPattern` called.")}}class LG extends Km{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if("Stroke"===r||"Fill"===r){const o=t.current.getClippedPathBoundingBox(r,Pe(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l,!0),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=L.transform(i,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Ym(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else Ym(e,this._bbox),s=this._createGradient(e);return s}}function Zm(n,e,t,i,r,s,o,a){const l=e.coords,c=e.colors,u=n.data,d=4*n.width;let h;l[t+1]>l[i+1]&&(h=t,t=i,i=h,h=s,s=o,o=h),l[i+1]>l[r+1]&&(h=i,i=r,r=h,h=o,o=a,a=h),l[t+1]>l[i+1]&&(h=t,t=i,i=h,h=s,s=o,o=h);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,y=(l[i+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY;if(p>=v)return;const _=c[s],b=c[s+1],E=c[s+2],w=c[o],C=c[o+1],I=c[o+2],A=c[a],T=c[a+1],N=c[a+2],me=Math.round(p),be=Math.round(v);let ye,Le,Ct,Z,ie,Ed,wd,Ad;for(let kt=me;kt<=be;kt++){if(kt<y){const lt=kt<p?0:(p-kt)/(p-y);ye=f-(f-g)*lt,Le=_-(_-w)*lt,Ct=b-(b-C)*lt,Z=E-(E-I)*lt}else{let lt;lt=kt>v?1:y===v?0:(y-kt)/(y-v),ye=g-(g-m)*lt,Le=w-(w-A)*lt,Ct=C-(C-T)*lt,Z=I-(I-N)*lt}let gt;gt=kt<p?0:kt>v?1:(p-kt)/(p-v),ie=f-(f-m)*gt,Ed=_-(_-A)*gt,wd=b-(b-T)*gt,Ad=E-(E-N)*gt;const Cd=Math.round(Math.min(ye,ie)),zr=Math.round(Math.max(ye,ie));let Ji=d*kt+4*Cd;for(let lt=Cd;lt<=zr;lt++)gt=(ye-lt)/(ye-ie),gt<0?gt=0:gt>1&&(gt=1),u[Ji++]=Le-(Le-Ed)*gt|0,u[Ji++]=Ct-(Ct-wd)*gt|0,u[Ji++]=Z-(Z-Ad)*gt|0,u[Ji++]=255}}function FG(n,e,t){const i=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)Zm(n,t,i[u],i[u+1],i[u+a],r[u],r[u+1],r[u+a]),Zm(n,t,i[u+a+1],i[u+1],i[u+a],r[u+a+1],r[u+1],r[u+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)Zm(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class jG extends Km{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},v=i.getCanvas("mesh",d+4,h+4,!1),_=v.context,b=_.createImageData(d,h);if(t){const w=b.data;for(let C=0,I=w.length;C<I;C+=4)w[C]=t[0],w[C+1]=t[1],w[C+2]=t[2],w[C+3]=255}for(const w of this._figures)FG(b,w,g);return _.putImageData(b,2,2),{canvas:v.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(e,t,i,r){let s;if(Ym(e,this._bbox),"Shading"===r)s=L.singularValueDecompose2dScale(Pe(e));else if(s=L.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=L.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,"Shading"===r?null:this._background,t.cachedCanvases);return"Shading"!==r&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class BG extends Km{getPattern(){return"hotpink"}}let HG=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(t,i,r,s,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(t){const i=this.operatorList,r=this.bbox,s=this.xstep,o=this.ystep,a=this.paintType,c=this.color,u=this.canvasGraphicsFactory;Ku("TilingType: "+this.tilingType);const d=r[0],h=r[1],f=r[2],p=r[3],g=L.singularValueDecompose2dScale(this.matrix),y=L.singularValueDecompose2dScale(this.baseTransform),m=[g[0]*y[0],g[1]*y[1]],v=this.getSizeAndScale(s,this.ctx.canvas.width,m[0]),_=this.getSizeAndScale(o,this.ctx.canvas.height,m[1]),b=t.cachedCanvases.getCanvas("pattern",v.size,_.size,!0),E=b.context,w=u.createCanvasGraphics(E);w.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(w,a,c);let C=d,I=h,A=f,T=p;return d<0&&(C=0,A+=Math.abs(d)),h<0&&(I=0,T+=Math.abs(h)),E.translate(-v.scale*C,-_.scale*I),w.transform(v.scale,0,0,_.scale,0,0),E.save(),this.clipBbox(w,C,I,A,T),w.baseTransform=Pe(w.ctx),w.executeOperatorList(i),w.endDrawing(),{canvas:b.canvas,scaleX:v.scale,scaleY:_.scale,offsetX:C,offsetY:I}}getSizeAndScale(t,i,r){t=Math.abs(t);const s=Math.max(n.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*r);return o>=s?o=s:r=o/t,{scale:r,size:o}}clipBbox(t,i,r,s,o){t.ctx.rect(i,r,s-i,o-r),t.current.updateRectMinMax(Pe(t.ctx),[i,r,s,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,r){const s=t.ctx,o=t.current;switch(i){case 1:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case 2:const l=L.makeHexColor(r[0],r[1],r[2]);s.fillStyle=l,s.strokeStyle=l,o.fillColor=l,o.strokeColor=l;break;default:throw new uG(`Unsupported paint type: ${i}`)}}getPattern(t,i,r,s){let o=r;"Shading"!==s&&(o=L.transform(o,i.baseTransform),this.matrix&&(o=L.transform(o,this.matrix)));const a=this.createPatternCanvas(i);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return n})();function dT({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Ut.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=i>>3,d=7&i,h=n.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<r;p++){for(const y=e+u;e<y;e++){const m=e<h?n[e]:255;t[f++]=128&m?c:l,t[f++]=64&m?c:l,t[f++]=32&m?c:l,t[f++]=16&m?c:l,t[f++]=8&m?c:l,t[f++]=4&m?c:l,t[f++]=2&m?c:l,t[f++]=1&m?c:l}if(0===d)continue;const g=e<h?n[e++]:255;for(let y=0;y<d;y++)t[f++]=g&1<<7-y?c:l}return{srcPos:e,destPos:f}}class WG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function td(n,e,t,i,r,s,o,a,l,c){const[u,d,h,f,p,g]=Pe(n);if(0===d&&0===h){const _=Math.round(o*u+p),E=Math.round(a*f+g),C=Math.abs(Math.round((o+l)*u+p)-_)||1,A=Math.abs(Math.round((a+c)*f+g)-E)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),_,E),n.drawImage(e,t,i,r,s,0,0,C,A),n.setTransform(u,d,h,f,p,g),[C,A]}if(0===u&&0===f){const _=Math.round(a*h+p),E=Math.round(o*d+g),C=Math.abs(Math.round((a+c)*h+p)-_)||1,A=Math.abs(Math.round((o+l)*d+g)-E)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,_,E),n.drawImage(e,t,i,r,s,0,0,A,C),n.setTransform(u,d,h,f,p,g),[A,C]}return n.drawImage(e,t,i,r,s,o,a,l,c),[Math.hypot(u,d)*l,Math.hypot(h,f)*c]}class mT{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=WI,this.textMatrixScale=1,this.fontMatrix=Pm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=L.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=L.applyTransform(t,e),r=L.applyTransform(t.slice(2),e),s=L.applyTransform([t[0],t[3]],e),o=L.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,t){L.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,o,a,l,c,u){const d=L.bezierBoundingBox(t,i,r,s,o,a,l,c,u);u||this.updateRectMinMax(e,d)}getPathBoundingBox(e="Fill",t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if("Stroke"===e){t||qe("Stroke bounding box must include transform.");const r=L.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=o,i[2]+=s,i[3]+=o}return i}updateClipFromPath(){const e=L.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e="Fill",t=null){return L.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function yT(n,e){if(typeof ImageData<"u"&&e instanceof ImageData)return void n.putImageData(e,0,0);const t=e.height,i=e.width,r=t%16,s=(t-r)/16,o=0===r?s:s+1,a=n.createImageData(i,16);let c,l=0;const u=e.data,d=a.data;let h,f,p,g;if(e.kind===qu.GRAYSCALE_1BPP){const y=u.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),v=m.length,_=i+7>>3,b=4294967295,E=Ut.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<s?16:r,c=0,f=0;f<p;f++){const w=y-l;let C=0;const I=w>_?i:8*w-7,A=-8&I;let T=0,N=0;for(;C<A;C+=8)N=u[l++],m[c++]=128&N?b:E,m[c++]=64&N?b:E,m[c++]=32&N?b:E,m[c++]=16&N?b:E,m[c++]=8&N?b:E,m[c++]=4&N?b:E,m[c++]=2&N?b:E,m[c++]=1&N?b:E;for(;C<I;C++)0===T&&(N=u[l++],T=128),m[c++]=N&T?b:E,T>>=1}for(;c<v;)m[c++]=0;n.putImageData(a,0,16*h)}}else if(e.kind===qu.RGBA_32BPP){for(f=0,g=16*i*4,h=0;h<s;h++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,f),f+=16;h<o&&(g=i*r*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,f))}else{if(e.kind!==qu.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(p=16,g=i*p,h=0;h<o;h++){for(h>=s&&(p=r,g=i*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,16*h)}}}function vT(n,e){if(e.bitmap)return void n.drawImage(e.bitmap,0,0);const t=e.height,i=e.width,r=t%16,s=(t-r)/16,o=0===r?s:s+1,a=n.createImageData(i,16);let l=0;const c=e.data,u=a.data;for(let d=0;d<o;d++){const h=d<s?16:r;({srcPos:l}=dT({src:c,srcPos:l,dest:u,width:i,height:h,nonBlackColor:0})),n.putImageData(a,0,16*d)}}function Qa(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)void 0!==n[i]&&(e[i]=n[i]);void 0!==n.setLineDash&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function nd(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",void 0!==n.setLineDash&&(n.setLineDash([]),n.lineDashOffset=0),!bt){const{filter:e}=n;"none"!==e&&""!==e&&(n.filter="none")}}function _T(n,e){if(e)return!0;const t=L.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*no.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const qG=["butt","round","square"],XG=["miter","round","bevel"],YG={},bT={};class io{constructor(e,t,i,r,s,{optionalContentConfig:o,markedContentStack:a=null},l,c){this.ctx=e,this.current=new mT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new WG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Pe(this.compositeCtx))}this.ctx.save(),nd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Pe(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const l=s.length;if(l===a)return a;const c=l-a>10&&"function"==typeof i,u=c?Date.now()+15:0;let d=0;const h=this.commonObjs,f=this.objs;let p;for(;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if(p=o[a],p!==Sn.dependency)this[p].apply(this,s[a]);else for(const g of s[a]){const y=g.startsWith("g_")?h:f;if(!y.has(g))return y.get(g,i),a}if(a++,a===l)return a;if(c&&++d>10){if(Date.now()>u)return i(),a;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width,r=e.height;let u,d,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,l=r,c="prescale1";for(;s>2&&a>1||o>2&&l>1;){let h=a,f=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(e,0,0,a,l,0,0,h,f),e=u.canvas,a=h,l=f,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=Pe(t);let l,c,u,d;if((e.bitmap||e.data)&&e.count>1){const I=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(I),l||(l=new Map,this._cachedBitmapsMap.set(I,l));const A=l.get(c);if(A&&!o)return{canvas:A,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])};u=A}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),vT(d.context,e));let h=L.transform(a,[1/i,0,0,-1/r,0,0]);h=L.transform(h,[1,0,0,1,0,-r]);const[f,p,g,y]=L.getAxialAlignedBoundingBox([0,0,i,r],h),m=Math.round(g-f)||1,v=Math.round(y-p)||1,_=this.cachedCanvases.getCanvas("fillCanvas",m,v),b=_.context,E=f,w=p;b.translate(-E,-w),b.transform(...h),u||(u=this._scaleImage(d.canvas,yi(b)),u=u.img,l&&o&&l.set(c,u)),b.imageSmoothingEnabled=_T(Pe(b),e.interpolate),td(b,u,0,0,u.width,u.height,0,0,i,r),b.globalCompositeOperation="source-in";const C=L.transform(yi(b),[1,0,0,1,-E,-w]);return b.fillStyle=o?s.getPattern(t,this,C,"Fill"):s,b.fillRect(0,0,i,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,_.canvas)),{canvas:_.canvas,offsetX:Math.round(E),offsetY:Math.round(w)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=qG[e]}setLineJoin(e){this.ctx.lineJoin=XG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...Pe(this.suspendedCtx)),Qa(this.suspendedCtx,s),function zG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,o,a,l){e.transform(i,r,s,o,a,l),this.__originalTransform(i,r,s,o,a,l)},n.setTransform=function(i,r,s,o,a,l){e.setTransform(i,r,s,o,a,l),this.__originalSetTransform(i,r,s,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,o,a){e.bezierCurveTo(t,i,r,s,o,a),this.__originalBezierCurveTo(t,i,r,s,o,a)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qa(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,t,i,r){const s=r[0],o=r[1],a=r[2]-s,l=r[3]-o;0===a||0===l||(this.genericComposeSMask(t.context,i,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,o,a,l,c,u,d){let h=e.canvas,f=l-u,p=c-d;if(o)if(f<0||p<0||f+i>h.width||p+r>h.height){const y=this.cachedCanvases.getCanvas("maskExtension",i,r),m=y.context;m.drawImage(h,-f,-p),o.some(v=>0!==v)&&(m.globalCompositeOperation="destination-atop",m.fillStyle=L.makeHexColor(...o),m.fillRect(0,0,i,r),m.globalCompositeOperation="source-over"),h=y.canvas,f=p=0}else if(o.some(y=>0!==y)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(f,p,i,r),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=L.makeHexColor(...o),e.fillRect(f,p,i,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,i,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(h,f,p,i,r,l,c,i,r),t.restore()}save(){this.inSMaskMode?(Qa(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Qa(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,o){this.ctx.transform(e,t,i,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let l,c,o=s.x,a=s.y;const u=Pe(r),d=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],h=d?i.slice(0):null;for(let f=0,p=0,g=e.length;f<g;f++)switch(0|e[f]){case Sn.rectangle:o=t[p++],a=t[p++];const y=t[p++],m=t[p++],v=o+y,_=a+m;r.moveTo(o,a),0===y||0===m?r.lineTo(v,_):(r.lineTo(v,a),r.lineTo(v,_),r.lineTo(o,_)),d||s.updateRectMinMax(u,[o,a,v,_]),r.closePath();break;case Sn.moveTo:o=t[p++],a=t[p++],r.moveTo(o,a),d||s.updatePathMinMax(u,o,a);break;case Sn.lineTo:o=t[p++],a=t[p++],r.lineTo(o,a),d||s.updatePathMinMax(u,o,a);break;case Sn.curveTo:l=o,c=a,o=t[p+4],a=t[p+5],r.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,a),s.updateCurvePathMinMax(u,l,c,t[p],t[p+1],t[p+2],t[p+3],o,a,h),p+=6;break;case Sn.curveTo2:l=o,c=a,r.bezierCurveTo(o,a,t[p],t[p+1],t[p+2],t[p+3]),s.updateCurvePathMinMax(u,l,c,o,a,t[p],t[p+1],t[p+2],t[p+3],h),o=t[p+2],a=t[p+3],p+=4;break;case Sn.curveTo3:l=o,c=a,o=t[p+2],a=t[p+3],r.bezierCurveTo(t[p],t[p+1],o,a,o,a),s.updateCurvePathMinMax(u,l,c,t[p],t[p+1],o,a,o,a,h),p+=4;break;case Sn.closePath:r.closePath()}d&&s.updateScalingPathMinMax(u,h),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,yi(t),"Stroke"),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor;let s=!1;this.current.patternFill&&(t.save(),t.fillStyle=i.getPattern(t,this,yi(t),"Fill"),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=YG}eoClip(){this.pendingClip=bT}beginText(){this.current.textMatrix=WI,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||Pm,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&se("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,o){this.current.textMatrix=[e,t,i,r,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const s=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=3&l,d=!!(4&l),h=o.patternFill&&!a.missingFile;let f;(a.disableFontFace||d||h)&&(f=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||h?(s.save(),s.translate(t,i),s.beginPath(),f(s,c),r&&s.setTransform(...r),(0===u||2===u)&&s.fill(),(1===u||2===u)&&s.stroke(),s.restore()):((0===u||2===u)&&s.fillText(e,t,i),(1===u||2===u)&&s.strokeText(e,t,i)),d&&(this.pendingTextPaths||=[]).push({transform:Pe(s),x:t,y:i,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return le(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(0===r)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,d=e.length,h=i.vertical,f=h?1:-1,p=i.defaultVMetrics,g=r*t.fontMatrix[0],y=0===t.textRenderingMode&&!i.disableFontFace&&!t.patternFill;let m;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),s.scale(u,c>0?-1:1),t.patternFill){s.save();const w=t.fillColor.getPattern(s,this,yi(s),"Fill");m=Pe(s),s.restore(),s.fillStyle=w}let v=t.lineWidth;const _=t.textMatrixScale;if(0===_||0===v){const w=3&t.textRenderingMode;(1===w||2===w)&&(v=this.getSinglePixelWidth())}else v/=_;if(1!==o&&(s.scale(o,o),v/=o),s.lineWidth=v,i.isInvalidPDFjsFont){const w=[];let C=0;for(const I of e)w.push(I.unicode),C+=I.width;return s.fillText(w.join(""),0,0),t.x+=C*g*u,s.restore(),void this.compose()}let E,b=0;for(E=0;E<d;++E){const w=e[E];if("number"==typeof w){b+=f*w*r/1e3;continue}let C=!1;const I=(w.isSpace?l:0)+a,A=w.fontChar,T=w.accent;let N,me,be=w.width;if(h){const Le=w.vmetric||p,Ct=-(w.vmetric?Le[1]:.5*be)*g;be=Le?-Le[0]:be,N=Ct/o,me=(b+Le[2]*g)/o}else N=b/o,me=0;if(i.remeasure&&be>0){const Le=1e3*s.measureText(A).width/r*o;if(be<Le&&this.isFontSubpixelAAEnabled){const Ct=be/Le;C=!0,s.save(),s.scale(Ct,1),N/=Ct}else be!==Le&&(N+=(be-Le)/2e3*r/o)}this.contentVisible&&(w.isInFont||i.missingFile)&&(y&&!T?s.fillText(A,N,me):(this.paintChar(A,N,me,m),T&&this.paintChar(T.fontChar,N+r*T.offset.x/o,me-r*T.offset.y/o,m))),b+=h?be*g-I*c:be*g+I*c,C&&s.restore()}h?t.y-=b:t.x+=b*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,d=i.fontMatrix||Pm,h=e.length;let p,g,y,m;if(3!==i.textRenderingMode&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(u,o),p=0;p<h;++p){if(g=e[p],"number"==typeof g){m=a*g*s/1e3,this.ctx.translate(m,0),i.x+=m*u;continue}const v=(g.isSpace?c:0)+l,_=r.charProcOperatorList[g.operatorListId];_?(this.contentVisible&&(this.processingType3=g,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(_),this.restore()),y=L.applyTransform([g.width,0],d)[0]*s+v,t.translate(y,0),i.x+=y*u):se(`Type3 character "${g.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,o){this.ctx.rect(i,r,s-i,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const i=e[1],r=this.baseTransform||Pe(this.ctx);t=new HG(e,i,this.ctx,{createCanvasGraphics:o=>new io(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=L.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=L.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=function VG(n){switch(n[0]){case"RadialAxial":return new LG(n);case"Mesh":return new jG(n);case"Dummy":return new BG}throw new Error(`Unknown IR type: ${n[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,yi(t),"Shading");const r=yi(t);if(r){const{width:s,height:o}=t.canvas,[a,l,c,u]=L.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){qe("Should not call beginInlineImage")}beginImageData(){qe("Should not call beginImageData")}paintFormXObjectBegin(e,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Pe(this.ctx),t)&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.current.updateRectMinMax(Pe(this.ctx),t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ku("TODO: Support non-isolated groups."),e.knockout&&se("Knockout groups not supported.");const i=Pe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=L.getAxialAlignedBoundingBox(e.bbox,Pe(t));r=L.intersect(r,[0,0,t.canvas.width,t.canvas.height])||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),c=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-o,-a),h.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Qa(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Pe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=L.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(this.#e(),nd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=L.singularValueDecompose2dScale(Pe(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),nd(this.ctx)}else nd(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new mT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const i=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function GG(n){const{width:e,height:t}=n;if(e>1e3||t>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a,l,c,o=new Uint8Array(s*(t+1));const u=e+7&-8;let d=new Uint8Array(u*t),h=0;for(const m of n.data){let v=128;for(;v>0;)d[h++]=m&v?0:255,v>>=1}let f=0;for(h=0,0!==d[h]&&(o[0]=1,++f),l=1;l<e;l++)d[h]!==d[h+1]&&(o[l]=d[h]?2:1,++f),h++;for(0!==d[h]&&(o[l]=2,++f),a=1;a<t;a++){h=a*u,c=a*s,d[h-u]!==d[h]&&(o[c]=d[h]?1:8,++f);let m=(d[h]?4:0)+(d[h-u]?8:0);for(l=1;l<e;l++)m=(m>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),r[m]&&(o[c+l]=r[m],++f),h++;if(d[h-u]!==d[h]&&(o[c+l]=d[h]?2:4,++f),f>1e3)return null}for(h=u*(t-1),c=a*s,0!==d[h]&&(o[c]=8,++f),l=1;l<e;l++)d[h]!==d[h+1]&&(o[c+l]=d[h]?4:8,++f),h++;if(0!==d[h]&&(o[c+l]=4,++f),f>1e3)return null;const p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(a=0;f&&a<=t;a++){let m=a*s;const v=m+e;for(;m<v&&!o[m];)m++;if(m===v)continue;g.moveTo(m%s,a);const _=m;let b=o[m];do{const E=p[b];do{m+=E}while(!o[m]);const w=o[m];5!==w&&10!==w?(b=w,o[m]=0):(b=w&51*b>>4,o[m]&=b>>2|b<<2),g.lineTo(m%s,m/s|0),o[m]||--f}while(_!==m);--a}return d=null,o=null,function(m){m.save(),m.scale(1/e,-1/t),m.translate(0,-t),m.fill(g),m.beginPath(),m.restore()}}(e)),r.compiled))return void r.compiled(i);const s=this._createMaskCanvas(e),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=Pe(a);a.transform(t,i,r,s,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){const h=L.transform(l,[t,i,r,s,o[u],o[u+1]]),[f,p]=L.applyTransform([0,0],h);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save(),vT(d,this.getObject(o,s)),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,yi(t),"Fill"):i,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),td(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):se("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void se("Dependent image isn't ready yet");const o=s.width,a=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[t,0,0,i,r[c],r[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!bt){const{filter:a}=r;"none"!==a&&""!==a&&(r.filter="none")}let s;if(r.scale(1/t,-1/i),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;yT(l,e),s=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(s,yi(r));r.imageSmoothingEnabled=_T(Pe(r),e.interpolate),td(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const l=this.cachedCanvases.getCanvas("inlineImage",e.width,e.height).context;yT(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),td(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){this.markedContentStack.push("OC"===e?{visible:this.optionalContentConfig.isVisible(t)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===bT?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pe(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let o,a;if(0===i&&0===r){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(0===e)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(0===e)o=1/l,a=1/c;else{const u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(t*s-i*r),c=Math.hypot(t,i),u=Math.hypot(r,s);if(0===e)o=u/l,a=c/l;else{const d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,1===r&&1===s)return void t.stroke();const o=t.getLineDash();if(e&&t.save(),t.scale(r,s),o.length>0){const a=Math.max(r,s);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Sn)void 0!==io.prototype[n]&&(io.prototype[Sn[n]]=io.prototype[n]);class Ja{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#t=e}}function tn(n){switch(n instanceof Error||"object"==typeof n&&null!==n||qe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Fr(n.message);case"MissingPDFException":return new Lr(n.message);case"PasswordException":return new Nm(n.message,n.code);case"UnexpectedResponseException":return new Zu(n.message,n.status);case"UnknownErrorException":return new Om(n.message,n.details);default:return new Om(n.message,n.toString())}}class el{constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const s=r.data;if(s.targetName!==this.sourceName)return;if(s.stream)return void this.#t(s);if(s.callback){const a=s.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],1===s.callback)l.resolve(s.data);else{if(2!==s.callback)throw new Error("Unexpected callback case");l.reject(tn(s.reason))}return}const o=this.actionHandler[s.action];if(!o)throw new Error(`Unknown action from worker: ${s.action}`);if(s.callbackId){const a=this.sourceName,l=s.sourceName;new Promise(function(c){c(o(s.data))}).then(function(c){i.postMessage({sourceName:a,targetName:l,callback:1,callbackId:s.callbackId,data:c})},function(c){i.postMessage({sourceName:a,targetName:l,callback:2,callbackId:s.callbackId,reason:tn(c)})})}else s.streamId?this.#e(s):o(s.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},r),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:6,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{ot(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:1,streamId:s,reason:tn(c)}),u.promise}},i)}#e(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:4,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:3,streamId:t}),delete o.streamSinks[t])},error(c){ot(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:5,streamId:t,reason:tn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:8,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:8,streamId:t,reason:tn(c)})})}#t(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case 8:e.success?o.startCall.resolve():o.startCall.reject(tn(e.reason));break;case 7:e.success?o.pullCall.resolve():o.pullCall.reject(tn(e.reason));break;case 6:if(!a){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){l(a.onPull?.())}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,reason:tn(l)})});break;case 4:if(ot(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case 3:if(ot(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#n(o,t);break;case 5:ot(o,"error should have stream controller"),o.controller.error(tn(e.reason)),this.#n(o,t);break;case 2:e.success?o.cancelCall.resolve():o.cancelCall.reject(tn(e.reason)),this.#n(o,t);break;case 1:if(!a)break;new Promise(function(l){l(a.onCancel?.(tn(e.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:2,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:2,streamId:t,reason:tn(l)})}),a.sinkCapability.reject(tn(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#n(e,t){var i=this;return x(function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete i.streamControllers[t]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class KG{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return km(this.#e)}has(e){return this.#e.has(e)}}const Zi=Symbol("INTERNAL");class ZG{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:i,usage:r}){this.#e=!!(2&e),this.#t=!!(4&e),this.name=t,this.intent=i,this.usage=r}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?"OFF"!==t?.viewState:!this.#t||"OFF"!==e?.printState}_setVisible(e,t,i=!1){e!==Zi&&qe("Internal method `_setVisible` called."),this.#n=i,this.#i=t}}class QG{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=2){if(this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const i of e.groups)this.#t.set(i.id,new ZG(t,i));if("OFF"===e.baseState)for(const i of this.#t.values())i._setVisible(Zi,!1);for(const i of e.on)this.#t.get(i)._setVisible(Zi,!0);for(const i of e.off)this.#t.get(i)._setVisible(Zi,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=this.#r(s);else{if(!this.#t.has(s))return se(`Optional content group not found: ${s}`),!0;o=this.#t.get(s).visible}switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===i}isVisible(e){if(0===this.#t.size)return!0;if(!e)return Ku("Optional content group not defined."),!0;if("OCG"===e.type)return this.#t.has(e.id)?this.#t.get(e.id).visible:(se(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#r(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return se(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return se(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return se(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return se(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return se(`Unknown optional content policy ${e.policy}.`),!0}return se(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const i=this.#t.get(e);i?(i._setVisible(Zi,!!t,!0),this.#e=null):se(`Optional content group not found: ${e}`)}setOCGState({state:e}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#t.get(r);if(s)switch(i){case"ON":s._setVisible(Zi,!0);break;case"OFF":s._setVisible(Zi,!1);break;case"Toggle":s._setVisible(Zi,!s.visible)}}this.#e=null}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?km(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(null!==this.#e)return this.#e;const e=new aT;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}}class JG{constructor(e,{disableRange:t=!1,disableStream:i=!1}){ot(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):ot(this._rangeReaders.some(function(s){return s._begin===e&&(s._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ot(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new e8(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new t8(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class e8{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Hm(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return x(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class t8{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return x(function*(){if(e._queuedChunk){const i=e._queuedChunk;return e._queuedChunk=null,{value:i,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Qm({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||"bytes"!==n("Accept-Ranges")||"identity"!==(n("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function Jm(n){const e=n("Content-Disposition");if(e){let t=function n8(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=function o(u){const d=[];let h;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(h=f.exec(u));){let[,g,y,m]=h;if(g=parseInt(g,10),g in d){if(0===g)break}else d[g]=[y,m]}const p=[];for(let g=0;g<d.length&&g in d;++g){let[y,m]=d[g];m=a(m),y&&(m=unescape(m),0===g&&(m=l(m))),p.push(m)}return p.join("")}(n),t)return s(c(t));if(t=i("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),s(u)}function i(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),f=Ga(d);d=h.decode(f),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),e&&(u=r("iso-8859-1",u))),u}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const f=d[h].indexOf('"');-1!==f&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");return-1===d?u:r(u.slice(0,d),u.slice(d+1).replace(/^[^']*'/,""))}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if("q"===f||"Q"===f)return r(h,p=(p=p.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(g,y){return String.fromCharCode(parseInt(y,16))}));try{p=atob(p)}catch{}return r(h,p)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Hm(t))return t}return null}function rd(n,e){return 404===n||0===n&&e.startsWith("file:")?new Lr('Missing PDF "'+e+'".'):new Zu(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function ET(n){return 200===n||206===n}function wT(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function AT(n){const e=new Headers;for(const t in n){const i=n[t];void 0!==i&&e.append(t,i)}return e}function CT(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(se(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class DT{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ot(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new i8(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new r8(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class i8{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=AT(this._stream.httpHeaders);const i=t.url;fetch(i,wT(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!ET(r.status))throw rd(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const s=l=>r.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=Qm({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Jm(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return x(function*(){yield e._headersCapability.promise;const{value:t,done:i}=yield e._reader.read();return i?{value:t,done:i}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:CT(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class r8{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=AT(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const s=r.url;fetch(s,wT(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!ET(o.status))throw rd(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return x(function*(){yield e._readCapability.promise;const{value:t,done:i}=yield e._reader.read();return i?{value:t,done:i}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded}),{value:CT(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class o8{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const o=this.httpHeaders[s];void 0!==o&&t.setRequestHeader(s,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){const i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==r.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void i.onError?.(r.status);const s=r.status||200;if((200!==s||206!==i.expectedStatus)&&s!==i.expectedStatus)return void i.onError?.(r.status);const a=function s8(n){const e=n.response;return"string"!=typeof e?e:Ga(e).buffer}(r);if(206===s){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):i.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class a8{constructor(e){this._source=e,this._manager=new o8(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ot(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l8(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new c8(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class l8{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=o=>t.getResponseHeader(o),{allowRangeRequests:r,suggestedLength:s}=Qm({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Jm(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=rd(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var e=this;return x(function*(){if(e._storedError)throw e._storedError;if(e._cachedChunks.length>0)return{value:e._cachedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c8{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=rd(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){var e=this;return x(function*(){if(e._storedError)throw e._storedError;if(null!==e._queuedChunk){const i=e._queuedChunk;return e._queuedChunk=null,{value:i,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const u8=/^[a-z][a-z0-9\-+.]+:/i;function ST(n,e,t){return"http:"===n.protocol?Ki.get("http").request(n,{headers:e},t):Ki.get("https").request(n,{headers:e},t)}class h8{constructor(e){this.source=e,this.url=function d8(n){if(u8.test(n))return new URL(n);const e=Ki.get("url");return new URL(e.pathToFileURL(n))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ot(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g8(this):new f8(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new m8(this,e,t):new p8(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class IT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return x(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class TT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return x(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class f8 extends IT{constructor(e){super(e),this._request=ST(this._url,e.httpHeaders,i=>{if(404===i.statusCode){const a=new Lr(`Missing PDF "${this._url}".`);return this._storedError=a,void this._headersCapability.reject(a)}this._headersCapability.resolve(),this._setReadableStream(i);const r=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:s,suggestedLength:o}=Qm({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=Jm(r)}),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class p8 extends TT{constructor(e,t,i){super(e),this._httpHeaders={};for(const s in e.httpHeaders){const o=e.httpHeaders[s];void 0!==o&&(this._httpHeaders[s]=o)}this._httpHeaders.Range=`bytes=${t}-${i-1}`,this._request=ST(this._url,this._httpHeaders,s=>{if(404!==s.statusCode)this._setReadableStream(s);else{const o=new Lr(`Missing PDF "${this._url}".`);this._storedError=o}}),this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class g8 extends IT{constructor(e){super(e);const t=Ki.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{"ENOENT"===i.code&&(i=new Lr(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class m8 extends TT{constructor(e,t,i){super(e);const r=Ki.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}class nn{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#l=0;#d=null;#c=null;#u=0;#o=0;#h=Object.create(null);#p=[];#f=null;#g=[];#y=new WeakMap;#m=null;static#v=new Map;static#b=new Map;static#w=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#f=e;else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');this.#f=new ReadableStream({start(l){l.enqueue(e),l.close()}})}this.#t=this.#c=t,this.#o=i.scale*(globalThis.devicePixelRatio||1),this.#u=i.rotation,this.#s={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=i.rawDims;this.#m=[1,0,0,-1,-o,a+s],this.#l=r,this.#a=s,nn.#T(),jr(t,i),this.#e.promise.catch(()=>{}).then(()=>{nn.#E.delete(this),this.#s=null,this.#h=null})}render(){const e=()=>{this.#d.read().then(({value:t,done:i})=>{i?this.#e.resolve():(this.#r??=t.lang,Object.assign(this.#h,t.styles),this.#C(t.items),e())},this.#e.reject)};return this.#d=this.#f.getReader(),nn.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==this.#u&&(t?.(),this.#u=r,jr(this.#c,{rotation:r})),i!==this.#o){t?.(),this.#o=i;const s={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:nn.#A(this.#r)};for(const o of this.#g)s.properties=this.#y.get(o),s.div=o,this.#I(s)}}cancel(){const e=new Fr("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#C(e){if(this.#n)return;this.#s.ctx??=nn.#A(this.#r);const t=this.#g,i=this.#p;for(const r of e){if(t.length>1e5)return se("Ignoring additional textDivs for performance reasons."),void(this.#n=!0);if(void 0!==r.str)i.push(r.str),this.#x(r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),null!==r.id&&this.#t.setAttribute("id",`${r.id}`),s.append(this.#t)}else"endMarkedContent"===r.type&&(this.#t=this.#t.parentNode)}}#x(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);const r=L.transform(this.#m,e.transform);let s=Math.atan2(r[1],r[0]);const o=this.#h[e.fontName];o.vertical&&(s+=Math.PI/2);const a=this.#i&&o.fontSubstitution||o.fontFamily,l=Math.hypot(r[2],r[3]),c=l*nn.#S(a,this.#r);let u,d;0===s?(u=r[4],d=r[5]-c):(u=r[4]+c*Math.sin(s),d=r[5]-c*Math.cos(s));const h="calc(var(--scale-factor)*",f=t.style;this.#t===this.#c?(f.left=`${(100*u/this.#l).toFixed(2)}%`,f.top=`${(100*d/this.#a).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(nn.#w*l).toFixed(2)}px)`,f.fontFamily=a,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),0!==s&&(i.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);g!==y&&Math.max(g,y)/Math.min(g,y)>1.5&&(p=!0)}if(p&&(i.canvasWidth=o.vertical?e.height:e.width),this.#y.set(t,i),this.#s.div=t,this.#s.properties=i,this.#I(this.#s),i.hasText&&this.#t.append(t),i.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#I(e){const{div:t,properties:i,ctx:r,prevFontSize:s,prevFontFamily:o}=e,{style:a}=t;let l="";if(nn.#w>1&&(l=`scale(${1/nn.#w})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:d}=i;(s!==d||o!==c)&&(r.font=`${d*this.#o}px ${c}`,e.prevFontSize=d,e.prevFontFamily=c);const{width:h}=r.measureText(t.textContent);h>0&&(l=`scaleX(${u*this.#o/h}) ${l}`)}0!==i.angle&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#E.size>0)){this.#v.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#A(e=null){let t=this.#b.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t)}return t}static#T(){if(null!==this.#w)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#S(e,t){const i=this.#v.get(e);if(i)return i;const r=this.#A(t),s=r.font;r.canvas.width=r.canvas.height=30,r.font=`30px ${e}`;const o=r.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const d=a/(a+l);return this.#v.set(e,d),r.canvas.width=r.canvas.height=0,r.font=s,d}r.strokeStyle="red",r.clearRect(0,0,30,30),r.strokeText("g",0,0);let c=r.getImageData(0,0,30,30).data;l=0;for(let d=c.length-1-3;d>=0;d-=4)if(c[d]>0){l=Math.ceil(d/4/30);break}r.clearRect(0,0,30,30),r.strokeText("A",0,30),c=r.getImageData(0,0,30,30).data,a=0;for(let d=0,h=c.length;d<h;d+=4)if(c[d]>0){a=30-Math.floor(d/4/30);break}r.canvas.width=r.canvas.height=0,r.font=s;const u=a?a/(a+l):.8;return this.#v.set(e,u),u}}class tl{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};return function r(s){if(!s)return;let o=null;const a=s.name;if("#text"===a)o=s.value;else{if(!tl.shouldBuildText(a))return;s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value)}if(null!==o&&t.push({str:o}),s.children)for(const l of s.children)r(l)}(e),i}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const _8=65536,w8=bt?class NG extends ZI{_createCanvas(e,t){return Ki.get("canvas").createCanvas(e,t)}}:class bG extends ZI{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}},A8=bt?class OG extends QI{_fetchData(e,t){return cT(e).then(i=>({cMapData:i,compressionType:t}))}}:eT,C8=bt?class RG extends KI{}:class _G extends KI{#e;#t;#n;#i;#r;#s;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}={}){super(),this.#i=e,this.#r=t}get#l(){return this.#t||=new Map}get#d(){return this.#s||=new Map}get#c(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#r.createElementNS(mi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#r.createElementNS(mi,"defs"),e.append(i),i.append(this.#n),this.#r.body.append(e)}return this.#n}#u(e){if(1===e.length){const l=e[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const u=c.join(",");return[u,u,u]}const[t,i,r]=e,s=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,o[l]=i[l]/255,a[l]=r[l]/255;return[s.join(","),o.join(","),a.join(",")]}#o(e){if(void 0===this.#e){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(Ju(t)?se('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#l.get(e);if(t)return t;const[i,r,s]=this.#u(e),o=1===e.length?i:`${i}${r}${s}`;if(t=this.#l.get(o),t)return this.#l.set(e,t),t;const a=`g_${this.#i}_transfer_map_${this.#a++}`,l=this.#o(a);this.#l.set(e,l),this.#l.set(o,l);const c=this.#f(a);return this.#y(i,r,s,c),l}addHCMFilter(e,t){const i=`${e}-${t}`,r="base";let s=this.#d.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#d.set(r,s)),!e||!t))return s.url;const o=this.#v(e);e=L.makeHexColor(...o);const a=this.#v(t);if(t=L.makeHexColor(...a),this.#c.style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const l=new Array(256);for(let f=0;f<=255;f++){const p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#i}_hcm_filter`,d=s.filter=this.#f(u);this.#y(c,c,c,d),this.#p(d);const h=(f,p)=>{const g=o[f]/255,y=a[f]/255,m=new Array(p+1);for(let v=0;v<=p;v++)m[v]=g+v/p*(y-g);return m.join(",")};return this.#y(h(0,5),h(1,5),h(2,5),d),s.url=this.#o(u),s.url}addAlphaFilter(e){let t=this.#l.get(e);if(t)return t;const[i]=this.#u([e]),r=`alpha_${i}`;if(t=this.#l.get(r),t)return this.#l.set(e,t),t;const s=`g_${this.#i}_alpha_map_${this.#a++}`,o=this.#o(s);this.#l.set(e,o),this.#l.set(r,o);const a=this.#f(s);return this.#m(i,a),o}addLuminosityFilter(e){let i,r,t=this.#l.get(e||"luminosity");if(t)return t;if(e?([i]=this.#u([e]),r=`luminosity_${i}`):r="luminosity",t=this.#l.get(r),t)return this.#l.set(e,t),t;const s=`g_${this.#i}_luminosity_map_${this.#a++}`,o=this.#o(s);this.#l.set(e,o),this.#l.set(r,o);const a=this.#f(s);return this.#h(a),e&&this.#m(i,a),o}addHighlightHCMFilter(e,t,i,r,s){const o=`${t}-${i}-${r}-${s}`;let a=this.#d.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#d.set(e,a)),!t||!i))return a.url;const[l,c]=[t,i].map(this.#v.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[r,s].map(this.#v.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#c.style.color="";const p=(m,v,_)=>{const b=new Array(256),E=(d-u)/_,w=m/255,C=(v-m)/(255*_);let I=0;for(let A=0;A<=_;A++){const T=Math.round(u+A*E),N=w+A*C;for(let me=I;me<=T;me++)b[me]=N;I=T+1}for(let A=I;A<256;A++)b[A]=b[I-1];return b.join(",")},g=`g_${this.#i}_hcm_${e}_filter`,y=a.filter=this.#f(g);return this.#p(y),this.#y(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),y),a.url=this.#o(g),a.url}destroy(e=!1){e&&0!==this.#d.size||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#a=0)}#h(e){const t=this.#r.createElementNS(mi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(mi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#r.createElementNS(mi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#g(e,t,i){const r=this.#r.createElementNS(mi,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#y(e,t,i,r){const s=this.#r.createElementNS(mi,"feComponentTransfer");r.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",i)}#m(e,t){const i=this.#r.createElementNS(mi,"feComponentTransfer");t.append(i),this.#g(i,"feFuncA",e)}#v(e){return this.#c.style.color=e,Um(getComputedStyle(this.#c).getPropertyValue("color"))}},D8=bt?class kG extends JI{_fetchData(e){return cT(e)}}:tT;function S8(n={}){"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new ny,{docId:t}=e,i=n.url?function I8(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(bt&&"string"==typeof n)return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,r=n.data?function T8(n){if(bt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if("string"==typeof n)return Ga(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||"object"==typeof n&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,s=n.httpHeaders||null,o=!0===n.withCredentials,a=n.password??null,l=n.range instanceof xT?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:_8;let u=n.worker instanceof ct?n.worker:null;const d=n.verbosity,h="string"!=typeof n.docBaseUrl||Ju(n.docBaseUrl)?null:n.docBaseUrl,f="string"==typeof n.cMapUrl?n.cMapUrl:null,p=!1!==n.cMapPacked,g=n.CMapReaderFactory||A8,y="string"==typeof n.standardFontDataUrl?n.standardFontDataUrl:null,m=n.StandardFontDataFactory||D8,v=!0!==n.stopAtErrors,_=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=!1!==n.isEvalSupported,E="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!bt,w=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C="boolean"==typeof n.disableFontFace?n.disableFontFace:bt,I=!0===n.fontExtraProperties,A=!0===n.enableXfa,T=n.ownerDocument||globalThis.document,N=!0===n.disableRange,me=!0===n.disableStream,be=!0===n.disableAutoFetch,ye=!0===n.pdfBug,Le=!0===n.enableHWA,Ct=l?l.length:n.length??NaN,Z="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!bt&&!C,ie="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:g===eT&&m===tT&&f&&y&&Xa(f,document.baseURI)&&Xa(y,document.baseURI),Ed=n.canvasFactory||new w8({ownerDocument:T,enableHWA:Le}),wd=n.filterFactory||new C8({docId:t,ownerDocument:T});!function oG(n){Number.isInteger(n)&&(Yu=n)}(d);const kt={canvasFactory:Ed,filterFactory:wd};if(ie||(kt.cMapReaderFactory=new g({baseUrl:f,isCompressed:p}),kt.standardFontDataFactory=new m({baseUrl:y})),!u){const zr={verbosity:d,port:Ja.workerPort};u=zr.port?ct.fromPort(zr):new ct(zr),e._worker=u}const gt={docId:t,apiVersion:"4.6.82",data:r,password:a,disableAutoFetch:be,rangeChunkSize:c,length:Ct,docBaseUrl:h,enableXfa:A,evaluatorOptions:{maxImageSize:_,disableFontFace:C,ignoreErrors:v,isEvalSupported:b,isOffscreenCanvasSupported:E,canvasMaxAreaInBytes:w,fontExtraProperties:I,useSystemFonts:Z,cMapUrl:ie?f:null,standardFontDataUrl:ie?y:null}},Cd={disableFontFace:C,fontExtraProperties:I,ownerDocument:T,pdfBug:ye,styleElement:null,loadingParams:{disableAutoFetch:be,enableXfa:A}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const zr=u.messageHandler.sendWithPromise("GetDocRequest",gt,r?[r.buffer]:null);let Ji;if(l)Ji=new JG(l,{disableRange:N,disableStream:me});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");Ai={url:i,length:Ct,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:N,disableStream:me},Ji=bt?typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Xa(Ai.url)?new DT(Ai):new h8(Ai):Xa(Ai.url)?new DT(Ai):new a8(Ai)}var Ai;return zr.then(lt=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ai=new el(t,lt,u.port),qM=new R8(Ai,e,Ji,Cd,kt);e._transport=qM,Ai.send("Ready",null)})}).catch(e._capability.reject),e}function MT(n){return"object"==typeof n&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class ny{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+ny.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var e=this;return x(function*(){e.destroyed=!0;try{e._worker?.port&&(e._worker._pendingDestroy=!0),yield e._transport?.destroy()}catch(t){throw e._worker?.port&&delete e._worker._pendingDestroy,t}e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}}class xT{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){qe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class M8{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class x8{#e=null;#t=!1;constructor(e,t,i,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new nT:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new PT,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new qa({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return le(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var e=this;return x(function*(){return e._transport._htmlForXfa?.children[e._pageIndex]||null})()}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=Xi.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(i,r,u,d),{renderingIntent:f,cacheKey:p}=h;this.#t=!1,this.#i(),a||=this._transport.getOptionalContentConfig(f);let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const y=!!(4&f);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const m=b=>{g.renderTasks.delete(v),(this._maybeCleanupAfterRender||y)&&(this.#t=!0),this.#n(!y),b?(v.capability.reject(b),this._abortOperatorList({intentState:g,reason:b instanceof Error?b:new Error(b)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new ro({callback:m,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(v);const _=v.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([b,E])=>{if(this.destroyed)m();else{if(this._stats?.time("Rendering"),!(E.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:b,optionalContentConfig:E}),v.operatorListChanged()}}).catch(m),_}getOperatorList({intent:e="display",annotationMode:t=Xi.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){const o=this._transport.getRenderingIntent(e,t,i,r,!0);let l,a=this._intentStates.get(o.cacheKey);return a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a)),a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:r=>r.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>tl.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};!function s(){o.read().then(function({value:l,done:c}){c?i(a):(a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),s())},r)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new nT),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:h})=>{h?c.streamReader=null:this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const h of c.renderTasks)h.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else{if(!c.opListReadCapability)throw d;c.opListReadCapability.reject(d)}}})};u()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Vm){let r=100;return t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r))}}if(e.streamReader.cancel(new Fr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class P8{#e=new Set;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const r of this.#e)r.call(this,i)})}addEventListener(e,t){this.#e.add(t)}removeEventListener(e,t){this.#e.delete(t)}terminate(){this.#e.clear()}}class ct{static#e=0;static#t=!1;static#n;static#i=(()=>{bt&&(this.#t=!0,Ja.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||"null"===i.origin)return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"}))})();constructor({name:e=null,port:t=null,verbosity:i=aG()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(ct.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(ct.#n||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return bt?Promise.all([Ki.promise,this._readyCapability.promise]):this._readyCapability.promise}#r(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new el("main","worker",e),this._messageHandler.on("ready",function(){}),this.#r()}_initialize(){if(ct.#t||ct.#s)return void this._setupFakeWorker();let{workerSrc:e}=ct;try{ct._isSameOrigin(window.location.href,e)||(e=ct._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new el("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",a=>{s.abort(),!this.destroyed&&a?(this._messageHandler=i,this._port=t,this._webWorker=t,this.#r()):r()}),i.on("ready",a=>{if(s.abort(),this.destroyed)r();else try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};return void o()}catch{Ku("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){ct.#t||(se("Setting up fake worker."),ct.#t=!0),ct._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new P8;this._port=t;const i="fake"+ct.#e++,r=new el(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new el(i,i+"_worker",t),this.#r()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ct.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ct(e)}static get workerSrc(){if(Ja.workerSrc)return Ja.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var e=this;return le(this,"_setupFakeWorkerGlobal",function(){var i=x(function*(){return e.#s?e.#s:(yield import(e.workerSrc)).WorkerMessageHandler});return function(){return i.apply(this,arguments)}}()())}}class R8{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#r=null;constructor(e,t,i,r,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PT,this.fontLoader=new xG({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){const i=this.#e.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return le(this,"annotationStorage",new Gm)}getRenderingIntent(e,t=Xi.ENABLE,i=null,r=!1,s=!1){let o=2,a=Wm;switch(e){case"any":o=1;break;case"display":break;case"print":o=4;break;default:se(`getRenderingIntent - invalid intent: ${e}`)}const l=4&o&&i instanceof lT?i:this.annotationStorage;switch(t){case Xi.DISABLE:o+=64;break;case Xi.ENABLE:break;case Xi.ENABLE_FORMS:o+=16;break;case Xi.ENABLE_STORAGE:o+=32,a=l.serializable;break;default:se(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=128),s&&(o+=256);const{ids:c,hash:u}=l.modifiedIds;return{renderingIntent:o,cacheKey:[o,a.hash,u].join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),nn.cleanup(),this._networkStream?.cancelAllRequests(new Fr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{ot(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){o?r.close():(ot(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s]))}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",i=>{const r=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then(()=>{(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),s.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),r.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(i,r)=>{ot(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);s?(r.onPull=()=>{s.read().then(function({value:o,done:a}){a?r.close():(ot(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o]))}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}):r.close()}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new M8(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new Nm(i.message,i.code);break;case"InvalidPDFException":r=new GI(i.message);break;case"MissingPDFException":r=new Lr(i.message);break;case"UnexpectedResponseException":r=new Zu(i.message,i.status);break;case"UnknownErrorException":r=new Om(i.message,i.details);break;default:qe("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(this.#r=Promise.withResolvers(),t.onPassword){const r=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};try{t.onPassword(r,i.code)}catch(s){this.#r.reject(s)}}else this.#r.reject(new Nm(i.message,i.code));return this.#r.promise}),e.on("DataLoaded",i=>{t.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{this.destroyed||this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:o,fontExtraProperties:a,pdfBug:l}=this._params;if("error"in s){const h=s.error;se(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const c=l&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new PG(s,{disableFontFace:o,inspectFont:c});this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a&&u.data&&(u.data=null),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:d}=s;ot(d,"The imageRef must be defined.");for(const h of this.#t.values())for(const[,f]of h.objs)if(f?.ref===d)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,o])=>{if(this.destroyed)return;const a=this.#t.get(r);if(!a.objs.has(i)){if(0===a._intentStates.size)return void o?.bitmap?.close();switch(s){case"Image":a.objs.resolve(i,o),o?.dataLen>1e7&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{this.destroyed||t.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#n.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);const o=new x8(t,s,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#n.set(t,r),r}getPageIndex(e){return MT(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new QG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new KG(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){var t=this;return x(function*(){if(!t.destroyed){yield t.messageHandler.sendWithPromise("Cleanup",null);for(const i of t.#t.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);t.commonObjs.clear(),e||t.fontLoader.clear(),t.#e.clear(),t.filterFactory.destroy(!0),nn.cleanup()}})()}cachedPageNumber(e){return MT(e)?this.#i.get(0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`)??null:null}}const sd=Symbol("INITIAL_DATA");class PT{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:sd}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const i=this.#e[e];if(!i||i.data===sd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==sd}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==sd&&(yield[e,t])}}}class N8{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class ro{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new N8(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(ro.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ro.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:o}=this.params;this.gfx=new io(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),ro.#t.delete(this._canvas),this.callback(e||new Vm(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return x(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),ro.#t.delete(e._canvas),e.callback())))})()}}const O8="4.6.82",k8="9b541910f";function RT(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}function nl(n){return Math.max(0,Math.min(255,255*n))}class NT{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=nl(e),e,e]}static G_HTML([e]){const t=RT(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(nl)}static RGB_HTML(e){return`#${e.map(RT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[nl(1-Math.min(1,e+r)),nl(1-Math.min(1,i+r)),nl(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,o=1-i;return["CMYK",r,s,o,Math.min(r,s,o)]}}class OT{static setupStorage(e,t,i,r,s){const o=r.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==o.value&&(e.textContent=o.value),"print"===s)break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.getAttribute(a.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==o.value&&e.setAttribute("value",o.value),"print"===s)break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(null!==o.value){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options;r.setValue(t,{value:-1===l.selectedIndex?"":l[l.selectedIndex].value})})}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${r}`);for(const[l,c]of Object.entries(o))if(null!=c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const a="richText"!==s,l=e.div;if(l.append(o),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(0===r.children.length){if(r.value){const d=document.createTextNode(r.value);o.append(d),a&&tl.shouldBuildText(r.name)&&c.push(d)}return{textDivs:c}}const u=[[r,-1,o]];for(;u.length>0;){const[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}const p=d.children[++u.at(-1)[1]];if(null===p)continue;const{name:g}=p;if("#text"===g){const m=document.createTextNode(p.value);c.push(m),f.append(m);continue}const y=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(y),p.attributes&&this.setAttributes({html:y,element:p,storage:t,intent:s,linkService:i}),p.children?.length>0)u.push([p,-1,y]);else if(p.value){const m=document.createTextNode(p.value);a&&tl.shouldBuildText(g)&&c.push(m),y.append(m)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const il=1e3,Br=new WeakSet;function vi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class F8{static create(e){switch(e.data.annotationType){case 2:return new kT(e);case 1:return new j8(e);case 20:switch(e.data.fieldType){case"Tx":return new B8(e);case"Btn":return e.data.radioButton?new LT(e):e.data.checkBox?new H8(e):new U8(e);case"Ch":return new $8(e);case"Sig":return new V8(e)}return new Vr(e);case 16:return new iy(e);case 3:return new FT(e);case 4:return new W8(e);case 5:return new G8(e);case 6:return new q8(e);case 8:return new jT(e);case 14:return new Y8(e);case 15:return new BT(e);case 7:return new X8(e);case 9:return new K8(e);case 10:return new Z8(e);case 11:return new Q8(e);case 12:return new J8(e);case 13:return new VT(e);case 17:return new e4(e);default:return new He(e)}}}class He{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return He._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;i?.splice(0,4,...e);const{width:c,height:u}=vi(e);t.left=100*(e[0]-a)/s+"%",t.top=100*(o-e[3]+l)/o+"%",0===r?(t.width=100*c/s+"%",t.height=100*u/o+"%"):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Vr||(s.tabIndex=il);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof iy){const{rotation:g}=t;return!t.hasOwnCanvas&&0!==g&&this.setRotation(g,s),s}const{width:a,height:l}=vi(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;switch(g>0||y>0?o.borderRadius=`calc(${g}px * var(--scale-factor)) / calc(${y}px * var(--scale-factor))`:this instanceof LT&&(o.borderRadius=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`),t.borderStyle.style){case 1:o.borderStyle="solid";break;case 2:o.borderStyle="dashed";break;case 3:se("Unimplemented border style: beveled");break;case 4:se("Unimplemented border style: inset");break;case 5:o.borderBottomStyle="solid"}const m=t.borderColor||null;m?(this.#t=!0,o.borderColor=L.makeHexColor(0|m[0],0|m[1],0|m[2])):o.borderWidth=0}const c=L.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=r.rawDims;o.left=100*(c[0]-h)/u+"%",o.top=100*(c[1]-f)/d+"%";const{rotation:p}=t;return t.hasOwnCanvas||0===p?(o.width=100*a/u+"%",o.height=100*l/d+"%"):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=vi(this.data.rect);let a,l;e%180==0?(a=100*s/i,l=100*o/r):(a=100*o/i,l=100*s/r),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[i]=NT[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:NT[`${o}_rgb`](a)})};return le(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2==1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:1===i||2===i})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||i[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const o=i[r];o&&(o({detail:{[r]:s},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(g=>Math.fround(g));if(8===e.length){const[g,y,m,v]=e.subarray(2,6);if(r===g&&s===y&&t===m&&i===v)return}const{style:o}=this.container;let a;if(this.#t){const{borderColor:g,borderWidth:y}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=r-t,c=s-i,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const h=u.createElement("defs");d.append(h);const f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,y=e.length;g<y;g+=8){const m=e[g],v=e[g+1],_=e[g+2],b=e[g+3],E=u.createElement("rect"),w=(_-t)/l,C=(s-v)/c,I=(m-_)/l,A=(v-b)/c;E.setAttribute("x",w),E.setAttribute("y",C),E.setAttribute("width",I),E.setAttribute("height",A),f.append(E),a?.push(`<rect vector-effect="non-scaling-stroke" x="${w}" y="${C}" width="${I}" height="${A}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=this.#n=new iy({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){qe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(-1===s||o===t)continue;const l="string"==typeof a?a:null,c=document.querySelector(`[data-element-id="${o}"]`);!c||Br.has(c)?i.push({id:o,exportValue:l,domElement:c}):se(`_getElementsByName - element not allowed: ${o}`)}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&Br.has(r)&&i.push({id:o,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class kT extends He{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(this.#t(i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#n(i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const s=i.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(e.onclick=()=>!1));e.onclick=()=>{i?.();const{fields:r,refs:s,include:o}=t,a=[];if(0!==r.length||0!==s.length){const u=new Set(s);for(const d of r){const h=this._fieldObjects[d]||[];for(const{id:f}of h)u.add(f)}for(const d of Object.values(this._fieldObjects))for(const h of d)u.has(h.id)===o&&a.push(h)}else for(const u of Object.values(this._fieldObjects))a.push(...u);const l=this.annotationStorage,c=[];for(const u of a){const{id:d}=u;switch(c.push(d),u.type){case"text":case"combobox":case"listbox":l.setValue(d,{value:u.defaultValue||""});break;case"checkbox":case"radiobutton":l.setValue(d,{value:u.defaultValue===u.exportValues});break;default:continue}const h=document.querySelector(`[data-element-id="${d}"]`);h&&(Br.has(h)?h.dispatchEvent(new Event("resetform")):se(`_bindResetFormAction - element not allowed: ${d}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class j8 extends He{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Vr extends He{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ut.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{if("blur"===i){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}})})}_setEventListeners(e,t,i,r){for(const[s,o]of i)("Action"===o||this.data.actions?.[o])&&(("Focus"===o||"Blur"===o)&&(t||={focused:!1}),this._setEventListener(e,t,s,o,r),"Focus"!==o||this.data.actions?.Blur?"Blur"===o&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":L.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,s=e.style;let o;const l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2),u=Math.round(c/(1.35*r))||1;o=Math.min(r,l(c/u/1.35))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2);o=Math.min(r,l(c/1.35))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=L.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(s.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class B8 extends Vr{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),s.setValue(o.id,{[r]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let s=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=r.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Br.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=il,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",u=>{e.setValue(t,{value:u.target.value}),this.setPropertyOnSiblings(i,"value",u.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",u=>{i.value=l.userValue=this.data.defaultFieldValue??"",l.formattedValue=null});let c=u=>{const{formattedValue:d}=l;null!=d&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",d=>{if(l.focused)return;const{target:h}=d;l.userValue&&(h.value=l.userValue),l.lastCommittedValue=h.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target),this._dispatchEventFromSandbox({value(f){l.userValue=f.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){const{formattedValue:p}=f.detail;l.formattedValue=p,null!=p&&f.target!==document.activeElement&&(f.target.value=p),e.setValue(t,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{const{charLimit:p}=f.detail,{target:g}=f;if(0===p)return void g.removeAttribute("maxLength");g.setAttribute("maxLength",p);let y=l.userValue;!y||y.length<=p||(y=y.slice(0,p),g.value=l.userValue=y,e.setValue(t,{value:y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}},d)}),i.addEventListener("keydown",d=>{l.commitKey=1;let h=-1;if("Escape"===d.key?h=0:"Enter"!==d.key||this.data.multiLine?"Tab"===d.key&&(l.commitKey=3):h=2,-1===h)return;const{value:f}=d.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,willCommit:!0,commitKey:h,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const u=c;c=null,i.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:h}=d.target;l.userValue=h,l.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;const{data:h,target:f}=d,{value:p,selectionStart:g,selectionEnd:y}=f;let m=g,v=y;switch(d.inputType){case"deleteWordBackward":{const _=p.substring(0,g).match(/\w*[^\w]*$/);_&&(m-=_[0].length);break}case"deleteWordForward":{const _=p.substring(g).match(/^[^\w]*\w*/);_&&(v+=_[0].length);break}case"deleteContentBackward":g===y&&(m-=1);break;case"deleteContentForward":g===y&&(v+=1)}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:h||"",willCommit:!1,selStart:m,selEnd:v}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class V8 extends Vr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class H8 extends Vr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Br.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=il,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{o.target.checked=(t.defaultFieldValue||"Off")===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({value(l){l.target.checked="Off"!==l.detail.value,e.setValue(i,{value:l.target.checked})}},o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class LT extends Vr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof r&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Br.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=il,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=null!=a&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const h=u&&d.id===i;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}},a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class U8 extends kT{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class $8 extends Vr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Br.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=il;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of r.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,i.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let o=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),o=()=>{u.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:h,multiple:f}=r;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):-1===h.selectedIndex?null:h[h.selectedIndex][d]};let l=a(!1);const c=u=>Array.prototype.map.call(u.target.options,h=>({displayValue:h.textContent,exportValue:h.value}));return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{this._dispatchEventFromSandbox({value(h){o?.();const f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const g of r.options)g.selected=p.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(h){r.multiple=!0},remove(h){const f=r.options,p=h.detail.remove;f[p].selected=!1,r.remove(p),f.length>0&&-1===Array.prototype.findIndex.call(f,y=>y.selected)&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(h){const{index:f,displayValue:p,exportValue:g}=h.detail.insert,y=r.children[f],m=document.createElement("option");m.textContent=p,m.value=g,y?y.before(m):r.append(m),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},items(h){const{items:f}=h.detail;for(;0!==r.length;)r.remove(0);for(const p of f){const{displayValue:g,exportValue:y}=p,m=document.createElement("option");m.textContent=g,m.value=y,r.append(m)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){const f=new Set(h.detail.indices);for(const p of h.target.options)p.selected=f.has(p.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}},u)}),r.addEventListener("input",u=>{const d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class iy extends He{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:He._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new z8({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${YI}${i}`).join(",")),this.container}}class z8{#e=this.#x.bind(this);#t=this.#S.bind(this);#n=this.#T.bind(this);#i=this.#A.bind(this);#r=null;#s=null;#a=null;#l=null;#d=null;#c=null;#u=null;#o=!1;#h=null;#p=null;#f=null;#g=null;#y=null;#m=null;#v=!1;constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){this.#s=e,this.#y=r,this.#a=o,this.#g=a,this.#c=l,this.#r=t,this.#f=c,this.#u=u,this.#d=i,this.#l=rT.toDateObject(s),this.trigger=i.flatMap(h=>h.getElementsToTriggerPopup());for(const h of this.trigger)h.addEventListener("click",this.#i),h.addEventListener("mouseenter",this.#n),h.addEventListener("mouseleave",this.#t),h.classList.add("popupTriggerArea");for(const h of i)h.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,d&&this.#A()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#r){const s=e.style.outlineColor=L.makeHexColor(...this.#r);e.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${s} 30%, white)`:L.makeHexColor(...this.#r.map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),({dir:i.dir,str:i.textContent}=this.#y),e.append(t),this.#l){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),t.append(s)}const r=this.#b;if(r)OT.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#a);e.append(s)}this.#s.append(e)}get#b(){const e=this.#g,t=this.#a;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#w(){return this.#b?.attributes?.style?.fontSize||0}get#E(){return this.#b?.attributes?.style?.color||null}#C(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#E,fontSize:this.#w?`calc(${this.#w}px * var(--scale-factor))`:""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:r});return i}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s)i.append(document.createTextNode(r[s])),s<o-1&&i.append(document.createElement("br"));return i}#x(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#o)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#a,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#C(t),this.#a=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&(({contentsObj:this.#a,richText:this.#g}=this.#m),this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#I(){if(null!==this.#p)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=this.#c;let o=!!this.#u,a=o?this.#u:this.#f;for(const p of this.#d)if(!a||null!==L.intersect(p.data.rect,a)){a=p.data.rect,o=!0;break}const l=L.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]);this.#p=[100*(l[0]+(o?a[2]-a[0]+5:0)-r)/t,100*(l[1]-s)/i];const{style:f}=this.#s;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#A(){this.#o=!this.#o,this.#o?(this.#T(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#T(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#I(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!this.#o&&this.isVisible&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#s.hidden=!0)}maybeShow(){this.#v&&(this.#h||this.#T(),this.#v=!1,this.#s.hidden=!1)}get isVisible(){return!1===this.#s.hidden}}class FT extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class W8 extends He{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=vi(e.rect),r=this.svgFactory.create(t,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class G8 extends He{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=vi(e.rect),r=this.svgFactory.create(t,i,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",t-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class q8 extends He{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=vi(e.rect),r=this.svgFactory.create(t,i,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",i/2),o.setAttribute("rx",t/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class jT extends He{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:r}}=this;if(!t)return this.container;const{width:s,height:o}=vi(e),a=this.svgFactory.create(s,o,!0);let l=[];for(let u=0,d=t.length;u<d;u+=2)l.push(`${t[u]-e[0]},${e[3]-t[u+1]}`);l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class X8 extends jT{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y8 extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class BT extends He{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=ae.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:i,popupRef:r}}=this,{width:s,height:o}=vi(e),a=this.svgFactory.create(s,o,!0);for(const l of t){let c=[];for(let d=0,h=l.length;d<h;d+=2)c.push(`${l[d]-e[0]},${e[3]-l[d+1]}`);c=c.join(" ");const u=this.svgFactory.createElement(this.svgElementName);this.#e.push(u),u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),a.append(u)}return this.container.append(a),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class K8 extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Z8 extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Q8 extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class J8 extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class VT extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class e4 extends He{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||0===t.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:r}=Ut.platform;return e.addEventListener("keydown",s=>{"Enter"===s.key&&(r?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class t4{#e=null;#t=null;#n=new Map;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o}){this.div=e,this.#e=t,this.#t=i,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}#i(e,t){const i=e.firstChild||e;i.id=`${YI}${t}`,this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1)}render(e){var t=this;return x(function*(){const{annotations:i}=e,r=t.div;jr(r,t.viewport);const s=new Map,o={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Bm,annotationStorage:e.annotationStorage||new Gm,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:t,elements:null};for(const a of i){if(a.noHTML)continue;const l=16===a.annotationType;if(l){const d=s.get(a.id);if(!d)continue;o.elements=d}else{const{width:d,height:h}=vi(a.rect);if(d<=0||h<=0)continue}o.data=a;const c=F8.create(o);if(!c.isRenderable)continue;if(!l&&a.popupRef){const d=s.get(a.popupRef);d?d.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),t.#i(u,a.id),c._isEditable&&(t.#n.set(c.data.id,c),t._annotationEditorUIManager?.renderAnnotationElement(c))}t.#r()})()}update({viewport:e}){const t=this.div;this.viewport=e,jr(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const od=/\r\n?|\n/g;class at extends W{#e;#t="";#n=`${this.id}-editor`;#i=null;#r;#s=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=at.prototype,t=s=>s.isEmpty(),i=Za.TRANSLATE_SMALL,r=Za.TRANSLATE_BIG;return le(this,"_keyboardManager",new Ka([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=ae.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||at._defaultColor||W._defaultLineColor,this.#r=e.fontSize||at._defaultFontSize}static initialize(e,t){W.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case X.FREETEXT_SIZE:at._defaultFontSize=t;break;case X.FREETEXT_COLOR:at._defaultColor=t}}updateParams(e,t){switch(e){case X.FREETEXT_SIZE:this.#a(t);break;case X.FREETEXT_COLOR:this.#l(t)}}static get defaultPropertiesToUpdate(){return[[X.FREETEXT_SIZE,at._defaultFontSize],[X.FREETEXT_COLOR,at._defaultColor||W._defaultLineColor]]}get propertiesToUpdate(){return[[X.FREETEXT_SIZE,this.#r],[X.FREETEXT_COLOR,this.#e]]}#a(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#r)*this.parentScale),this.#r=r,this.#c()},i=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=r=>{this.#e=this.editorDiv.style.color=r},i=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-at._internalPadding*e,-(at._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ae.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#d(){const e=[];this.editorDiv.normalize();for(const t of this.editorDiv.childNodes)e.push(at.#u(t));return e.join("\n")}#c(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180==this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#d().trimEnd();if(e===t)return;const i=r=>{this.#t=r,r?(this.#o(),this._uiManager.rebuild(this),this.#c()):this.remove()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#c()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){at._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),W._l10nPromise.get("pdfjs-free-text-default-content").then(r=>this.editorDiv?.setAttribute("default-content",r)),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),ed(this,this.div,["dblclick","keydown"]),this.width){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this.#s;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[c,u]=this.pageDimensions,[d,h]=this.pageTranslation;let f,p;switch(this.rotation){case 0:f=e+(o[0]-d)/c,p=t+this.height-(o[1]-h)/u;break;case 90:f=e+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=e-this.width+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=e+(o[0]-d-this.height*u)/c,p=t+(o[1]-h-this.width*c)/u,[a,l]=[-l,a]}this.setAt(f*r,p*s,a,l)}else this.setAt(e*r,t*s,this.width*r,this.height*s);this.#o(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(od,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(1===i.length&&"text/plain"===i[0])return;e.preventDefault();const r=at.#p(t.getData("text")||"").replaceAll(od,"\n");if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!r.includes("\n"))return o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){const f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(od,"")),f!==this.editorDiv){let p=c;for(const g of this.editorDiv.childNodes)g!==f?p.push(at.#u(g)):p=u}c.push(a.nodeValue.slice(0,l).replaceAll(od,""))}else if(a===this.editorDiv){let f=c,p=0;for(const g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(at.#u(g))}this.#t=`${c.join("\n")}${r}${u.join("\n")}`,this.#o();const d=new Range;let h=c.reduce((f,p)=>f+p.length,0);for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}s.removeAllRanges(),s.addRange(d)}#o(){if(this.editorDiv.replaceChildren(),this.#t)for(const e of this.#t.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#t.replaceAll("\xa0"," ")}static#p(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){let r=null;if(e instanceof FT){const{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u},textContent:d,textPosition:h,parent:{page:{pageNumber:f}}}=e;if(!d||0===d.length)return null;r=e={annotationType:ae.FREETEXT,color:Array.from(a),fontSize:o,value:d.join("\n"),position:h,pageIndex:f-1,rect:l.slice(0),rotation:c,id:u,deleted:!1}}const s=super.deserialize(e,t,i);return s.#r=e.fontSize,s.#e=L.makeHexColor(...e.color),s.#t=at.#p(e.value),s.annotationElementId=e.id||null,s.#s=r,s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=at._internalPadding*this.parentScale,i=this.getRect(t,t),r=W._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:ae.FREETEXT,color:r,fontSize:this.#r,value:this.#h(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:i,color:r,pageIndex:s}=this.#s;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((o,a)=>o!==r[a])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:i}=t;i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,t.replaceChildren();for(const s of this.#t.split("\n")){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}const r=at._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class HT{#e;#t=[];#n=[];constructor(e,t=0,i=0,r=!0){let s=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:m,y:v,width:_,height:b}of e){const E=Math.floor((m-t)/u)*u,w=Math.ceil((m+_+t)/u)*u,C=Math.floor((v-t)/u)*u,I=Math.ceil((v+b+t)/u)*u;this.#t.push([E,C,I,!0],[w,C,I,!1]),s=Math.min(s,E),o=Math.max(o,w),a=Math.min(a,C),l=Math.max(l,I)}const d=o-s+2*i,h=l-a+2*i,f=s-i,p=a-i,g=this.#t.at(r?-1:-2),y=[g[0],g[2]];for(const m of this.#t){const[v,_,b]=m;m[0]=(v-f)/d,m[1]=(_-p)/h,m[2]=(b-p)/h}this.#e={x:f,y:p,width:d,height:h,lastPoint:y}}getOutlines(){this.#t.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#l(t)),this.#s(t)):(this.#a(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],i=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const r=[];let s;for(;i.size>0;){const o=i.values().next().value;let[a,l,c,u,d]=o;i.delete(o);let h=a,f=l;for(s=[a,c],r.push(s);;){let p;if(i.has(u))p=u;else{if(!i.has(d))break;p=d}i.delete(p),[a,l,c,u,d]=p,h!==a&&(s.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}s.push(h,f)}return new n4(r,this.#e)}#r(e){const t=this.#n;let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,o=t[s][0];if(o===e)return s;o<e?i=s+1:r=s-1}return r+1}#s([,e,t]){const i=this.#r(e);this.#n.splice(i,0,[e,t])}#a([,e,t]){const i=this.#r(e);for(let r=i;r<this.#n.length;r++){const[s,o]=this.#n[r];if(s!==e)break;if(s===e&&o===t)return void this.#n.splice(r,1)}for(let r=i-1;r>=0;r--){const[s,o]=this.#n[r];if(s!==e)break;if(s===e&&o===t)return void this.#n.splice(r,1)}}#l(e){const[t,i,r]=e,s=[[t,i,r]],o=this.#r(r);for(let a=0;a<o;a++){const[l,c]=this.#n[a];for(let u=0,d=s.length;u<d;u++){const[,h,f]=s[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)s[u][1]=c;else{if(1===d)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,f>c&&s.push([t,c,f])}}}return s}}class UT{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof ry}}class n4 extends UT{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[i,r]=t;e.push(`M${i} ${r}`);for(let s=2;s<t.length;s+=2){const o=t[s],a=t[s+1];o===i?(e.push(`V${a}`),r=a):a===r&&(e.push(`H${o}`),i=o)}e.push("Z")}return e.join(" ")}serialize([e,t,i,r],s){const o=[],a=i-e,l=r-t;for(const c of this.#t){const u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=e+c[d]*a,u[d+1]=r-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}}class Hr{#e;#t=[];#n;#i;#r=[];#s=new Float64Array(18);#a;#l;#d;#c;#u;#o;#h=[];static#p=8;static#f=2;static#g=Hr.#p+Hr.#f;constructor({x:e,y:t},i,r,s,o,a=0){this.#e=i,this.#o=s*r,this.#i=o,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#c=Hr.#p*r,this.#d=Hr.#g*r,this.#u=r,this.#h.push(e,t)}get free(){return!0}isEmpty(){return isNaN(this.#s[8])}#y(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[i,r,s,o]=this.#e;return[(this.#a+(e[0]-t[0])/2-i)/s,(this.#l+(e[1]-t[1])/2-r)/o,(this.#a+(t[0]-e[0])/2-i)/s,(this.#l+(t[1]-e[1])/2-r)/o]}add({x:e,y:t}){this.#a=e,this.#l=t;const[i,r,s,o]=this.#e;let[a,l,c,u]=this.#s.subarray(8,12);const d=e-c,h=t-u,f=Math.hypot(d,h);if(f<this.#d)return!1;const p=f-this.#c,g=p/f,y=g*d,m=g*h;let v=a,_=l;a=c,l=u,c+=y,u+=m,this.#h?.push(e,t);const w=-m/p*this.#o,C=y/p*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+w,u+C],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-w,u-C],16),isNaN(this.#s[6])?(0===this.#r.length&&(this.#s.set([a+w,l+C],2),this.#r.push(NaN,NaN,NaN,NaN,(a+w-i)/s,(l+C-r)/o),this.#s.set([a-w,l-C],14),this.#t.push(NaN,NaN,NaN,NaN,(a-w-i)/s,(l-C-r)/o)),this.#s.set([v,_,a,l,c,u],6),!this.isEmpty()):(this.#s.set([v,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,v-a)-Math.atan2(m,y))<Math.PI/2?([a,l,c,u]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((a+c)/2-i)/s,((l+u)/2-r)/o),[a,l,v,_]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((v+a)/2-i)/s,((_+l)/2-r)/o),!0):([v,_,a,l,c,u]=this.#s.subarray(0,6),this.#r.push(((v+5*a)/6-i)/s,((_+5*l)/6-r)/o,((5*a+c)/6-i)/s,((5*l+u)/6-r)/o,((a+c)/2-i)/s,((l+u)/2-r)/o),[c,u,a,l,v,_]=this.#s.subarray(12,18),this.#t.push(((v+5*a)/6-i)/s,((_+5*l)/6-r)/o,((5*a+c)/6-i)/s,((5*l+u)/6-r)/o,((a+c)/2-i)/s,((l+u)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t,i=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[s,o,a,l]=this.#e,[c,u,d,h]=this.#y();if(isNaN(this.#s[6])&&!this.isEmpty())return`M${(this.#s[2]-s)/a} ${(this.#s[3]-o)/l} L${(this.#s[4]-s)/a} ${(this.#s[5]-o)/l} L${c} ${u} L${d} ${h} L${(this.#s[16]-s)/a} ${(this.#s[17]-o)/l} L${(this.#s[14]-s)/a} ${(this.#s[15]-o)/l} Z`;const f=[];f.push(`M${e[4]} ${e[5]}`);for(let p=6;p<e.length;p+=6)isNaN(e[p])?f.push(`L${e[p+4]} ${e[p+5]}`):f.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);f.push(`L${(i[0]-s)/a} ${(i[1]-o)/l} L${c} ${u} L${d} ${h} L${(r[0]-s)/a} ${(r[1]-o)/l}`);for(let p=t.length-6;p>=6;p-=6)isNaN(t[p])?f.push(`L${t[p+4]} ${t[p+5]}`):f.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);return f.push(`L${t[4]} ${t[5]} Z`),f.join(" ")}getOutlines(){const e=this.#r,t=this.#t,i=this.#s,r=i.subarray(4,6),s=i.subarray(16,18),[o,a,l,c]=this.#e,u=new Float64Array((this.#h?.length??0)+2);for(let m=0,v=u.length-2;m<v;m+=2)u[m]=(this.#h[m]-o)/l,u[m+1]=(this.#h[m+1]-a)/c;u[u.length-2]=(this.#a-o)/l,u[u.length-1]=(this.#l-a)/c;const[d,h,f,p]=this.#y();if(isNaN(i[6])&&!this.isEmpty()){const m=new Float64Array(36);return m.set([NaN,NaN,NaN,NaN,(i[2]-o)/l,(i[3]-a)/c,NaN,NaN,NaN,NaN,(i[4]-o)/l,(i[5]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[16]-o)/l,(i[17]-a)/c,NaN,NaN,NaN,NaN,(i[14]-o)/l,(i[15]-a)/c],0),new ry(m,u,this.#e,this.#u,this.#n,this.#i)}const g=new Float64Array(this.#r.length+24+this.#t.length);let y=e.length;for(let m=0;m<y;m+=2)isNaN(e[m])?g[m]=g[m+1]=NaN:(g[m]=e[m],g[m+1]=e[m+1]);g.set([NaN,NaN,NaN,NaN,(r[0]-o)/l,(r[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/c],y),y+=24;for(let m=t.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2)isNaN(t[m+v])?(g[y]=g[y+1]=NaN,y+=2):(g[y]=t[m+v],g[y+1]=t[m+v+1],y+=2);return g.set([NaN,NaN,NaN,NaN,t[4],t[5]],y),new ry(g,u,this.#e,this.#u,this.#n,this.#i)}}class ry extends UT{#e;#t=null;#n;#i;#r;#s;#a;constructor(e,t,i,r,s,o){super(),this.#a=e,this.#r=t,this.#e=i,this.#s=r,this.#n=s,this.#i=o,this.#c(o);const{x:a,y:l,width:c,height:u}=this.#t;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,i=this.#a.length;t<i;t+=6)isNaN(this.#a[t])?e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`):e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`);return e.push("Z"),e.join(" ")}serialize([e,t,i,r],s){const o=i-e,a=r-t;let l,c;switch(s){case 0:l=this.#l(this.#a,e,r,o,-a),c=this.#l(this.#r,e,r,o,-a);break;case 90:l=this.#d(this.#a,e,t,o,a),c=this.#d(this.#r,e,t,o,a);break;case 180:l=this.#l(this.#a,i,t,-o,a),c=this.#l(this.#r,i,t,-o,a);break;case 270:l=this.#d(this.#a,i,r,-o,-a),c=this.#d(this.#r,i,r,-o,-a)}return{outline:Array.from(l),points:[Array.from(c)]}}#l(e,t,i,r,s){const o=new Float64Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*r,o[a+1]=i+e[a+1]*s;return o}#d(e,t,i,r,s){const o=new Float64Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*r,o[a+1]=i+e[a]*s;return o}#c(e){const t=this.#a;let i=t[4],r=t[5],s=i,o=r,a=i,l=r,c=i,u=r;const d=e?Math.max:Math.min;for(let y=6,m=t.length;y<m;y+=6){if(isNaN(t[y]))s=Math.min(s,t[y+4]),o=Math.min(o,t[y+5]),a=Math.max(a,t[y+4]),l=Math.max(l,t[y+5]),u<t[y+5]?(c=t[y+4],u=t[y+5]):u===t[y+5]&&(c=d(c,t[y+4]));else{const v=L.bezierBoundingBox(i,r,...t.slice(y,y+6));s=Math.min(s,v[0]),o=Math.min(o,v[1]),a=Math.max(a,v[2]),l=Math.max(l,v[3]),u<v[3]?(c=v[2],u=v[3]):u===v[3]&&(c=d(c,v[2]))}i=t[y+4],r=t[y+5]}const h=s-this.#n,f=o-this.#n,p=a-s+2*this.#n,g=l-o+2*this.#n;this.#t={x:h,y:f,width:p,height:g,lastPoint:[c,u]}}get box(){return this.#t}getNewOutline(e,t){const{x:i,y:r,width:s,height:o}=this.#t,[a,l,c,u]=this.#e,d=s*c,h=o*u,f=i*c+a,p=r*u+l,g=new Hr({x:this.#r[0]*d+f,y:this.#r[1]*h+p},this.#e,this.#s,e,this.#i,t??this.#n);for(let y=2;y<this.#r.length;y+=2)g.add({x:this.#r[y]*d+f,y:this.#r[y+1]*h+p});return g.getOutlines()}}class qn{#e=this.#f.bind(this);#t=this.#y.bind(this);#n=null;#i=null;#r;#s=null;#a=!1;#l=!1;#d=null;#c;#u=null;#o;static get _keyboardManager(){return le(this,"_keyboardManager",new Ka([[["Escape","mac+Escape"],qn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qn.prototype._moveToPrevious],[["Home","mac+Home"],qn.prototype._moveToBeginning],[["End","mac+End"],qn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#l=!1,this.#o=X.HIGHLIGHT_COLOR,this.#d=e):(this.#l=!0,this.#o=X.HIGHLIGHT_DEFAULT_COLOR),this.#u=e?._uiManager||t,this.#c=this.#u._eventBus,this.#r=e?.color||this.#u?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const e=this.#n=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#u._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#e,{signal:t});const i=this.#i=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#r,e.append(i),e}renderMainDropdown(){const e=this.#s=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#u._signal;e.addEventListener("contextmenu",fn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of this.#u.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.setAttribute("aria-selected",r===this.#r),s.addEventListener("click",this.#p.bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#e,{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#o,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#n)return void this.#g(e);const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){this.#m?e.target!==this.#n?e.target.nextSibling?.focus():this.#s.firstChild?.focus():this.#g(e)}_moveToPrevious(e){e.target!==this.#s?.firstChild&&e.target!==this.#n?(this.#m||this.#g(e),e.target.previousSibling?.focus()):this.#m&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#m?this.#s.firstChild?.focus():this.#g(e)}_moveToEnd(e){this.#m?this.#s.lastChild?.focus():this.#g(e)}#f(e){qn._keyboardManager.exec(this,e)}#g(e){if(this.#m)return void this.hideDropdown();if(this.#a=0===e.detail,window.addEventListener("pointerdown",this.#t,{signal:this.#u._signal}),this.#s)return void this.#s.classList.remove("hidden");const t=this.#s=this.#h();this.#n.append(t)}#y(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#t)}get#m(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#l){if(!this.#m)return void this.#d?.unselect();this.hideDropdown(),this.#n.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#i&&(this.#i.style.backgroundColor=e),!this.#s)return;const t=this.#u.highlightColors.values();for(const i of this.#s.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s?.remove(),this.#s=null}}class Ye extends W{#e=null;#t=0;#n;#i=null;#r=null;#s=null;#a=null;#l=0;#d=null;#c=null;#u=null;#o=!1;#h=null;#p;#f=null;#g="";#y;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=ae.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ye.prototype;return le(this,"_keyboardManager",new Ka([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ye._defaultColor,this.#y=e.thickness||Ye._defaultThickness,this.#p=e.opacity||Ye._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#b(e),this.#I()):(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#l=e.focusOffset,this.#v(),this.#I(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#y,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){const e=new HT(this.#n,.001);this.#c=e.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#c.box);const t=new HT(this.#n,.0025,.001,"ltr"===this._uiManager.direction);this.#s=t.getOutlines();const{lastPoint:i}=this.#s.box;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:i}){if(this.#c=e,this.#s=e.getNewOutline(this.#y/2+1.5,.0025),t>=0)this.#u=t,this.#i=i,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.highlightOutline(this.#s);else if(this.parent){const u=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#u,e),this.parent.drawLayer.updateBox(this.#u,Ye.#A(this.#c.box,(u-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#s),this.parent.drawLayer.updateBox(this.#f,Ye.#A(this.#s.box,u))}const{x:s,y:o,width:a,height:l}=e.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=l;break;case 90:{const[u,d]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[u,d]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*d/u,this.height=l*u/d;break}}const{lastPoint:c}=this.#s.box;this.#h=[(c[0]-s)/a,(c[1]-o)/l]}static initialize(e,t){W.initialize(e,t),Ye._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case X.HIGHLIGHT_DEFAULT_COLOR:Ye._defaultColor=t;break;case X.HIGHLIGHT_THICKNESS:Ye._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case X.HIGHLIGHT_COLOR:this.#w(t);break;case X.HIGHLIGHT_THICKNESS:this.#E(t)}}static get defaultPropertiesToUpdate(){return[[X.HIGHLIGHT_DEFAULT_COLOR,Ye._defaultColor],[X.HIGHLIGHT_THICKNESS,Ye._defaultThickness]]}get propertiesToUpdate(){return[[X.HIGHLIGHT_COLOR,this.color||Ye._defaultColor],[X.HIGHLIGHT_THICKNESS,this.#y||Ye._defaultThickness],[X.HIGHLIGHT_FREE,this.#o]]}#w(e){const t=r=>{this.color=r,this.parent?.drawLayer.changeColor(this.#u,r),this.#r?.updateColor(r)},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#E(e){const t=this.#y,i=r=>{this.#y=r,this.#C(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){var e=()=>super.addEditToolbar,t=this;return x(function*(){const i=yield e().call(t);return i?(t._uiManager.highlightColors&&(t.#r=new qn({editor:t}),i.addColorPicker(t.#r)),i):null})()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#I(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#x():e&&(this.#I(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#C(e){if(!this.#o)return;this.#b({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#x(){null===this.#u||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#I(e=this.parent){null===this.#u&&(({id:this.#u,clipPathId:this.#i}=e.drawLayer.highlight(this.#c,this.color,this.#p)),this.#f=e.drawLayer.highlightOutline(this.#s),this.#d&&(this.#d.style.clipPath=this.#i))}static#A({x:e,y:t,width:i,height:r},s){switch(s){case 90:return{x:1-t-r,y:e,width:r,height:i};case 180:return{x:1-e-i,y:1-t-r,width:i,height:r};case 270:return{x:t,y:1-e-i,width:r,height:i}}return{x:e,y:t,width:i,height:r}}rotate(e){const{drawLayer:t}=this.parent;let i;i=this.#o?Ye.#A(this.#c.box,e=(e-this.rotation+360)%360):Ye.#A(this,e),t.rotate(this.#u,e),t.rotate(this.#f,e),t.updateBox(this.#u,i),t.updateBox(this.#f,Ye.#A(this.#s.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#T.bind(this),{signal:this._uiManager._signal});const t=this.#d=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),ed(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#f,"hovered")}#T(e){Ye._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#S(!0);break;case 1:case 3:this.#S(!1)}}#S(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#l)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#S(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#u,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#O(){if(this.#o)return null;const[e,t]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#n,o=new Float32Array(8*s.length);let a=0;for(const{x:l,y:c,width:u,height:d}of s){const h=l*e+i,f=(1-c-d)*t+r;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*e,o[a+5]=o[a+7]=f+d*t,a+=8}return o}#D(e){return this.#c.serialize(e,this.#P())}static startHighlighting(e,t,{target:i,x:r,y:s}){const{x:o,y:a,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,d=e.combinedSignal(u),f=p=>{u.abort(),this.#M(e,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",p=>{p.preventDefault(),p.stopPropagation()},{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",fn,{signal:d}),i.addEventListener("pointermove",this.#_.bind(this,e),{signal:d}),this._freeHighlight=new Hr({x:r,y:s},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#_(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#M(e,t){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,i){const r=super.deserialize(e,t,i),{rect:[s,o,a,l],color:c,quadPoints:u}=e;r.color=L.makeHexColor(...c),r.#p=e.opacity;const[d,h]=r.pageDimensions;r.width=(a-s)/d,r.height=(l-o)/h;const f=r.#n=[];for(let p=0;p<u.length;p+=8)f.push({x:(u[4]-a)/d,y:(l-(1-u[p+5]))/h,width:(u[p+2]-u[p])/d,height:(u[p+5]-u[p+1])/h});return r.#v(),r}serialize(e=!1){if(this.isEmpty()||e)return null;const t=this.getRect(0,0),i=W._colorManager.convert(this.color);return{annotationType:ae.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#y,quadPoints:this.#O(),outlines:this.#D(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class pt extends W{#e=0;#t=0;#n=null;#i=new Path2D;#r=!1;#s=null;#a=!1;#l=!1;#d=null;#c=null;#u=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ae.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){W.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case X.INK_THICKNESS:pt._defaultThickness=t;break;case X.INK_COLOR:pt._defaultColor=t;break;case X.INK_OPACITY:pt._defaultOpacity=t/100}}updateParams(e,t){switch(e){case X.INK_THICKNESS:this.#p(t);break;case X.INK_COLOR:this.#f(t);break;case X.INK_OPACITY:this.#g(t)}}static get defaultPropertiesToUpdate(){return[[X.INK_THICKNESS,pt._defaultThickness],[X.INK_COLOR,pt._defaultColor||W._defaultLineColor],[X.INK_OPACITY,Math.round(100*pt._defaultOpacity)]]}get propertiesToUpdate(){return[[X.INK_THICKNESS,this.thickness||pt._defaultThickness],[X.INK_COLOR,this.color||pt._defaultColor||W._defaultLineColor],[X.INK_OPACITY,Math.round(100*(this.opacity??pt._defaultOpacity))]]}#p(e){const t=r=>{this.thickness=r,this.#V()},i=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=r=>{this.color=r,this.#A()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){const t=r=>{this.opacity=r,this.#A()},i=this.opacity;this.addCommands({cmd:t.bind(this,e/=100),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#O(),this.#D()),this.isAttachedToDOM||(this.parent.add(this),this.#_()),this.#V()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#d?.disconnect(),this.#d=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions;this.setDimensions(this.width*e,this.height*t)}enableEditMode(){this.#r||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.#T())}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#S())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#y(){const{parentRotation:e,parentDimensions:[t,i]}=this;switch(e){case 90:return[0,i,i,t];case 180:return[t,i,t,i];case 270:return[t,0,i,t];default:return[0,0,t,i]}}#m(){const{ctx:e,color:t,opacity:i,thickness:r,parentScale:s,scaleFactor:o}=this;e.lineWidth=r*s/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${function SG(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}(i)}`}#v(e,t){this.canvas.addEventListener("contextmenu",fn,{signal:this._uiManager._signal}),this.#S(),this.#s=new AbortController;const i=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#l||(this.#l=!0,this.#_(),this.thickness||=pt._defaultThickness,this.color||=pt._defaultColor||W._defaultLineColor,this.opacity??=pt._defaultOpacity),this.currentPath.push([e,t]),this.#a=!1,this.#m(),this.#h=()=>{this.#C(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#b(e,t){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&t===r)return;const s=this.currentPath;let o=this.#i;if(s.push([e,t]),this.#a=!0,s.length<=2)return o.moveTo(...s[0]),void o.lineTo(e,t);3===s.length&&(this.#i=o=new Path2D,o.moveTo(...s[0])),this.#x(o,...s.at(-3),...s.at(-2),e,t)}#w(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#E(e,t){let i;if(this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#b(e,t),this.#w(),1!==this.currentPath.length)i=this.#I();else{const l=[e,t];i=[[l,l.slice(),l.slice(),l]]}const r=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#O(),this.#D()),this.#V())},mustExec:!0})}#C(){if(!this.#a)return;this.#a=!1;Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),i=t.map(u=>u[0]),r=t.map(u=>u[1]),{ctx:c}=(Math.min(...i),Math.max(...i),Math.min(...r),Math.max(...r),this);c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(this.#i),c.restore()}#x(e,t,i,r,s,o,a){const l=(t+r)/2,c=(i+s)/2,u=(r+o)/2,d=(s+a)/2;e.bezierCurveTo(l+2*(r-l)/3,c+2*(s-c)/3,u+2*(r-u)/3,d+2*(s-d)/3,u,d)}#I(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let i,[r,s]=e[0];for(i=1;i<e.length-2;i++){const[h,f]=e[i],[p,g]=e[i+1],y=(h+p)/2,m=(f+g)/2;t.push([[r,s],[r+2*(h-r)/3,s+2*(f-s)/3],[y+2*(h-y)/3,m+2*(f-m)/3],[y,m]]),[r,s]=[y,m]}const[o,a]=e[i],[l,c]=e[i+1];return t.push([[r,s],[r+2*(o-r)/3,s+2*(a-s)/3],[l+2*(o-l)/3,c+2*(a-c)/3],[l,c]]),t}#A(){if(this.isEmpty())return void this.#R();this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#R();for(const i of this.bezierPath2D)t.stroke(i)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#V(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#T(){if(this.#c)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#S(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){0!==e.button||!this.isInEditMode()||this.#r||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#v(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#b(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#s?.abort(),this.#s=null,this.#T(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",fn)},10),this.#E(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#O(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#D(){this.#d=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#d.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#d?.disconnect(),this.#d=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#r}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,s,o]=this.#y();if(this.setAt(i,r,0,0),this.setDims(s,o),this.#O(),this.width){const[a,l]=this.parentDimensions;this.setAspectRatio(this.width*a,this.height*l),this.setAt(e*a,t*l,this.width*a,this.height*l),this.#l=!0,this.#_(),this.setDims(this.width*a,this.height*l),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#D(),this.div}#_(){if(!this.#l)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#R()}setDimensions(e,t){const i=Math.round(e),r=Math.round(t);if(this.#u===i&&this.#o===r)return;this.#u=i,this.#o=r,this.canvas.style.visibility="hidden";const[s,o]=this.parentDimensions;this.width=e/s,this.height=t/o,this.fixAndSetPosition(),this.#r&&this.#M(e,t),this.#_(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#M(e,t){const i=this.#j(),r=(e-i)/this.#t,s=(t-i)/this.#e;this.scaleFactor=Math.min(r,s)}#R(){const e=this.#j()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#L(e){const t=new Path2D;for(let i=0,r=e.length;i<r;i++){const[s,o,a,l]=e[i];0===i&&t.moveTo(...s),t.bezierCurveTo(o[0],o[1],a[0],a[1],l[0],l[1])}return t}static#H(e,t,i){const[r,s,o,a]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]+=r,e[l+1]=a-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=e[l+1]+r,e[l+1]=u+s}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=o-e[l],e[l+1]+=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=o-e[l+1],e[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,i){const[r,s,o,a]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]-=r,e[l+1]=a-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=e[l+1]-s,e[l+1]=u-r}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=o-e[l],e[l+1]-=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=a-e[l+1],e[l+1]=o-u}break;default:throw new Error("Invalid rotation")}return e}#k(e,t,i,r){const s=[],o=this.thickness/2,a=e*t+o,l=e*i+o;for(const c of this.paths){const u=[],d=[];for(let h=0,f=c.length;h<f;h++){const[p,g,y,m]=c[h];if(p[0]===m[0]&&p[1]===m[1]&&1===f){const T=e*p[0]+a,N=e*p[1]+l;u.push(T,N),d.push(T,N);break}const v=e*p[0]+a,_=e*p[1]+l,b=e*g[0]+a,E=e*g[1]+l,w=e*y[0]+a,C=e*y[1]+l,I=e*m[0]+a,A=e*m[1]+l;0===h&&(u.push(v,_),d.push(v,_)),u.push(b,E,w,C,I,A),d.push(b,E),h===f-1&&d.push(I,A)}s.push({bezier:pt.#H(u,r,this.rotation),points:pt.#H(d,r,this.rotation)})}return s}#F(){let e=1/0,t=-1/0,i=1/0,r=-1/0;for(const s of this.paths)for(const[o,a,l,c]of s){const u=L.bezierBoundingBox(...o,...a,...l,...c);e=Math.min(e,u[0]),i=Math.min(i,u[1]),t=Math.max(t,u[2]),r=Math.max(r,u[3])}return[e,i,t,r]}#j(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#V(e=!1){if(this.isEmpty())return;if(!this.#r)return void this.#A();const t=this.#F(),i=this.#j();this.#t=Math.max(W.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(W.MIN_SIZE,t[3]-t[1]);const r=Math.ceil(i+this.#t*this.scaleFactor),s=Math.ceil(i+this.#e*this.scaleFactor),[o,a]=this.parentDimensions;this.width=r/o,this.height=s/a,this.setAspectRatio(r,s);const l=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#_(),this.#A(),this.#u=r,this.#o=s,this.setDims(r,s);const u=e?i/this.scaleFactor/2:0;this.translate(l-this.translationX-u,c-this.translationY-u)}static deserialize(e,t,i){if(e instanceof BT)return null;const r=super.deserialize(e,t,i);r.thickness=e.thickness,r.color=L.makeHexColor(...e.color),r.opacity=e.opacity;const[s,o]=r.pageDimensions,a=r.width*s,l=r.height*o,c=r.parentScale,u=e.thickness/2;r.#r=!0,r.#u=Math.round(a),r.#o=Math.round(l);const{paths:d,rect:h,rotation:f}=e;for(let{bezier:g}of d){g=pt.#B(g,h,f);const y=[];r.paths.push(y);let m=c*(g[0]-u),v=c*(g[1]-u);for(let b=2,E=g.length;b<E;b+=6){const T=c*(g[b+4]-u),N=c*(g[b+5]-u);y.push([[m,v],[c*(g[b]-u),c*(g[b+1]-u)],[c*(g[b+2]-u),c*(g[b+3]-u)],[T,N]]),m=T,v=N}const _=this.#L(y);r.bezierPath2D.push(_)}const p=r.#F();return r.#t=Math.max(W.MIN_SIZE,p[2]-p[0]),r.#e=Math.max(W.MIN_SIZE,p[3]-p[1]),r.#M(a,l),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=W._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ae.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#k(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class sy extends W{#e=null;#t=null;#n=null;#i=null;#r=null;#s="";#a=null;#l=null;#d=null;#c=!1;#u=!1;static _type="stamp";static _editorType=ae.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,t){W.initialize(e,t)}static get supportedTypes(){return le(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return le(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ae.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){e?(this.#e=e.bitmap,t||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#s=e.file.name),this.#f()):this.remove()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){var i=this;return x(function*(){if(i.hasAltTextData())return null;const{mlManager:r}=i._uiManager;if(!r)throw new Error("No ML.");if(!(yield r.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=e||i.copyCanvas(null,!0).imageData,l=yield r.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return yield i.setGuessedAltText(c),t&&!i.hasAltTextData()&&(i.altTextData={alt:c,decorative:!1}),c})()}#p(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());if(this.#i){const r=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#o(s)).finally(()=>this.#h()))}if(this.#r){const r=this.#r;return this.#r=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(r).then(s=>this.#o(s)).finally(()=>this.#h()))}const t=document.createElement("input");t.type="file",t.accept=sy.supportedTypesStr;const i=this._uiManager._signal;this.#n=new Promise(r=>{t.addEventListener("change",x(function*(){if(t.files&&0!==t.files.length){e._uiManager.enableWaiting(!0);const s=yield e._uiManager.imageManager.getFromFile(t.files[0]);e._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:e._uiManager.useNewAltTextFlow}}),e.#o(s)}else e.remove();r()}),{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>this.#h()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#l?.disconnect(),this.#l=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#a&&this.#p(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#p()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#r||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width){const[i,r]=this.parentDimensions;this.setAt(e*i,t*r,this.width*i,this.height*r)}return this.div}#f(){const{div:e}=this;let{width:t,height:i}=this.#e;const[r,s]=this.pageDimensions,o=.75;if(this.width)t=this.width*r,i=this.height*s;else if(t>o*r||i>o*s){const u=Math.min(o*r/t,o*s/i);t*=u,i*=u}const[a,l]=this.parentDimensions;this.setDims(t*a/r,i*l/s),this._uiManager.enableWaiting(!1);const c=this.#a=document.createElement("canvas");e.append(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow)&&(e.hidden=!1),this.#m(t,i),this.#b(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(e,t=!1){e||(e=224);const{width:i,height:r}=this.#e,s=document.createElement("canvas");let o=this.#e,a=i,l=r;if(i>e||r>e){const g=Math.min(e/i,e/r);a=Math.floor(i*g),l=Math.floor(r*g),this.#c||(o=this.#y(a,l))}s.width=a,s.height=l;const c=s.getContext("2d");c.filter=this._uiManager.hcmFilter;let u="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(u="#8f8f9d",d="#42414d");const h=15,f=new OffscreenCanvas(30,30),p=f.getContext("2d");if(p.fillStyle=u,p.fillRect(0,0,30,30),p.fillStyle=d,p.fillRect(0,0,h,h),p.fillRect(h,h,h,h),c.fillStyle=c.createPattern(f,"repeat"),c.fillRect(0,0,a,l),t){const g=new OffscreenCanvas(a,l),y=g.getContext("2d",{willReadFrequently:!0});y.drawImage(o,0,0,o.width,o.height,0,0,a,l);const m=y.getImageData(0,0,a,l).data;return c.drawImage(g,0,0),{canvas:s,imageData:{width:a,height:l,data:m}}}return c.drawImage(o,0,0,o.width,o.height,0,0,a,l),{canvas:s,imageData:null}}#g(e,t){const[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,this.setDims(e,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#d&&clearTimeout(this.#d),this.#d=setTimeout(()=>{this.#d=null,this.#m(e,t)},200)}#y(e,t){const{width:i,height:r}=this.#e;let s=i,o=r,a=this.#e;for(;s>2*e||o>2*t;){const l=s,c=o;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,s,o),a=u.transferToImageBitmap()}return a}#m(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=this.#a;if(!i||i.width===e&&i.height===t)return;i.width=e,i.height=t;const r=this.#c?this.#e:this.#y(e,t),s=i.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(r,0,0,r.width,r.height,0,0,e,t)}getImageForAltText(){return this.#a}#v(e){if(e){if(this.#c){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#e),t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){const[t,i]=this.pageDimensions,r=Math.round(this.width*t*no.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*no.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,s),o.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this._uiManager._signal&&(this.#l=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#l.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#l?.disconnect(),this.#l=null},{once:!0}))}static deserialize(e,t,i){if(e instanceof VT)return null;const r=super.deserialize(e,t,i),{rect:s,bitmapUrl:o,bitmapId:a,isSvg:l,accessibilityData:c}=e;a&&i.imageManager.isValidId(a)?r.#t=a:r.#i=o,r.#c=l;const[u,d]=r.pageDimensions;return r.width=(s[2]-s[0])/u,r.height=(s[3]-s[1])/d,c&&(r.altTextData=c),r}serialize(e=!1,t=null){if(this.isEmpty())return null;const i={annotationType:ae.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),null===t)return i;t.stamps||=new Map;const o=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(t.stamps.has(this.#t)){if(this.#c){const a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#v(!1))}}else t.stamps.set(this.#t,{area:o,serialized:i}),i.bitmap=this.#v(!1);return i}}let i4=(()=>{class n{#e;#t=!1;#n=null;#i=null;#r=null;#s=new Map;#a=!1;#l=!1;#d=!1;#c=null;#u=null;#o;static _initialized=!1;static#h=new Map([at,pt,sy,Ye].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:r,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){const d=[...n.#h.values()];if(!n._initialized){n._initialized=!0;for(const h of d)h.initialize(u,t)}t.registerEditorTypes(d),this.#o=t,this.pageIndex=i,this.div=r,this.#e=s,this.#n=o,this.viewport=c,this.#c=l,this.drawLayer=a,this.#o.addLayer(this)}get isEmpty(){return 0===this.#s.size}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ae.NONE}updateToolbar(t){this.#o.updateToolbar(t)}updateMode(t=this.#o.getMode()){switch(this.#m(),t){case ae.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case ae.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const r of n.#h.values())i.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#c?.div}addInkEditorIfNeeded(t){if(this.#o.getMode()===ae.INK){if(!t)for(const r of this.#s.values())if(r.isEmpty())return void r.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#o.setEditingState(t)}addCommands(t){this.#o.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const r of this.#s.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#o.removeChangedExistingAnnotation(r),t.add(r.annotationElementId));if(!this.#n)return;const i=this.#n.getEditableAnnotations();for(const r of i){if(r.hide(),this.#o.isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const s=this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){this.#d=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,i=new Map;for(const s of this.#s.values())if(s.disableEditing(),s.annotationElementId){if(null!==s.serialize()){t.set(s.annotationElementId,s);continue}i.set(s.annotationElementId,s),this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=i.get(a);l?(l.resetAnnotationElement(o),l.show(!1),o.show()):(l=t.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show())}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of n.#h.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#d=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#o.getActive()!==t&&this.#o.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#u){this.#u=new AbortController;const t=this.#o.combinedSignal(this.#u);this.#c.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#c.div.classList.remove("highlighting"))}#p(t){this.#o.unselectAll();const{target:i}=t;if(i===this.#c.div||i.classList.contains("endOfContent")&&this.#c.div.contains(i)){const{isMac:r}=Ut.platform;if(0!==t.button||t.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),Ye.startHighlighting(this,"ltr"===this.#o.direction,t),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#o.isDeletedAnnotationElement(i)&&this.#o.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#d&&t.annotationElementId&&this.#o.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#o.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#o.addDeletedAnnotationElement(t.annotationElementId),W.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#o.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#o.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),i.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return n.#h.get(this.#o.getMode())}combinedSignal(t){return this.#o.combinedSignal(t)}#g(t){const i=this.#f;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,i){this.#o.updateToolbar(t),this.#o.updateMode(t);const{offsetX:r,offsetY:s}=this.#y(),o=this.getNextId(),a=this.#g({parent:this,id:o,x:r,y:s,uiManager:this.#o,isCentered:!0,...i});a&&this.add(a)}deserialize(t){return n.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#o)||null}createAndAddNewEditor(t,i,r={}){const s=this.getNextId(),o=this.#g({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#o,isCentered:i,...r});return o&&this.add(o),o}#y(){const{x:t,y:i,width:r,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,t),a=Math.max(0,i),u=(o+Math.min(window.innerWidth,t+r))/2-t,d=(a+Math.min(window.innerHeight,i+s))/2-i,[h,f]=this.viewport.rotation%180==0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(){this.createAndAddNewEditor(this.#y(),!0)}setSelected(t){this.#o.setSelected(t)}toggleSelected(t){this.#o.toggleSelected(t)}isSelected(t){return this.#o.isSelected(t)}unselect(t){this.#o.unselect(t)}pointerup(t){const{isMac:i}=Ut.platform;if(!(0!==t.button||t.ctrlKey&&i)&&t.target===this.div&&this.#a){if(this.#a=!1,!this.#t)return void(this.#t=!0);if(this.#o.getMode()===ae.STAMP)return void this.#o.unselectAll();this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#o.getMode()===ae.HIGHLIGHT&&this.enableTextSelection(),this.#a)return void(this.#a=!1);const{isMac:i}=Ut.platform;if(0!==t.button||t.ctrlKey&&i||t.target!==this.div)return;this.#a=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(t,i,r){const s=this.#o.findParent(i,r);return null!==s&&s!==this&&(s.changeParent(t),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#m(){this.#l=!0;for(const t of this.#s.values())t.isEmpty()&&t.remove();this.#l=!1}render({viewport:t}){this.viewport=t,jr(this.div,t);for(const i of this.#o.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#o.commitOrRemove(),this.#m();const i=this.viewport.rotation,r=t.rotation;if(this.viewport=t,jr(this.div,{rotation:r}),i!==r)for(const s of this.#s.values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#o.viewParameters.realScale}}return n})();class wt{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#e){if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}else this.#e=e}static get _svgFactory(){return le(this,"_svgFactory",new Bm)}static#r(e,{x:t=0,y:i=0,width:r=1,height:s=1}={}){const{style:o}=e;o.top=100*i+"%",o.left=100*t+"%",o.width=100*r+"%",o.height=100*s+"%"}#s(e){const t=wt._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),wt.#r(t,e),t}#a(e,t){const i=wt._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=wt._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r}highlight(e,t,i,r=!1){const s=this.#t++,o=this.#s(e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=wt._svgFactory.createElement("defs");o.append(a);const l=wt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),r&&this.#i.set(s,l);const u=this.#a(a,c),d=wt._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${c}`),this.#n.set(s,o),{id:s,clipPathId:`url(#${u})`}}highlightOutline(e){const t=this.#t++,i=this.#s(e.box);i.classList.add("highlightOutline");const r=wt._svgFactory.createElement("defs");i.append(r);const s=wt._svgFactory.createElement("path");r.append(s);const o=`path_p${this.pageIndex}_${t}`;let a;if(s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),e.free){i.classList.add("free");const u=wt._svgFactory.createElement("mask");r.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const d=wt._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const h=wt._svgFactory.createElement("use");u.append(h),h.setAttribute("href",`#${o}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}const l=wt._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#n.set(t,i),t}finalizeLine(e,t){const i=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),this.#i.delete(e)}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){wt.#r(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}remove(e){null!==this.#e&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear()}}var r4=K.AbortException,s4=K.AnnotationEditorLayer,o4=K.AnnotationEditorParamsType,$T=K.AnnotationEditorType,a4=K.AnnotationEditorUIManager,l4=K.AnnotationLayer,c4=K.AnnotationMode,u4=K.CMapCompressionType,d4=K.ColorPicker,h4=K.DOMSVGFactory,f4=K.DrawLayer,p4=K.FeatureTest,zT=K.GlobalWorkerOptions,g4=K.ImageKind,m4=K.InvalidPDFException,y4=K.MissingPDFException,v4=K.OPS,_4=K.PDFDataRangeTransport,b4=K.PDFDateString,E4=K.PDFWorker,w4=K.PasswordResponses,A4=K.PermissionFlag,C4=K.PixelsPerInch,D4=K.RenderingCancelledException,S4=K.TextLayer,I4=K.UnexpectedResponseException,T4=K.Util,WT=K.VerbosityLevel,M4=K.XfaLayer,x4=K.build,P4=K.createValidAbsoluteUrl,R4=K.fetchData,GT=K.getDocument,N4=K.getFilenameFromUrl,O4=K.getPdfFilenameFromUrl,k4=K.getXfaPageViewport,L4=K.isDataScheme,F4=K.isPdfFile,j4=K.noContextMenu,B4=K.normalizeUnicode,V4=K.setLayerDimensions,H4=K.shadow,ad=K.version;function qT(n,e){this.v=n,this.k=e}function XT(n){return new qT(n,0)}function YT(n){return function(){return new rl(n.apply(this,arguments))}}function rl(n){var e,t;function i(s,o){try{var a=n[s](o),l=a.value,c=l instanceof qT;Promise.resolve(c?l.v:l).then(function(u){if(c){var d="return"===s?"return":"next";if(!l.k||u.done)return i(d,u);u=n[d](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(s,o){return new Promise(function(a,l){var c={key:s,arg:o,resolve:a,reject:l,next:null};t?t=t.next=c:(e=t=c,i(s,o))})},"function"!=typeof n.return&&(this.return=void 0)}function ld(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(ld=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new ld(n)}rl.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},rl.prototype.next=function(n){return this._invoke("next",n)},rl.prototype.throw=function(n){return this._invoke("throw",n)},rl.prototype.return=function(n){return this._invoke("return",n)};var sl={d:(n,e)=>{for(var t in e)sl.o(e,t)&&!sl.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},Re=globalThis.pdfjsViewer={};sl.d(Re,{AnnotationLayerBuilder:()=>fM,DownloadManager:()=>jq,EventBus:()=>py,FindState:()=>Qi,GenericL10n:()=>wi,LinkTarget:()=>Ur,PDFFindController:()=>Dq,PDFHistory:()=>R5,PDFLinkService:()=>fd,PDFPageView:()=>jM,PDFScriptingManager:()=>W5,PDFSinglePageViewer:()=>Y5,PDFViewer:()=>HM,ProgressBar:()=>nq,RenderingStates:()=>ke,ScrollMode:()=>ce,SimpleLinkService:()=>uy,SpreadMode:()=>At,StructTreeLayerBuilder:()=>LM,TextLayerBuilder:()=>lo,XfaLayerBuilder:()=>FM,parseQueryString:()=>cd});const ke={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ce={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},At={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class q4{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}}function eM(n,e,t=!1){let i=n.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");let r=n.offsetTop+n.clientTop,s=n.offsetLeft+n.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||t&&(i.classList.contains("markedContent")||"hidden"===getComputedStyle(i).overflow);)if(r+=i.offsetTop,s+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(void 0!==e.top&&(r+=e.top),void 0!==e.left&&(s+=e.left,i.scrollLeft=s)),i.scrollTop=r}function cd(n){const e=new Map;for(const[t,i]of new URLSearchParams(n))e.set(t.toLowerCase(),i);return e}const tM=/[\x00-\x1F]/g;function ud(n,e=!1){return tM.test(n)?e?n.replaceAll(tM,t=>"\0"===t?"":" "):n.replaceAll("\0",""):n}function ol(n,e,t=0){let i=t,r=n.length-1;if(r<0||!e(n[r]))return n.length;if(e(n[i]))return i;for(;i<r;){const s=i+r>>1;e(n[s])?r=s:i=s+1}return i}function nM(n){if(Math.floor(n)===n)return[n,1];const e=1/n;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const i=n>1?e:n;let l,r=0,s=1,o=1,a=1;for(;;){const c=r+o,u=s+a;if(u>8)break;i<=c/u?(o=c,a=u):(r=c,s=u)}return l=i-r/s<o/a-i?i===n?[r,s]:[s,r]:i===n?[o,a]:[a,o],l}function dd(n,e){return n-n%e}function iM(n){return Number.isInteger(n)&&n%90==0}function rM(n){return n.width<=n.height}new Promise(function(n){window.requestAnimationFrame(n)});const eq=document.documentElement.style;class nq{#e=null;#t=null;#n=0;#i=null;#r=!0;constructor(e){this.#e=e.classList,this.#i=e.style}get percent(){return this.#n}set percent(e){this.#n=function tq(n,e,t){return Math.min(Math.max(n,e),t)}(e,0,100),isNaN(e)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(e){if(!e)return;const i=e.parentNode.offsetWidth-e.offsetWidth;i>0&&this.#i.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(e=5e3){100===this.#n||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#r&&(this.#r=!1,this.#e.add("hidden"))}show(){this.#r||(this.#r=!0,this.#e.remove("hidden"))}}function hd(n){return function rq(n){return n<11904}(n)?function sq(n){return!(65408&n)}(n)?function lq(n){return 32===n||9===n||13===n||10===n}(n)?0:function oq(n){return n>=97&&n<=122||n>=65&&n<=90}(n)||function aq(n){return n>=48&&n<=57}(n)||95===n?1:2:function fq(n){return 3584==(65408&n)}(n)?7:160===n?0:1:function cq(n){return n>=13312&&n<=40959||n>=63744&&n<=64255}(n)?3:function uq(n){return n>=12448&&n<=12543}(n)?4:function dq(n){return n>=12352&&n<=12447}(n)?5:function hq(n){return n>=65376&&n<=65439}(n)?6:1}let sM;const Qi={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},oM={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},aM=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let lM;const vq=new RegExp("\\p{M}+","gu"),_q=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),bq=new RegExp("([^\\p{M}])\\p{M}*$","u"),Eq=new RegExp("^\\p{M}*([^\\p{M}])","u"),wq=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,cM=new Map,uM=new Map;let ay=null,ly=null;function cy(n){const e=[];let t,i;for(;null!==(t=wq.exec(n));){let{index:f}=t;for(const p of t[0]){let g=cM.get(p);g||(g=p.normalize("NFD").length,cM.set(p,g)),e.push([g,f++])}}if(0===e.length&&ay)i=ay;else if(e.length>0&&ly)i=ly;else{const m=`([${Object.keys(oM).join("")}])|([${function pq(){return sM||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",sM}()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;i=0===e.length?ay=new RegExp(m+"|(\\u0000)","gum"):ly=new RegExp(m+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const r=[];for(;null!==(t=vq.exec(n));)r.push([t[0].length,t.index]);let s=n.normalize("NFD");const o=[[0,0]];let a=0,l=0,c=0,u=0,d=0,h=!1;return s=s.replace(i,(f,p,g,y,m,v,_,b,E,w)=>{if(w-=u,p){const C=oM[p],I=C.length;for(let A=1;A<I;A++)o.push([w-c+A,c-A]);return c-=I-1,C}if(g){let C=uM.get(g);C||(C=g.normalize("NFKC"),uM.set(g,C));const I=C.length;for(let A=1;A<I;A++)o.push([w-c+A,c-A]);return c-=I-1,C}if(y)return h=!0,w+d===r[a]?.[1]?++a:(o.push([w-1-c+1,c-1]),c-=1,u+=1),o.push([w-c+1,c]),u+=1,d+=1,y.charAt(0);if(m){const C=m.endsWith("\n"),I=C?m.length-2:m.length;h=!0;let A=I;w+d===r[a]?.[1]&&(A-=r[a][0],++a);for(let T=1;T<=A;T++)o.push([w-1-c+T,c-T]);return c-=A,u+=A,C?(o.push([(w+=I-1)-c+1,1+c]),c+=1,u+=1,d+=1,m.slice(0,I)):m}if(v)return o.push([w-c+(v.length-2),1+c]),c+=1,u+=1,d+=1,v.slice(0,-2);if(_)return o.push([w-c+(_.length-1),c]),u+=1,d+=1,_.slice(0,-1);if(b)return o.push([w-c+1,c-1]),c-=1,u+=1,d+=1," ";if(w+d===e[l]?.[1]){const C=e[l][0]-1;++l;for(let I=1;I<=C;I++)o.push([w-(c-I),c-I]);c-=C,u+=C}return E}),o.push([s.length,c]),[s,o,h]}class Dq{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:i=!0}){this._linkService=e,this._eventBus=t,this.#t=i,this.onIsPageVisible=null,this.#r(),t._on("find",this.#i.bind(this)),t._on("findbarclose",this.#v.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#r(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#i(e){if(!e)return;const t=this._pdfDocument,{type:i}=e;(null===this.#e||this.#a(e))&&(this._dirtyMatch=!0),this.#e=e,"highlightallchange"!==i&&this.#E(Qi.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#u();const r=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#p():"again"===i?(this.#p(),r&&this.#e.highlightAll&&this.#h()):"highlightallchange"===i?(s?this.#p():this._highlightMatches=!0,this.#h()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},250)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:r=-1}){this._scrollMatches&&e&&-1!==r&&r===this._selected.matchIdx&&-1!==i&&i===this._selected.pageIdx&&(this._scrollMatches=!1,eM(e,{top:-50,left:t+-400},!0))}#r(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){const{query:e}=this.#e;return"string"==typeof e?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=cy(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>cy(t)[0])}#a(e){const t=e.query,i=this.#e.query,r=typeof t;if(r!==typeof i)return!0;if("string"===r){if(t!==i)return!0}else if(JSON.stringify(t)!==JSON.stringify(i))return!0;switch(e.type){case"again":const o=this._selected.pageIdx+1,a=this._linkService;return o>=1&&o<=a.pagesCount&&o!==a.page&&!(this.onIsPageVisible?.(o)??1);case"highlightallchange":return!1}return!0}#l(e,t,i){let r=e.slice(0,t).match(bq);if(r){const s=e.charCodeAt(t),o=r[1].charCodeAt(0);if(hd(s)===hd(o))return!1}if(r=e.slice(t+i).match(Eq),r){const s=e.charCodeAt(t+i-1),o=r[1].charCodeAt(0);if(hd(s)===hd(o))return!1}return!0}#d(e,t){const{matchDiacritics:i}=this.#e;let r=!1;return(e=e.replaceAll(_q,(o,a,l,c,u,d)=>a?`[ ]*\\${a}[ ]*`:l?`[ ]*${l}[ ]*`:c?"[ ]+":i?u||d:u?aM.has(u.charCodeAt(0))?u:"":t?(r=!0,`${d}\\p{M}*`):d)).endsWith("[ ]*")&&(e=e.slice(0,e.length-4)),i&&t&&(lM||=String.fromCharCode(...aM),r=!0,e=`${e}(?=[${lM}]|[^\\p{M}]|$)`),[r,e]}#c(e){const t=this.#s;if(0===t.length)return;const r=this.match(t,this._pageContents[e],e),s=this._pageMatches[e]=[],o=this._pageMatchesLength[e]=[],a=this._pageDiffs[e];r?.forEach(({index:c,length:u})=>{const[d,h]=function Cq(n,e,t){if(!n)return[e,t];const i=e,r=e+t-1;let s=ol(n,u=>u[0]>=i);n[s][0]>i&&--s;let o=ol(n,u=>u[0]>=r,s);n[o][0]>r&&--o;const a=i+n[s][1];return[a,r+n[o][1]+1-a]}(a,c,u);h&&(s.push(d),o.push(h))}),this.#e.highlightAll&&this.#o(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());const l=s.length;this._matchesCountTotal+=l,this.#t?l>0&&this.#w():++this.#n===this._linkService.pagesCount&&this.#w()}match(e,t,i){const r=this._hasDiacritics[i];let s=!1;if("string"==typeof e?[s,e]=this.#d(e,r):e=e.sort().reverse().map(d=>{const[h,f]=this.#d(d,r);return s||=h,`(${f})`}).join("|"),!e)return;const{caseSensitive:o,entireWord:a}=this.#e;e=new RegExp(e,`g${s?"u":""}${o?"":"i"}`);const c=[];let u;for(;null!==(u=e.exec(t));)a&&!this.#l(t,u.index,u[0].length)||c.push({index:u.index,length:u[0].length});return c}#u(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0};for(let i=0,r=this._linkService.pagesCount;i<r;i++){const{promise:s,resolve:o}=Promise.withResolvers();this._extractTextPromises[i]=s,e=e.then(()=>this._pdfDocument.getPage(i+1).then(a=>a.getTextContent(t)).then(a=>{const l=[];for(const c of a.items)l.push(c.str),c.hasEOL&&l.push("\n");[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=cy(l.join("")),o()},a=>{console.error(`Unable to get text content for page ${i+1}`,a),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,o()}))}}#o(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#h(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){const e=this.#e.findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#h();for(let o=0;o<i;o++)this._pendingFindMatches.has(o)||(this._pendingFindMatches.add(o),this._extractTextPromises[o].then(()=>{this._pendingFindMatches.delete(o),this.#c(o)}))}if(0===this.#s.length)return void this.#E(Qi.FOUND);if(this._resumePageIdx)return;const s=this._offset;if(this._pagesToSearch=i,null!==s.matchIdx){if(!e&&s.matchIdx+1<this._pageMatches[s.pageIdx].length||e&&s.matchIdx>0)return s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,void this.#m(!0);this.#y(e)}this.#g()}#f(e){const t=this._offset,i=e.length,r=this.#e.findPrevious;return i?(t.matchIdx=r?i-1:0,this.#m(!0),!0):(this.#y(r),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this.#m(!1),!0))}#g(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#f(e))}#y(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=i||t.pageIdx<0)&&(t.pageIdx=e?i-1:0,t.wrapped=!0)}#m(e=!1){let t=Qi.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,e){const r=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=i?Qi.WRAPPED:Qi.FOUND,-1!==r&&r!==this._selected.pageIdx&&this.#o(r)}this.#E(t,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#v(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#E(Qi.FOUND),this._highlightMatches=!1,this.#h())})}#b(){const{pageIdx:e,matchIdx:t}=this._selected;let i=0,r=this._matchesCountTotal;if(-1!==t){for(let s=0;s<e;s++)i+=this._pageMatches[s]?.length||0;i+=t+1}return(i<1||i>r)&&(i=r=0),{current:i,total:r}}#w(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#b()})}#E(e,t=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===Qi.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#b(),rawQuery:this.#e?.query??null})}}const Ur={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class fd{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:r=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=i,this._ignoreDestinationZoom=r,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}goToDestination(e){var t=this;return x(function*(){if(!t.pdfDocument)return;let i,r,s;if("string"==typeof e?(i=e,r=yield t.pdfDocument.getDestination(e)):(i=null,r=yield e),!Array.isArray(r))return void console.error(`goToDestination: "${r}" is not a valid destination array, for dest="${e}".`);const[o]=r;if(o&&"object"==typeof o){if(s=t.pdfDocument.cachedPageNumber(o),!s)try{s=(yield t.pdfDocument.getPageIndex(o))+1}catch{return void console.error(`goToDestination: "${o}" is not a valid page reference, for dest="${e}".`)}}else Number.isInteger(o)&&(s=o+1);!s||s<1||s>t.pagesCount?console.error(`goToDestination: "${s}" is not a valid page number, for dest="${e}".`):(t.pdfHistory&&(t.pdfHistory.pushCurrentPosition(),t.pdfHistory.push({namedDest:i,explicitDest:r,pageNumber:s})),t.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:r,ignoreDestinationZoom:t._ignoreDestinationZoom}))})()}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(t)&&t>0&&t<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})):console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`)}addLinkAttributes(e,t,i=!1){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');const r=i?Ur.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let o="";switch(r){case Ur.NONE:break;case Ur.SELF:o="_self";break;case Ur.BLANK:o="_blank";break;case Ur.PARENT:o="_parent";break;case Ur.TOP:o="_top"}e.target=o,e.rel="string"==typeof s?s:"noopener noreferrer nofollow"}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,i;if(e.includes("=")){const r=cd(e);if(r.has("search")){const s=r.get("search").replaceAll('"',""),o="true"===r.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:o?s:s.match(/\S+/g)})}if(r.has("page")&&(t=0|r.get("page")||1),r.has("zoom")){const s=r.get("zoom").split(","),o=s[0],a=parseFloat(o);o.includes("Fit")?"Fit"===o||"FitB"===o?i=[null,{name:o}]:"FitH"===o||"FitBH"===o||"FitV"===o||"FitBV"===o?i=[null,{name:o},s.length>1?0|s[1]:null]:"FitR"===o?5!==s.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:o},0|s[1],0|s[2],0|s[3],0|s[4]]:console.error(`PDFLinkService.setHash: "${o}" is not a valid zoom value.`):i=[null,{name:"XYZ"},s.length>1?0|s[1]:null,s.length>2?0|s[2]:null,a?a/100:o]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:!0}):t&&(this.page=t),r.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:r.get("pagemode")}),void(r.has("nameddest")&&this.goToDestination(r.get("nameddest")))}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}"string"==typeof i||fd.#e(i)?this.goToDestination(i):console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){var t=this;return x(function*(){if(!t.pdfDocument)return;const i=t.pdfDocument,r=yield t.pdfViewer.optionalContentConfigPromise;i===t.pdfDocument&&(r.setOCGState(e),t.pdfViewer.optionalContentConfigPromise=Promise.resolve(r))})()}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;const[t,i,...r]=e;if(("object"!=typeof t||!Number.isInteger(t?.num)||!Number.isInteger(t?.gen))&&!Number.isInteger(t)||"object"!=typeof i||"string"!=typeof i?.name)return!1;const s=r.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;o=!1;break;default:return!1}for(const a of r)if(!("number"==typeof a||o&&null===a))return!1;return!0}}class uy extends fd{setDocument(e,t=null){}}const{AbortException:Iq,AnnotationEditorLayer:Tq,AnnotationEditorType:rn,AnnotationEditorUIManager:Mq,AnnotationLayer:xq,AnnotationMode:_i,createValidAbsoluteUrl:Pq,DrawLayer:Rq,fetchData:dM,getPdfFilenameFromUrl:Nq,isPdfFile:Oq,normalizeUnicode:kq,PermissionFlag:pd,PixelsPerInch:bi,RenderingCancelledException:dy,setLayerDimensions:Lq,shadow:gd,TextLayer:Fq,version:hM,XfaLayer:hy}=globalThis.pdfjsLib;class fM{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:i,annotationStorage:r=null,imageResourcesPath:s="",renderForms:o=!0,enableScripting:a=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:c=null,annotationCanvasMap:u=null,accessibilityManager:d=null,annotationEditorUIManager:h=null,onAppend:f=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=o,this.annotationStorage=r,this.enableScripting=a,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=c||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=d,this._annotationEditorUIManager=h,this.#e=f,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}render(e,t="display"){var i=this;return x(function*(){if(i.div){if(i._cancelled||!i.annotationLayer)return;return void i.annotationLayer.update({viewport:e.clone({dontFlip:!0})})}const[r,s,o]=yield Promise.all([i.pdfPage.getAnnotations({intent:t}),i._hasJSActionsPromise,i._fieldObjectsPromise]);if(i._cancelled)return;const a=i.div=document.createElement("div");a.className="annotationLayer",i.#e?.(a),0!==r.length?(i.annotationLayer=new xq({div:a,accessibilityManager:i._accessibilityManager,annotationCanvasMap:i._annotationCanvasMap,annotationEditorUIManager:i._annotationEditorUIManager,page:i.pdfPage,viewport:e.clone({dontFlip:!0})}),yield i.annotationLayer.render({annotations:r,imageResourcesPath:i.imageResourcesPath,renderForms:i.renderForms,linkService:i.linkService,downloadManager:i.downloadManager,annotationStorage:i.annotationStorage,enableScripting:i.enableScripting,hasJSActions:s,fieldObjects:o}),i.linkService.isInPresentationMode&&i.#n(3),i.#t||(i.#t=new AbortController,i._eventBus?._on("presentationmodechanged",l=>{i.#n(l.state)},{signal:i.#t.signal}))):i.hide()})()}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let t=!1;switch(e){case 3:t=!0;break;case 1:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=t)}}function pM(n,e){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=n,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}class jq{#e=new WeakMap;downloadData(e,t,i){pM(URL.createObjectURL(new Blob([e],{type:i})),t)}openOrDownloadData(e,t,i=null){const s=Oq(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,i){let r;if(e)r=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!Pq(t,"http://example.com"))return void console.error(`download - not a valid URL: ${t}`);r=t+"#pdfjs.action=download"}pM(r,i)}}const gM_EVENT="event",gM_TIMEOUT="timeout";function fy(){return(fy=x(function*({target:n,name:e,delay:t=0}){if("object"!=typeof n||!e||"string"!=typeof e||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:i,resolve:r}=Promise.withResolvers(),s=new AbortController;function o(c){s.abort(),clearTimeout(l),r(c)}n[n instanceof py?"_on":"addEventListener"](e,o.bind(null,gM_EVENT),{signal:s.signal});const l=setTimeout(o.bind(null,gM_TIMEOUT),t);return i})).apply(this,arguments)}class py{#e=Object.create(null);on(e,t,i=null){this._on(e,t,{external:!0,once:i?.once,signal:i?.signal})}off(e,t,i=null){this._off(e,t)}dispatch(e,t){const i=this.#e[e];if(!i||0===i.length)return;let r;for(const{listener:s,external:o,once:a}of i.slice(0))a&&this._off(e,s),o?(r||=[]).push(s):s(t);if(r){for(const s of r)s(t);r=null}}_on(e,t,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted)return void console.error("Cannot use an `aborted` signal.");const a=()=>this._off(e,t);r=()=>o.removeEventListener("abort",a),o.addEventListener("abort",a)}(this.#e[e]||=[]).push({listener:t,external:!0===i?.external,once:!0===i?.once,rmAbort:r})}_off(e,t,i=null){const r=this.#e[e];if(r)for(let s=0,o=r.length;s<o;s++){const a=r[s];if(a.listener===t)return a.rmAbort?.(),void r.splice(s,1)}}}class md{constructor(e){this.value=e}valueOf(){return this.value}}class Ke extends md{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class Ei extends md{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class al extends md{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}const mM=100,Vq="\u2068",Hq="\u2069";function Uq(n,e,t){return t===e||t instanceof Ei&&e instanceof Ei&&t.value===e.value||e instanceof Ei&&"string"==typeof t&&t===n.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value)}function yM(n,e,t){return e[t]?ao(n,e[t].value):(n.reportError(new RangeError("No default")),new Ke)}function gy(n,e){const t=[],i=Object.create(null);for(const r of e)"narg"===r.type?i[r.name]=ll(n,r.value):t.push(ll(n,r));return{positional:t,named:i}}function ll(n,e){switch(e.type){case"str":return e.value;case"num":return new Ei(e.value,{minimumFractionDigits:e.precision});case"var":return function $q(n,{name:e}){let t;if(n.params){if(!Object.prototype.hasOwnProperty.call(n.params,e))return new Ke(`$${e}`);t=n.params[e]}else{if(!n.args||!Object.prototype.hasOwnProperty.call(n.args,e))return n.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Ke(`$${e}`);t=n.args[e]}if(t instanceof md)return t;switch(typeof t){case"string":return t;case"number":return new Ei(t);case"object":if(t instanceof Date)return new al(t.getTime());default:return n.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new Ke(`$${e}`)}}(n,e);case"mesg":return function zq(n,{name:e,attr:t}){const i=n.bundle._messages.get(e);if(!i)return n.reportError(new ReferenceError(`Unknown message: ${e}`)),new Ke(e);if(t){const r=i.attributes[t];return r?ao(n,r):(n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new Ke(`${e}.${t}`))}return i.value?ao(n,i.value):(n.reportError(new ReferenceError(`No value: ${e}`)),new Ke(e))}(n,e);case"term":return function Wq(n,{name:e,attr:t,args:i}){const r=`-${e}`,s=n.bundle._terms.get(r);if(!s)return n.reportError(new ReferenceError(`Unknown term: ${r}`)),new Ke(r);if(t){const a=s.attributes[t];if(a){n.params=gy(n,i).named;const l=ao(n,a);return n.params=null,l}return n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new Ke(`${r}.${t}`)}n.params=gy(n,i).named;const o=ao(n,s.value);return n.params=null,o}(n,e);case"func":return function Gq(n,{name:e,args:t}){let i=n.bundle._functions[e];if(!i)return n.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Ke(`${e}()`);if("function"!=typeof i)return n.reportError(new TypeError(`Function ${e}() is not callable`)),new Ke(`${e}()`);try{let r=gy(n,t);return i(r.positional,r.named)}catch(r){return n.reportError(r),new Ke(`${e}()`)}}(n,e);case"select":return function qq(n,{selector:e,variants:t,star:i}){let r=ll(n,e);if(r instanceof Ke)return yM(n,t,i);for(const s of t)if(Uq(n,r,ll(n,s.key)))return ao(n,s.value);return yM(n,t,i)}(n,e);default:return new Ke}}function vM(n,e){if(n.dirty.has(e))return n.reportError(new RangeError("Cyclic reference")),new Ke;n.dirty.add(e);const t=[],i=n.bundle._useIsolating&&e.length>1;for(const r of e)if("string"!=typeof r){if(n.placeables++,n.placeables>mM)throw n.dirty.delete(e),new RangeError(`Too many placeables expanded: ${n.placeables}, max allowed is ${mM}`);i&&t.push(Vq),t.push(ll(n,r).toString(n)),i&&t.push(Hq)}else t.push(n.bundle._transform(r));return n.dirty.delete(e),t.join("")}function ao(n,e){return"string"==typeof e?n.bundle._transform(e):vM(n,e)}class Xq{constructor(e,t,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=i}reportError(e){if(!(this.errors&&e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let i=this.bundle._intls.get(e);i||(i={},this.bundle._intls.set(e,i));let r=JSON.stringify(t);return i[r]||(i[r]=new e(this.bundle.locales,t)),i[r]}}function yd(n,e){const t=Object.create(null);for(const[i,r]of Object.entries(n))e.includes(i)&&(t[i]=r.valueOf());return t}const _M=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Yq(n,e){let t=n[0];if(t instanceof Ke)return new Ke(`NUMBER(${t.valueOf()})`);if(t instanceof Ei)return new Ei(t.valueOf(),{...t.opts,...yd(e,_M)});if(t instanceof al)return new Ei(t.valueOf(),{...yd(e,_M)});throw new TypeError("Invalid argument to NUMBER")}const bM=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Kq(n,e){let t=n[0];if(t instanceof Ke)return new Ke(`DATETIME(${t.valueOf()})`);if(t instanceof al)return new al(t.valueOf(),{...t.opts,...yd(e,bM)});if(t instanceof Ei)return new al(t.valueOf(),{...yd(e,bM)});throw new TypeError("Invalid argument to DATETIME")}const EM=new Map;class Qq{constructor(e,{functions:t,useIsolating:i=!0,transform:r=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:Yq,DATETIME:Kq,...t},this._useIsolating=i,this._transform=r,this._intls=function Zq(n){const e=Array.isArray(n)?n.join(" "):n;let t=EM.get(e);return void 0===t&&(t=new Map,EM.set(e,t)),t}(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const i=[];for(let r=0;r<e.body.length;r++){let s=e.body[r];if(s.id.startsWith("-")){if(!1===t&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(!1===t&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(e,t=null,i=null){if("string"==typeof e)return this._transform(e);let r=new Xq(this,i,t);try{return vM(r,e).toString(r)}catch(s){if(r.errors&&s instanceof Error)return r.errors.push(s),(new Ke).toString(r);throw s}}}const my=/^(-?[a-zA-Z][\w-]*) *= */gm,wM=/\.([a-zA-Z][\w-]*) *= */y,Jq=/\*?\[/y,yy=/(-?[0-9]+(?:\.([0-9]+))?)/y,e5=/([a-zA-Z][\w-]*)/y,AM=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,t5=/^[A-Z][A-Z0-9_-]*$/,vd=/([^{}\n\r]+)/y,n5=/([^\\"\n\r]*)/y,CM=/\\([\\"])/y,DM=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,i5=/^\n+/,SM=/ +$/,r5=/ *\r?\n/g,s5=/( *)$/,o5=/{\s*/y,IM=/\s*}/y,a5=/\[\s*/y,l5=/\s*] */y,c5=/\s*\(\s*/y,u5=/\s*->\s*/y,d5=/\s*:\s*/y,h5=/\s*,?\s*/y,f5=/\s+/y;class p5{constructor(e){this.body=[],my.lastIndex=0;let t=0;for(;;){let A=my.exec(e);if(null===A)break;t=my.lastIndex;try{this.body.push(l(A[1]))}catch(T){if(T instanceof SyntaxError)continue;throw T}}function i(A){return A.lastIndex=t,A.test(e)}function r(A,T){if(e[t]===A)return t++,!0;if(T)throw new T(`Expected ${A}`);return!1}function s(A,T){if(i(A))return t=A.lastIndex,!0;if(T)throw new T(`Expected ${A.toString()}`);return!1}function o(A){A.lastIndex=t;let T=A.exec(e);if(null===T)throw new SyntaxError(`Expected ${A.toString()}`);return t=A.lastIndex,T}function a(A){return o(A)[1]}function l(A){let T=u(),N=function c(){let A=Object.create(null);for(;i(wM);){let T=a(wM),N=u();if(null===N)throw new SyntaxError("Expected attribute value");A[T]=N}return A}();if(null===T&&0===Object.keys(N).length)throw new SyntaxError("Expected message value or attributes");return{id:A,value:T,attributes:N}}function u(){let A;if(i(vd)&&(A=a(vd)),"{"===e[t]||"}"===e[t])return d(A?[A]:[],1/0);let T=w();return T?A?d([A,T],T.length):(T.value=C(T.value,i5),d([T],T.length)):A?C(A,SM):null}function d(A=[],T){for(;;){if(i(vd)){A.push(a(vd));continue}if("{"===e[t]){A.push(h());continue}if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");let ye=w();if(!ye)break;A.push(ye),T=Math.min(T,ye.length)}let N=A.length-1,me=A[N];"string"==typeof me&&(A[N]=C(me,SM));let be=[];for(let ye of A)ye instanceof TM&&(ye=ye.value.slice(0,ye.value.length-T)),ye&&be.push(ye);return be}function h(){s(o5,SyntaxError);let A=f();if(s(IM))return A;if(s(u5)){let T=function y(){let N,A=[],T=0;for(;i(Jq);){r("*")&&(N=T);let me=m(),be=u();if(null===be)throw new SyntaxError("Expected variant value");A[T++]={key:me,value:be}}if(0===T)return null;if(void 0===N)throw new SyntaxError("Expected default variant");return{variants:A,star:N}}();return s(IM,SyntaxError),{type:"select",selector:A,...T}}throw new SyntaxError("Unclosed placeable")}function f(){if("{"===e[t])return h();if(i(AM)){let[,A,T,N=null]=o(AM);if("$"===A)return{type:"var",name:T};if(s(c5)){let me=function p(){let A=[];for(;;){switch(e[t]){case")":return t++,A;case void 0:throw new SyntaxError("Unclosed argument list")}A.push(g()),s(h5)}}();if("-"===A)return{type:"term",name:T,attr:N,args:me};if(t5.test(T))return{type:"func",name:T,args:me};throw new SyntaxError("Function names must be all upper-case")}return"-"===A?{type:"term",name:T,attr:N,args:[]}:{type:"mesg",name:T,attr:N}}return v()}function g(){let A=f();return"mesg"!==A.type?A:s(d5)?{type:"narg",name:A.name,value:v()}:A}function m(){let A;return s(a5,SyntaxError),A=i(yy)?_():{type:"str",value:a(e5)},s(l5,SyntaxError),A}function v(){if(i(yy))return _();if('"'===e[t])return function b(){r('"',SyntaxError);let A="";for(;;){if(A+=a(n5),"\\"!==e[t]){if(r('"'))return{type:"str",value:A};throw new SyntaxError("Unclosed string literal")}A+=E()}}();throw new SyntaxError("Invalid expression")}function _(){let[,A,T=""]=o(yy),N=T.length;return{type:"num",value:parseFloat(A),precision:N}}function E(){if(i(CM))return a(CM);if(i(DM)){let[,A,T]=o(DM),N=parseInt(A||T,16);return N<=55295||57344<=N?String.fromCodePoint(N):"\ufffd"}throw new SyntaxError("Unknown escape sequence")}function w(){let A=t;switch(s(f5),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return I(e.slice(A,t))}return" "===e[t-1]&&I(e.slice(A,t))}function C(A,T){return A.replace(T,"")}function I(A){let T=A.replace(r5,"\n"),N=s5.exec(A)[1].length;return new TM(T,N)}}}class TM{constructor(e,t){this.value=e,this.length=t}}const g5=/<|&#?\w+;/,m5={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},y5={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function v5(n,e){const{value:t}=e;if("string"==typeof t)if("title"===n.localName&&"http://www.w3.org/1999/xhtml"===n.namespaceURI)n.textContent=t;else if(g5.test(t)){const i=n.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=t,function _5(n,e){for(const t of n.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){const i=E5(e,t);n.replaceChild(i,t);continue}if(A5(t)){const i=w5(t);n.replaceChild(i,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),n.replaceChild(vy(t),t)}e.textContent="",e.appendChild(n)}(i.content,n)}else n.textContent=t;MM(e,n)}function b5(n,e){if(!n)return!1;for(let t of n)if(t.name===e)return!0;return!1}function MM(n,e){const t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(const i of Array.from(e.attributes))xM(i.name,e,t)&&!b5(n.attributes,i.name)&&e.removeAttribute(i.name);if(n.attributes)for(const i of Array.from(n.attributes))xM(i.name,e,t)&&e.getAttribute(i.name)!==i.value&&e.setAttribute(i.name,i.value)}function E5(n,e){const t=e.getAttribute("data-l10n-name"),i=n.querySelector(`[data-l10n-name="${t}"]`);return i?i.localName!==e.localName?(console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${i.localName}).`),vy(e)):(n.removeChild(i),PM(e,i.cloneNode(!1))):(console.warn(`An element named "${t}" wasn't found in the source.`),vy(e))}function w5(n){const e=n.ownerDocument.createElement(n.localName);return PM(n,e)}function vy(n){return n.ownerDocument.createTextNode(n.textContent)}function A5(n){const e=m5[n.namespaceURI];return e&&e.includes(n.localName)}function xM(n,e,t=null){if(t&&t.includes(n))return!0;const i=y5[e.namespaceURI];if(!i)return!1;const r=n.toLowerCase(),s=e.localName;if(i.global.includes(r))return!0;if(!i[s])return!1;if(i[s].includes(r))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===s&&"value"===r){const o=e.type.toLowerCase();if("submit"===o||"button"===o||"reset"===o)return!0}return!1}function PM(n,e){return e.textContent=n.textContent,MM(n,e),e}class RM extends Array{static from(e){return e instanceof this?e:new this(e)}}Symbol;class C5 extends RM{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let t=0;return{next:()=>x(function*(){return e.length<=t&&e.push(e.iterator.next()),e[t++]})()}}touchNext(e=1){var t=this;return x(function*(){let i=0;for(;i++<e;){const r=t[t.length-1];if(r&&(yield r).done)break;t.push(t.iterator.next())}return t[t.length-1]})()}}class D5{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){var i=this;return x(function*(){const r=[];let s=!1;var l,o=!1,a=!1;try{for(var u,c=function U4(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new ld(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(i.bundles);o=!(u=yield c.next()).done;o=!1){const d=u.value;{s=!0;const h=T5(t,d,e,r);if(0===h.size)break;if(typeof console<"u"){const f=d.locales[0],p=Array.from(h).join(", ");console.warn(`[fluent] Missing translations in ${f}: ${p}`)}}}}catch(d){a=!0,l=d}finally{try{o&&null!=c.return&&(yield c.return())}finally{if(a)throw l}}return!s&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(e)}.\n  resourceIds: ${JSON.stringify(i.resourceIds)}.`),r})()}formatMessages(e){return this.formatWithFallback(e,I5)}formatValues(e){return this.formatWithFallback(e,S5)}formatValue(e,t){var i=this;return x(function*(){const[r]=yield i.formatValues([{id:e,args:t}]);return r})()}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=C5.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function S5(n,e,t,i){return t.value?n.formatPattern(t.value,i,e):null}function I5(n,e,t,i){const r={value:null,attributes:null};t.value&&(r.value=n.formatPattern(t.value,i,e));let s=Object.keys(t.attributes);if(s.length>0){r.attributes=new Array(s.length);for(let[o,a]of s.entries()){let l=n.formatPattern(t.attributes[a],i,e);r.attributes[o]={name:a,value:l}}}return r}function T5(n,e,t,i){const r=[],s=new Set;return t.forEach(({id:o,args:a},l)=>{if(void 0!==i[l])return;let c=e.getMessage(o);if(c){if(r.length=0,i[l]=n(e,r,c,a),r.length>0&&typeof console<"u"){const u=e.locales[0],d=r.join(", ");console.warn(`[fluent][resolver] errors in ${u}/${o}: ${d}.`)}}else s.add(o)}),s}const $r="data-l10n-id",cl="data-l10n-args",M5=`[${$r}]`;class x5 extends D5{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[$r,cl]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,i){return e.setAttribute($r,t),i?e.setAttribute(cl,JSON.stringify(i)):e.removeAttribute(cl),e}getAttributes(e){return{id:e.getAttribute($r),args:JSON.parse(e.getAttribute(cl)||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const i of t.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(const r of this.getTranslatables(i))this.pendingElements.add(r);else i.hasAttribute($r)&&this.pendingElements.add(i)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){var t=this;return x(function*(){if(!e.length)return;const i=e.map(t.getKeysForElement),r=yield t.formatMessages(i);return t.applyTranslations(e,r)})()}applyTranslations(e,t){this.pauseObserving();for(let i=0;i<e.length;i++)void 0!==t[i]&&v5(e[i],t[i]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll(M5));return"function"==typeof e.hasAttribute&&e.hasAttribute($r)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute($r),args:JSON.parse(e.getAttribute(cl)||null)}}}class _d{#e;#t=new Set;#n;#i;constructor({lang:e,isRTL:t},i=null){this.#n=_d.#r(e),this.#i=i,this.#e=t??_d.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#i=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e,t=null,i){var r=this;return x(function*(){return Array.isArray(e)?(e=e.map(a=>({id:a})),(yield r.#i.formatMessages(e)).map(a=>a.value)):(yield r.#i.formatMessages([{id:e,args:t}]))[0]?.value||i})()}translate(e){var t=this;return x(function*(){t.#t.add(e);try{t.#i.connectRoot(e),yield t.#i.translateRoots()}catch{}})()}translateOnce(e){var t=this;return x(function*(){try{yield t.#i.translateElements([e])}catch(i){console.error(`translateOnce: "${i}".`)}})()}destroy(){var e=this;return x(function*(){for(const t of e.#t)e.#i.disconnectRoot(t);e.#t.clear(),e.#i.pauseObserving()})()}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#r(e){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e=e?.toLowerCase()||"en-us"]||e}static#s(e){const t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}}function NM(n,e){const t=new p5(e),i=new Qq(n),r=i.addResource(t);return r.length&&console.error("L10n errors",r),i}class wi extends _d{constructor(e){super({lang:e});const t=e?wi.#e.bind(wi,"en-us",this.getLanguage()):wi.#i.bind(wi,this.getLanguage());this._setL10n(new x5([],t))}static#e(e,t){var i=this;return YT(function*(){const{baseURL:r,paths:s}=yield XT(i.#n()),o=[t];if(e!==t){const a=t.split("-",1)[0];a!==t&&o.push(a),o.push(e)}for(const a of o){const l=yield XT(i.#t(a,r,s));l?yield l:"en-us"===a&&(yield i.#r(a))}})()}static#t(e,t,i){return x(function*(){const r=i[e];if(!r)return null;const s=new URL(r,t),o=yield dM(s,"text");return NM(e,o)})()}static#n(){return x(function*(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),t=yield dM(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}})()}static#i(e){var t=this;return YT(function*(){yield t.#r(e)})()}static#r(e){return x(function*(){return NM(e,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties\u2026\npdfjs-document-properties-button-label = Document Properties\u2026\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } \xd7 { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } \xd7 { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing\u2026\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document\u2026\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text =\n    .aria-label = Text Editor\npdfjs-free-text-default-content = Start typing\u2026\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, \u201cA young man sits down at a table to eat a meal\u201d\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner \u2014 resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle \u2014 resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner \u2014 resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right \u2014 resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner \u2014 resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle \u2014 resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner \u2014 resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left \u2014 resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here\u2026\npdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close')})()}}function by(){return document.location.hash}class R5{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:i=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const r=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===i,this._initialized=!0,this.#u();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=by(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#r(s,!0)||t){const{hash:a,page:l,rotation:c}=this.#a(!0);return!a||r||t?void this.#t(null,!0):void this.#t({hash:a,page:l,rotation:c},!0)}const o=s.destination;this.#s(o,s.uid,!0),void 0!==o.rotation&&(this._initialRotation=o.rotation),o.dest?(this._initialBookmark=JSON.stringify(o.dest),this._destination.page=null):o.hash?this._initialBookmark=o.hash:o.page&&(this._initialBookmark=`page=${o.page}`)}reset(){this._initialized&&(this.#c(),this._initialized=!1,this.#o()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(t))return void console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);if(!this.#i(i)&&(null!==i||this._destination))return void console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);const r=e||JSON.stringify(t);if(!r)return;let s=!1;if(this._destination&&(function N5(n,e){return"string"==typeof n&&"string"==typeof e&&(n===e||cd(n).get("nameddest")===e)}(this._destination.hash,r)||function O5(n,e){function t(i,r){if(typeof i!=typeof r||Array.isArray(i)||Array.isArray(r))return!1;if(null!==i&&"object"==typeof i&&null!==r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const s in i)if(!t(i[s],r[s]))return!1;return!0}return i===r||Number.isNaN(i)&&Number.isNaN(r)}if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let i=0,r=n.length;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:r,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#i(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){const i=t||!this._destination,r={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};let s;if(this.#s(e,r.uid),this._updateUrl&&e?.hash){const o=document.location.href.split("#",1)[0];o.startsWith("file://")||(s=`${o}#${e.hash}`)}i?window.history.replaceState(r,"",s):window.history.pushState(r,"",s)}#n(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination)return void this.#t(t);if(this._destination.temporary)return void this.#t(t,!0);if(this._destination.hash===t.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this.#t(t,i)}#i(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#r(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if("reload"!==i?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}#s(e,t,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#a(e=!1){const t=unescape(by()).substring(1),i=cd(t),r=i.get("nameddest")||"";let s=0|i.get("page");return(!this.#i(s)||e&&r.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#l({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},1e3))}#d({state:e}){const t=by(),i=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:s,page:o,rotation:a}=this.#a();return void this.#t({hash:s,page:o,rotation:a},!0)}if(!this.#r(e))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,function Bq(n){return fy.apply(this,arguments)}({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const r=e.destination;this.#s(r,e.uid,!0),iM(r.rotation)&&(this.linkService.rotation=r.rotation),r.dest?this.linkService.goToDestination(r.dest):r.hash?this.linkService.setHash(r.hash):r.page&&(this.linkService.page=r.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#c(){(!this._destination||this._destination.temporary)&&this.#n()}#u(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#l.bind(this),{signal:e}),window.addEventListener("popstate",this.#d.bind(this),{signal:e}),window.addEventListener("pagehide",this.#c.bind(this),{signal:e})}#o(){this.#e?.abort(),this.#e=null}}class k5{#e=null;#t=null;#n=null;#i=null;#r;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new wi,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#r=e.uiManager,this.#e=e.annotationLayer||null,this.#i=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null}render(e,t="display"){var i=this;return x(function*(){if("display"!==t||i._cancelled)return;const r=e.clone({dontFlip:!0});if(i.div)return i.annotationEditorLayer.update({viewport:r}),void i.show();const s=i.div=document.createElement("div");s.className="annotationEditorLayer",s.hidden=!0,s.dir=i.#r.direction,i.#n?.(s),i.annotationEditorLayer=new Tq({uiManager:i.#r,div:s,accessibilityManager:i.accessibilityManager,pageIndex:i.pdfPage.pageNumber-1,l10n:i.l10n,viewport:r,annotationLayer:i.#e,textLayer:i.#i,drawLayer:i.#t}),i.annotationEditorLayer.render({viewport:r,div:s,annotations:null,intent:t}),i.show()})()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}}{var Ey=new Map;const n=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,i=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===e&&t>1||i)&&Ey.set("maxCanvasPixels",5242880),i&&Ey.set("useSystemFonts",!1)}const wy={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Yn={allowedGlobalEvents:{value:null,kind:1},canvasMaxAreaInBytes:{value:-1,kind:5},isInAutomation:{value:!1,kind:1},localeProperties:{value:{lang:navigator.language||"en-US"},kind:1},nimbusDataStr:{value:"",kind:1},supportsCaretBrowsingMode:{value:!1,kind:1},supportsDocumentFonts:{value:!0,kind:1},supportsIntegratedFind:{value:!1,kind:1},supportsMouseWheelZoomCtrlKey:{value:!0,kind:1},supportsMouseWheelZoomMetaKey:{value:!0,kind:1},supportsPinchToZoom:{value:!0,kind:1},toolbarDensity:{value:0,kind:17},altTextLearnMoreUrl:{value:"",kind:130},annotationEditorMode:{value:0,kind:130},annotationMode:{value:2,kind:130},cursorToolOnLoad:{value:0,kind:130},debuggerSrc:{value:"./debugger.mjs",kind:2},defaultZoomDelay:{value:400,kind:130},defaultZoomValue:{value:"",kind:130},disableHistory:{value:!1,kind:2},disablePageLabels:{value:!1,kind:130},enableAltText:{value:!1,kind:130},enableAltTextModelDownload:{value:!0,kind:146},enableGuessAltText:{value:!0,kind:146},enableHighlightFloatingButton:{value:!1,kind:130},enableNewAltTextWhenAddingImage:{value:!0,kind:130},enablePermissions:{value:!1,kind:130},enablePrintAutoRotate:{value:!0,kind:130},enableScripting:{value:!0,kind:130},enableUpdatedAddImage:{value:!1,kind:130},externalLinkRel:{value:"noopener noreferrer nofollow",kind:2},externalLinkTarget:{value:0,kind:130},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:130},historyUpdateUrl:{value:!1,kind:130},ignoreDestinationZoom:{value:!1,kind:130},imageResourcesPath:{value:"./images/",kind:2},maxCanvasPixels:{value:2**25,kind:2},forcePageColors:{value:!1,kind:130},pageColorsBackground:{value:"Canvas",kind:130},pageColorsForeground:{value:"CanvasText",kind:130},pdfBugEnabled:{value:!1,kind:130},printResolution:{value:150,kind:2},sidebarViewOnLoad:{value:-1,kind:130},scrollModeOnLoad:{value:-1,kind:130},spreadModeOnLoad:{value:-1,kind:130},textLayerMode:{value:1,kind:130},viewOnLoad:{value:0,kind:130},cMapPacked:{value:!0,kind:4},cMapUrl:{value:"../web/cmaps/",kind:4},disableAutoFetch:{value:!1,kind:132},disableFontFace:{value:!1,kind:132},disableRange:{value:!1,kind:132},disableStream:{value:!1,kind:132},docBaseUrl:{value:"",kind:4},enableHWA:{value:!0,kind:134},enableXfa:{value:!0,kind:132},fontExtraProperties:{value:!1,kind:4},isEvalSupported:{value:!0,kind:4},isOffscreenCanvasSupported:{value:!0,kind:4},maxImageSize:{value:-1,kind:4},pdfBug:{value:!1,kind:4},standardFontDataUrl:{value:"../web/standard_fonts/",kind:4},useSystemFonts:{value:void 0,kind:4,type:wy.BOOLEAN+wy.UNDEFINED},verbosity:{value:1,kind:4},workerPort:{value:null,kind:8},workerSrc:{value:"../build/pdf.worker.mjs",kind:8},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:2},sandboxBundleSrc:{value:"../build/pdf.sandbox.mjs",kind:2},viewerCssTheme:{value:0,kind:130},enableFakeMLManager:{value:!0,kind:2},disablePreferences:{value:!1,kind:2}};class L5{static eventBus;static#e=new Map;static#t=(()=>{for(const e in Yn)this.#e.set(e,Yn[e].value);for(const[e,t]of Ey)this.#e.set(e,t);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>!!this.get("disablePreferences")||(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)})();static get(e){return this.#e.get(e)}static getAll(e=null,t=!1){const i=Object.create(null);for(const r in Yn){const s=Yn[r];e&&!(e&s.kind)||(i[r]=t?s.value:this.#e.get(r))}return i}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){let i;this._hasInvokedSet||=!0;for(const r in e){const s=Yn[r],o=e[r];if(!s||!(typeof o==typeof s.value||wy[(typeof o).toUpperCase()]&s.type))continue;const{kind:a}=s;t&&!(1&a||128&a)||(this.eventBus&&16&a&&(i||=new Map).set(r,o),this.#e.set(r,o))}if(i)for(const[r,s]of i)this.eventBus.dispatch(r.toLowerCase(),{source:this,value:s})}}class F5{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(e="display"){var t=this;return x(function*(){"display"!==e||t.#e||t._cancelled||(t.#e=new Rq({pageIndex:t.pageIndex}))})()}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}const kM={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},j5=/^H(\d+)$/;class LM{#e=void 0;get renderingDone(){return void 0!==this.#e}render(e){if(void 0!==this.#e)return this.#e;const t=this.#n(e);return t?.classList.add("structTree"),this.#e=t}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(e,t){const{alt:i,id:r,lang:s}=e;void 0!==i&&t.setAttribute("aria-label",ud(i)),void 0!==r&&t.setAttribute("aria-owns",r),void 0!==s&&t.setAttribute("lang",ud(s,!0))}#n(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:i}=e,r=i.match(j5);r?(t.setAttribute("role","heading"),t.setAttribute("aria-level",r[1])):kM[i]&&t.setAttribute("role",kM[i])}if(this.#t(e,t),e.children)if(1===e.children.length&&"id"in e.children[0])this.#t(e.children[0],t);else for(const i of e.children)t.append(this.#n(i));return t}}class ul{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(e){this.#t=e}static#r(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===r.width&&0===r.height)return-1;const a=i.y+i.height/2,u=r.y+r.height/2;return a<=r.y&&u>=i.y+i.height?-1:u<=i.y&&a>=r.y+r.height?1:i.x+i.width/2-(r.x+r.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(ul.#r),this.#n.size>0){const e=this.#t;for(const[t,i]of this.#n)document.getElementById(t)?this.#s(t,e[i]):this.#n.delete(t)}for(const[e,t]of this.#i)this.addPointerInTextLayer(e,t);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e)return void this.#i.delete(e);const t=this.#t;if(!t||0===t.length)return;const{id:i}=e,r=this.#n.get(i);if(void 0===r)return;const s=t[r];this.#n.delete(i);let o=s.getAttribute("aria-owns");o?.includes(i)&&(o=o.split(" ").filter(a=>a!==i).join(" "),o?s.setAttribute("aria-owns",o):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#s(e,t){const i=t.getAttribute("aria-owns");i?.includes(e)||t.setAttribute("aria-owns",i?`${i} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){const{id:i}=e;if(!i)return null;if(!this.#e)return this.#i.set(e,t),null;t&&this.removePointerInTextLayer(e);const r=this.#t;if(!r||0===r.length)return null;const s=ol(r,c=>ul.#r(e,c)<0),o=Math.max(0,s-1),a=r[o];this.#s(i,a),this.#n.set(i,o);const l=a.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(e,t,i,r){const s=this.addPointerInTextLayer(i,r);if(!e.hasChildNodes())return e.append(t),s;const o=Array.from(e.childNodes).filter(c=>c!==t);if(0===o.length)return s;const a=i||t,l=ol(o,c=>ul.#r(a,c)<0);return 0===l?o[0].before(t):o[l-1].after(t),s}}class B5{#e=null;constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||-1===e.pageIndex)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:i}=this;let r=0,s=0;const o=i.length-1,a=[];for(let l=0,c=e.length;l<c;l++){let u=e[l];for(;r!==o&&u>=s+i[r].length;)s+=i[r].length,r++;r===i.length&&console.error("Could not find a matching mapping");const d={begin:{divIdx:r,offset:u-s}};for(u+=t[l];r!==o&&u>s+i[r].length;)s+=i[r].length,r++;d.end={divIdx:r,offset:u-s},a.push(d)}return a}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:r,textDivs:s}=this,o=i===t.selected.pageIdx,a=t.selected.matchIdx;let c=null;function d(m,v){const _=m.divIdx;return s[_].textContent="",h(_,0,m.offset,v)}function h(m,v,_,b){let E=s[m];if(E.nodeType===Node.TEXT_NODE){const I=document.createElement("span");E.before(I),I.append(E),s[m]=I,E=I}const w=r[m].substring(v,_),C=document.createTextNode(w);if(b){const I=document.createElement("span");return I.className=`${b} appended`,I.append(C),E.append(I),b.includes("selected")?I.offsetLeft:0}return E.append(C),0}let f=a,p=f+1;if(t.state.highlightAll)f=0,p=e.length;else if(!o)return;let g=-1,y=-1;for(let m=f;m<p;m++){const v=e[m],_=v.begin;if(_.divIdx===g&&_.offset===y)continue;g=_.divIdx,y=_.offset;const b=v.end,E=o&&m===a,w=E?" selected":"";let C=0;if(c&&_.divIdx===c.divIdx?h(c.divIdx,c.offset,_.offset):(null!==c&&h(c.divIdx,c.offset,undefined),d(_)),_.divIdx===b.divIdx)C=h(_.divIdx,_.offset,b.offset,"highlight"+w);else{C=h(_.divIdx,_.offset,undefined,"highlight begin"+w);for(let I=_.divIdx+1,A=b.divIdx;I<A;I++)s[I].className="highlight middle"+w;d(b,"highlight end"+w)}c=b,E&&t.scrollMatchIntoView({element:s[_.divIdx],selectedLeft:C,pageIndex:i,matchIndex:a})}c&&h(c.divIdx,c.offset,undefined)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:i,pageIdx:r}=this,{textContentItemsStr:s,textDivs:o}=this;let a=-1;for(const u of i){for(let h=Math.max(a,u.begin.divIdx),f=u.end.divIdx;h<=f;h++){const p=o[h];p.textContent=s[h],p.className=""}a=u.end.divIdx+1}t?.highlightMatches&&!e&&(this.matches=this._convertMatches(t.pageMatches[r]||null,t.pageMatchesLength[r]||null),this._renderMatches(this.matches))}}class lo{#e=!1;#t=null;#n=!1;#i=null;static#r=new Map;static#s=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:i=null,enablePermissions:r=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=i,this.#e=!0===r,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e,t=null){var i=this;return x(function*(){if(i.#n&&i.#i)return i.#i.update({viewport:e,onBefore:i.hide.bind(i)}),void i.show();i.cancel(),i.#i=new Fq({textContentSource:i.pdfPage.streamTextContent(t||{includeMarkedContent:!0,disableNormalization:!0}),container:i.div,viewport:e});const{textDivs:r,textContentItemsStr:s}=i.#i;i.highlighter?.setTextMapping(r,s),i.accessibilityManager?.setTextMapping(r),yield i.#i.render(),i.#n=!0;const o=document.createElement("div");o.className="endOfContent",i.div.append(o),i.#a(o),i.#t?.(i.div),i.highlighter?.enable(),i.accessibilityManager?.enable()})()}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),lo.#l(this.div)}#a(e){const{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",i=>{if(!this.#e){const r=document.getSelection();i.clipboardData.setData("text/plain",ud(kq(r.toString())))}i.preventDefault(),i.stopPropagation()}),lo.#r.set(t,e),lo.#d()}static#l(e){this.#r.delete(e),0===this.#r.size&&(this.#s?.abort(),this.#s=null)}static#d(){if(this.#s)return;this.#s=new AbortController;const{signal:e}=this.#s,t=(o,a)=>{a.append(o),o.style.width="",o.style.height="",a.classList.remove("selecting")};let i=!1;var r,s;document.addEventListener("pointerdown",()=>{i=!0},{signal:e}),document.addEventListener("pointerup",()=>{i=!1,this.#r.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{i=!1,this.#r.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{i||this.#r.forEach(t)},{signal:e}),document.addEventListener("selectionchange",()=>{const o=document.getSelection();if(0===o.rangeCount)return void this.#r.forEach(t);const a=new Set;for(let f=0;f<o.rangeCount;f++){const p=o.getRangeAt(f);for(const g of this.#r.keys())!a.has(g)&&p.intersectsNode(g)&&a.add(g)}for(const[f,p]of this.#r)a.has(f)?f.classList.add("selecting"):t(p,f);if(r??="none"===getComputedStyle(this.#r.values().next().value).getPropertyValue("-moz-user-select"),r)return;const l=o.getRangeAt(0),c=s&&(0===l.compareBoundaryPoints(Range.END_TO_END,s)||0===l.compareBoundaryPoints(Range.START_TO_END,s));let u=c?l.startContainer:l.endContainer;u.nodeType===Node.TEXT_NODE&&(u=u.parentNode);const d=u.parentElement.closest(".textLayer"),h=this.#r.get(d);h&&(h.style.width=d.style.width,h.style.height=d.style.height,u.parentElement.insertBefore(h,c?u:u.nextSibling)),s=l.cloneRange()},{signal:e})}}class FM{constructor({pdfPage:e,annotationStorage:t=null,linkService:i,xfaHtml:r=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=i,this.xfaHtml=r,this.div=null,this._cancelled=!1}render(e,t="display"){var i=this;return x(function*(){if("print"===t){const o={viewport:e.clone({dontFlip:!0}),div:i.div,xfaHtml:i.xfaHtml,annotationStorage:i.annotationStorage,linkService:i.linkService,intent:t};return i.div=document.createElement("div"),o.div=i.div,hy.render(o)}const r=yield i.pdfPage.getXfa();if(i._cancelled||!r)return{textDivs:[]};const s={viewport:e.clone({dontFlip:!0}),div:i.div,xfaHtml:r,annotationStorage:i.annotationStorage,linkService:i.linkService,intent:t};return i.div?hy.update(s):(i.div=document.createElement("div"),s.div=i.div,hy.render(s))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const V5={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new uy}},H5=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class jM{#e=_i.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#r=null;#s=null;#a=null;#l=null;#d=ke.INITIAL;#c=1;#u={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#o=new WeakMap;#h=[null,null,null,null];constructor(e){const t=e.container,i=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#r=e.layerProperties||V5,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#c=e.textLayerMode??1,this.#e=e.annotationMode??_i.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??L5.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new wi,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const r=document.createElement("div");if(r.className="page",r.setAttribute("data-page-number",this.id),r.setAttribute("role","region"),r.setAttribute("data-l10n-id","pdfjs-page-landmark"),r.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=r,this.#f(),t?.append(r),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*bi.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:s}=e;s&&s.then(o=>{s===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=o.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#p(e,t){const i=H5.get(t),r=this.#h[i];if(this.#h[i]=e,r)r.replaceWith(e);else{for(let s=i-1;s>=0;s--){const o=this.#h[s];if(o)return void o.after(e)}this.div.prepend(e)}}get renderingState(){return this.#d}set renderingState(e){if(e!==this.#d)switch(this.#d=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case ke.PAUSED:this.div.classList.remove("loading");break;case ke.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case ke.INITIAL:case ke.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#f(){const{viewport:e}=this;if(this.pdfPage){if(this.#a===e.rotation)return;this.#a=e.rotation}Lq(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate,this.viewport=e.getViewport({scale:this.scale*bi.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#f(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return gd(this,"_textHighlighter",new B5({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#r.findController}))}#g(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}#y(){var e=this;return x(function*(){let t=null;try{yield e.annotationLayer.render(e.viewport,"display")}catch(i){console.error(`#renderAnnotationLayer: "${i}".`),t=i}finally{e.#g("annotationlayerrendered",t)}})()}#m(){var e=this;return x(function*(){let t=null;try{yield e.annotationEditorLayer.render(e.viewport,"display")}catch(i){console.error(`#renderAnnotationEditorLayer: "${i}".`),t=i}finally{e.#g("annotationeditorlayerrendered",t)}})()}#v(){var e=this;return x(function*(){try{yield e.drawLayer.render("display")}catch(t){console.error(`#renderDrawLayer: "${t}".`)}})()}#b(){var e=this;return x(function*(){let t=null;try{const i=yield e.xfaLayer.render(e.viewport,"display");i?.textDivs&&e._textHighlighter&&e.#C(i.textDivs)}catch(i){console.error(`#renderXfaLayer: "${i}".`),t=i}finally{e.xfaLayer?.div&&(e.l10n.pause(),e.#p(e.xfaLayer.div,"xfaLayer"),e.l10n.resume()),e.#g("xfalayerrendered",t)}})()}#w(){var e=this;return x(function*(){if(!e.textLayer)return;let t=null;try{yield e.textLayer.render(e.viewport)}catch(i){if(i instanceof Iq)return;console.error(`#renderTextLayer: "${i}".`),t=i}e.#g("textlayerrendered",t),e.#E()})()}#E(){var e=this;return x(function*(){if(!e.textLayer)return;e.structTreeLayer||=new LM;const t=yield e.structTreeLayer.renderingDone?null:e.pdfPage.getStructTree(),i=e.structTreeLayer?.render(t);i&&(e.l10n.pause(),e.canvas?.append(i),e.l10n.resume()),e.structTreeLayer?.show()})()}#C(e){var t=this;return x(function*(){const i=yield t.pdfPage.getTextContent(),r=[];for(const s of i.items)r.push(s.str);t._textHighlighter.setTextMapping(e,r),t._textHighlighter.enable()})()}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.#o.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:r=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:i,keepXfaLayer:r,keepTextLayer:s}),this.renderingState=ke.INITIAL;const o=this.div,a=o.childNodes,l=e&&this.zoomLayer||null,c=t&&this.annotationLayer?.div||null,u=i&&this.annotationEditorLayer?.div||null,d=r&&this.xfaLayer?.div||null,h=s&&this.textLayer?.div||null;for(let f=a.length-1;f>=0;f--){const p=a[f];switch(p){case l:case c:case u:case d:case h:continue}p.remove();const g=this.#h.indexOf(p);g>=0&&(this.#h[g]=null)}o.removeAttribute("data-loaded"),c&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),h&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#o.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#i=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null,drawingDelay:r=-1}){if(this.scale=e||this.scale,"number"==typeof t&&(this.rotation=t),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(o=>{i===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=o.hasInitialVisibility)})),this.#u.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*bi.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#f(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let o=!1;if(this.#n)if(0===this.maxCanvasPixels)o=!0;else if(this.maxCanvasPixels>0){const{width:l,height:c}=this.viewport,{sx:u,sy:d}=this.outputScale;o=(Math.floor(l)*u|0)*(Math.floor(c)*d|0)>this.maxCanvasPixels}const a=r>=0&&r<1e3;if(a||o){if(a&&!o&&this.renderingState!==ke.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:r}),this.renderingState=ke.FINISHED,this.#u.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!a,hideTextLayer:a}),a)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#l})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:r=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!r||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:r=!1,redrawTextLayer:s=!1,hideTextLayer:o=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:l}=e;l.width=l.height=""}const a=this.#o.get(e);if(this.viewport!==a){const l=this.viewport.rotation-a.rotation,c=Math.abs(l);let u=1,d=1;if(90===c||270===c){const{width:h,height:f}=this.viewport;u=f/h,d=h/f}e.style.transform=`rotate(${l}deg) scale(${u}, ${d})`}t&&this.annotationLayer&&this.#y(),i&&this.annotationEditorLayer&&(this.drawLayer&&this.#v(),this.#m()),r&&this.xfaLayer&&this.#b(),this.textLayer&&(o?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#w())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}#x(e,t=null){var i=this;return x(function*(){if(e===i.renderTask&&(i.renderTask=null),t instanceof dy)i.#l=null;else if(i.#l=t,i.renderingState=ke.FINISHED,i._resetZoomLayer(!0),i.#u.regularAnnotations=!e.separateAnnots,i.eventBus.dispatch("pagerendered",{source:i,pageNumber:i.id,cssTransform:!1,timestamp:performance.now(),error:i.#l}),t)throw t})()}draw(){var e=this;return x(function*(){e.renderingState!==ke.INITIAL&&(console.error("Must be in new state before drawing"),e.reset());const{div:t,l10n:i,pageColors:r,pdfPage:s,viewport:o}=e;if(!s)throw e.renderingState=ke.FINISHED,new Error("pdfPage is not loaded");e.renderingState=ke.RUNNING;const a=document.createElement("div");if(a.classList.add("canvasWrapper"),e.#p(a,"canvasWrapper"),!e.textLayer&&0!==e.#c&&!s.isPureXfa&&(e._accessibilityManager||=new ul,e.textLayer=new lo({pdfPage:s,highlighter:e._textHighlighter,accessibilityManager:e._accessibilityManager,enablePermissions:2===e.#c,onAppend:C=>{e.l10n.pause(),e.#p(C,"textLayer"),e.l10n.resume()}})),!e.annotationLayer&&e.#e!==_i.DISABLE){const{annotationStorage:C,annotationEditorUIManager:I,downloadManager:A,enableScripting:T,fieldObjectsPromise:N,hasJSActionsPromise:me,linkService:be}=e.#r;e._annotationCanvasMap||=new Map,e.annotationLayer=new fM({pdfPage:s,annotationStorage:C,imageResourcesPath:e.imageResourcesPath,renderForms:e.#e===_i.ENABLE_FORMS,linkService:be,downloadManager:A,enableScripting:T,hasJSActionsPromise:me,fieldObjectsPromise:N,annotationCanvasMap:e._annotationCanvasMap,accessibilityManager:e._accessibilityManager,annotationEditorUIManager:I,onAppend:ye=>{e.#p(ye,"annotationLayer")}})}const{width:c,height:u}=o,d=document.createElement("canvas");d.setAttribute("role","presentation"),d.hidden=!0;const h=!(!r?.background||!r?.foreground);let f=C=>{(!h||C)&&(d.hidden=!1,f=null)};a.append(d),e.canvas=d;const p=d.getContext("2d",{alpha:!1,willReadFrequently:!e.#t}),g=e.outputScale=new q4;if(0===e.maxCanvasPixels){const C=1/e.scale;g.sx*=C,g.sy*=C,e.#n=!0}else if(e.maxCanvasPixels>0){const I=Math.sqrt(e.maxCanvasPixels/(c*u));g.sx>I||g.sy>I?(g.sx=I,g.sy=I,e.#n=!0):e.#n=!1}const y=nM(g.sx),m=nM(g.sy);d.width=dd(c*g.sx,y[0]),d.height=dd(u*g.sy,m[0]);const{style:v}=d;v.width=dd(c,y[1])+"px",v.height=dd(u,m[1])+"px",e.#o.set(d,o);const b={canvasContext:p,transform:g.scaled?[g.sx,0,0,g.sy,0,0]:null,viewport:o,annotationMode:e.#e,optionalContentConfigPromise:e._optionalContentConfigPromise,annotationCanvasMap:e._annotationCanvasMap,pageColors:r,isEditing:e.#i},E=e.renderTask=s.render(b);E.onContinue=C=>{if(f?.(!1),e.renderingQueue&&!e.renderingQueue.isHighestPriority(e))return e.renderingState=ke.PAUSED,void(e.resume=()=>{e.renderingState=ke.RUNNING,C()});C()};const w=E.promise.then(x(function*(){f?.(!0),yield e.#x(E),e.#w(),e.annotationLayer&&(yield e.#y());const{annotationEditorUIManager:C}=e.#r;C&&(e.drawLayer||=new F5({pageIndex:e.id}),yield e.#v(),e.drawLayer.setParent(a),e.annotationEditorLayer||=new k5({uiManager:C,pdfPage:s,l10n:i,accessibilityManager:e._accessibilityManager,annotationLayer:e.annotationLayer?.annotationLayer,textLayer:e.textLayer,drawLayer:e.drawLayer.getDrawLayer(),onAppend:I=>{e.#p(I,"annotationEditorLayer")}}),e.#m())}),C=>(C instanceof dy||f?.(!0),e.#x(E,C)));if(s.isPureXfa){if(!e.xfaLayer){const{annotationStorage:C,linkService:I}=e.#r;e.xfaLayer=new FM({pdfPage:s,annotationStorage:C,linkService:I})}e.#b()}return t.setAttribute("data-loaded",!0),e.eventBus.dispatch("pagerender",{source:e,pageNumber:e.id}),w})()}setPageLabel(e){this.pageLabel="string"==typeof e?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:i}=this.#u;return e&&t&&i?this.canvas:null}}function Ay(){return(Ay=x(function*(n){const t="".split("#",1)[0];let{info:i,metadata:r,contentDispositionFilename:s,contentLength:o}=yield n.getMetadata();if(!o){const{length:a}=yield n.getDownloadInfo();o=a}return{...i,baseURL:t,filesize:o,filename:s||Nq(""),metadata:r?.getRaw(),authors:r?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}class $5{constructor(e){this._ready=new Promise((t,i)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(i)})}createSandbox(e){var t=this;return x(function*(){(yield t._ready).create(e)})()}dispatchEventInSandbox(e){var t=this;return x(function*(){const i=yield t._ready;setTimeout(()=>i.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return x(function*(){(yield e._ready).nukeSandbox()})()}}class z5{#e=null;#t=null;#n=null;#i=null;#r=null;#s=null;#a=null;#l=null;#d=!1;#c=null;#u=null;constructor({eventBus:e,externalServices:t=null,docProperties:i=null}){this.#r=e,this.#s=t,this.#n=i}setViewer(e){this.#l=e}setDocument(e){var t=this;return x(function*(){if(t.#a&&(yield t.#g()),t.#a=e,!e)return;const[i,r,s]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!i&&!s)return void(yield t.#g());if(e!==t.#a)return;try{t.#c=t.#f()}catch(l){return console.error(`setDocument: "${l.message}".`),void(yield t.#g())}const o=t.#r;t.#i=new AbortController;const{signal:a}=t.#i;o._on("updatefromsandbox",l=>{l?.source===window&&t.#o(l.detail)},{signal:a}),o._on("dispatcheventinsandbox",l=>{t.#c?.dispatchEventInSandbox(l.detail)},{signal:a}),o._on("pagechanging",({pageNumber:l,previous:c})=>{l!==c&&(t.#p(c),t.#h(l))},{signal:a}),o._on("pagerendered",({pageNumber:l})=>{t._pageOpenPending.has(l)&&l===t.#l.currentPageNumber&&t.#h(l)},{signal:a}),o._on("pagesdestroy",x(function*(){yield t.#p(t.#l.currentPageNumber),yield t.#c?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),t.#e?.resolve()}),{signal:a});try{const l=yield t.#n(e);if(e!==t.#a)return;yield t.#c.createSandbox({objects:i,calculationOrder:r,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...l,actions:s}}),o.dispatch("sandboxcreated",{source:t})}catch(l){return console.error(`setDocument: "${l.message}".`),void(yield t.#g())}yield t.#c?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield t.#h(t.#l.currentPageNumber,!0),Promise.resolve().then(()=>{e===t.#a&&(t.#d=!0)})})()}dispatchWillSave(){var e=this;return x(function*(){return e.#c?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var e=this;return x(function*(){return e.#c?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var e=this;return x(function*(){if(e.#c){yield e.#u?.promise,e.#u=Promise.withResolvers();try{yield e.#c.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw e.#u.resolve(),e.#u=null,t}yield e.#u.promise}})()}dispatchDidPrint(){var e=this;return x(function*(){return e.#c?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#d}get _pageOpenPending(){return gd(this,"_pageOpenPending",new Set)}get _visitedPages(){return gd(this,"_visitedPages",new Map)}#o(e){var t=this;return x(function*(){const i=t.#l,r=i.isInPresentationMode||i.isChangingPresentationMode,{id:s,siblings:o,command:a,value:l}=e;if(!s){switch(a){case"clear":console.clear();break;case"error":console.error(l);break;case"layout":if(!r){const u=function iq(n){let e=ce.VERTICAL,t=At.NONE;switch(n){case"SinglePage":e=ce.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=ce.PAGE;case"TwoColumnLeft":t=At.ODD;break;case"TwoPageRight":e=ce.PAGE;case"TwoColumnRight":t=At.EVEN}return{scrollMode:e,spreadMode:t}}(l);i.spreadMode=u.spreadMode}break;case"page-num":i.currentPageNumber=l+1;break;case"print":yield i.pagesPromise,t.#r.dispatch("print",{source:t});break;case"println":console.log(l);break;case"zoom":r||(i.currentScaleValue=l);break;case"SaveAs":t.#r.dispatch("download",{source:t});break;case"FirstPage":i.currentPageNumber=1;break;case"LastPage":i.currentPageNumber=i.pagesCount;break;case"NextPage":i.nextPage();break;case"PrevPage":i.previousPage();break;case"ZoomViewIn":r||i.increaseScale();break;case"ZoomViewOut":r||i.decreaseScale();break;case"WillPrintFinished":t.#u?.resolve(),t.#u=null}return}if(r&&e.focus)return;delete e.id,delete e.siblings;const c=o?[s,...o]:[s];for(const u of c){const d=document.querySelector(`[data-element-id="${u}"]`);d?d.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):t.#a?.annotationStorage.setValue(u,e)}})()}#h(e,t=!1){var i=this;return x(function*(){const r=i.#a,s=i._visitedPages;if(t&&(i.#e=Promise.withResolvers()),!i.#e)return;const o=i.#l.getPageView(e-1);if(o?.renderingState!==ke.FINISHED)return void i._pageOpenPending.add(e);i._pageOpenPending.delete(e);const a=x(function*(){const l=yield s.has(e)?null:o.pdfPage?.getJSActions();r===i.#a&&(yield i.#c?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:l}))})();s.set(e,a)})()}#p(e){var t=this;return x(function*(){const i=t.#a,r=t._visitedPages;if(!t.#e||t._pageOpenPending.has(e))return;const s=r.get(e);s&&(r.set(e,null),yield s,i===t.#a&&(yield t.#c?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})()}#f(){if(this.#t=Promise.withResolvers(),this.#c)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){var e=this;return x(function*(){if(!e.#c)return e.#a=null,void e.#t?.resolve();e.#e&&(yield Promise.race([e.#e.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),e.#e=null),e.#a=null;try{yield e.#c.destroySandbox()}catch{}e.#u?.reject(new Error("Scripting destroyed.")),e.#u=null,e.#i?.abort(),e.#i=null,e._pageOpenPending.clear(),e._visitedPages.clear(),e.#c=null,e.#d=!1,e.#t?.resolve()})()}}class W5 extends z5{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new $5(e.sandboxBundleSrc)},e.docProperties||=t=>function U5(n){return Ay.apply(this,arguments)}(t),super(e)}}class q5{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,t,i,r=!1){const s=e.views,o=s.length;if(0===o)return null;for(let d=0;d<o;d++){const h=s[d].view;if(!this.isViewFinished(h))return h}const a=e.first.id,l=e.last.id;if(l-a+1>o){const d=e.ids;for(let h=1,f=l-a;h<f;h++){const p=i?a+h:l-h;if(d.has(p))continue;const g=t[p-1];if(!this.isViewFinished(g))return g}}let c=i?l:a-2,u=t[c];return u&&!this.isViewFinished(u)||r&&(c+=i?1:-1,u=t[c],u&&!this.isViewFinished(u))?u:null}isViewFinished(e){return e.renderingState===ke.FINISHED}renderView(e){switch(e.renderingState){case ke.FINISHED:return!1;case ke.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case ke.RUNNING:this.highestPriorityPage=e.renderingId;break;case ke.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof dy||console.error(`renderView: "${t}"`)})}return!0}}function VM(n){return Object.values(rn).includes(n)&&n!==rn.DISABLE}class X5{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#n()}resize(e,t=null){this.#t=e;const i=this.#e;if(t){const r=i.size;let s=1;for(const o of i)if(t.has(o.id)&&(i.delete(o),i.add(o)),++s>r)break}for(;i.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class HM{#e=null;#t=null;#n=null;#i=rn.NONE;#r=null;#s=_i.ENABLE_FORMS;#a=null;#l=!1;#d=!1;#c=!1;#u=!1;#o=!1;#h=null;#p=null;#f=null;#g=null;#y=!1;#m=null;#v=!1;#b=0;#w=new ResizeObserver(this.#F.bind(this));#E=null;#C=null;#x=1;constructor(e){const t="4.6.82";if(hM!==t)throw new Error(`The API version "${hM}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#w.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new uy,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=r=>this._getVisiblePages().ids.has(r)),this._scriptingManager=e.scriptingManager||null,this.#x=e.textLayerMode??1,this.#s=e.annotationMode??_i.ENABLE_FORMS,this.#i=e.annotationEditorMode??rn.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#d=!0===e.enableHighlightFloatingButton,this.#u=!0===e.enableUpdatedAddImage,this.#o=!0===e.enableNewAltTextWhenAddingImage,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new wi,this.#c=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#p=e.mlManager||null,this.#l=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new q5,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:i}=e;i?.addEventListener("abort",()=>{this.#w.disconnect(),this.#w=null},{once:!0}),this.scroll=function X4(n,e,t){const i=function(o){s||(s=window.requestAnimationFrame(function(){s=null;const l=n.scrollLeft,c=r.lastX;l!==c&&(r.right=l>c),r.lastX=l;const u=n.scrollTop,d=r.lastY;u!==d&&(r.down=u>d),r.lastY=u,e(r)}))},r={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:i};let s=null;return n.addEventListener("scroll",i,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),r}(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=0,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#k(),this.eventBus._on("thumbnailrendered",({pageNumber:r,pdfPage:s})=>{this.#e.has(this._pages[r-1])||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===_i.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#R(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const i=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i}),t&&this.#R(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#M(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#M(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!iM(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((e%=360)<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#M(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return gd(this,"_layerProperties",{get annotationEditorUIManager(){return e.#r},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#I(e){const t={annotationEditorMode:this.#i,annotationMode:this.#s,textLayerMode:this.#x};return e&&(!e.includes(pd.COPY)&&1===this.#x&&(t.textLayerMode=2),e.includes(pd.MODIFY_CONTENTS)||(t.annotationEditorMode=rn.DISABLE),!e.includes(pd.MODIFY_ANNOTATIONS)&&!e.includes(pd.FILL_INTERACTIVE_FORMS)&&this.#s===_i.ENABLE_FORMS&&(t.annotationMode=_i.ENABLE)),t}#A(e){var t=this;return x(function*(){if("hidden"===document.visibilityState||!t.container.offsetParent||0===t._getVisiblePages().views.length)return;const i=Promise.withResolvers();function r(){"hidden"===document.visibilityState&&i.resolve()}document.addEventListener("visibilitychange",r,{signal:e}),yield Promise.race([t._onePageRenderedCapability.promise,i.promise]),document.removeEventListener("visibilitychange",r)})()}getAllText(){var e=this;return x(function*(){const t=[],i=[];for(let r=1,s=e.pdfDocument.numPages;r<=s;++r){if(e.#v)return null;i.length=0;const o=yield e.pdfDocument.getPage(r),{items:a}=yield o.getTextContent();for(const l of a)l.str&&i.push(l.str),l.hasEOL&&i.push("\n");t.push(ud(i.join("")))}return t.join("\n")})()}#T(e,t){const i=document.getSelection(),{focusNode:r,anchorNode:s}=i;if(s&&r&&i.containsNode(this.#m)){if(this.#y||2===e)return t.preventDefault(),void t.stopPropagation();this.#y=!0;const{classList:o}=this.viewer;o.add("copyAll");const a=new AbortController;window.addEventListener("keydown",l=>this.#v="Escape"===l.key,{signal:a.signal}),this.getAllText().then(function(){var l=x(function*(c){null!==c&&(yield navigator.clipboard.writeText(c))});return function(c){return l.apply(this,arguments)}}()).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#y=!1,this.#v=!1,a.abort(),o.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){var t=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#r?.destroy(),this.#r=null),this.pdfDocument=e,!e)return;const i=e.numPages,r=e.getPage(1),s=e.getOptionalContentConfig({intent:"display"}),o=this.#c?e.getPermissions():Promise.resolve(),{eventBus:a,pageColors:l,viewer:c}=this;this.#h=new AbortController;const{signal:u}=this.#h;if(i>1e4){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const f=this._scrollMode=ce.PAGE;a.dispatch("scrollmodechanged",{source:this,mode:f})}this._pagesCapability.promise.then(()=>{a.dispatch("pagesloaded",{source:this,pagesCount:i})},()=>{}),a._on("pagerender",f=>{const p=this._pages[f.pageNumber-1];p&&this.#e.push(p)},{signal:u});const h=f=>{f.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:f.timestamp}),a._off("pagerendered",h))};a._on("pagerendered",h,{signal:u}),Promise.all([r,o]).then(([f,p])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(f),this._optionalContentConfigPromise=s;const{annotationEditorMode:g,annotationMode:y,textLayerMode:m}=this.#I(p);if(0!==m){const E=this.#m=document.createElement("div");E.id="hiddenCopyElement",c.before(E)}if("function"==typeof AbortSignal.any&&g!==rn.DISABLE){const E=g;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):VM(E)?(this.#r=new Mq(this.container,c,this.#t,a,e,l,this.#n,this.#d,this.#u,this.#o,this.#p),a.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#r}),E!==rn.NONE&&(E===rn.STAMP&&this.#p?.loadModel("altText"),this.#r.updateMode(E))):console.error(`Invalid AnnotationEditor mode: ${E}`)}const v=this._scrollMode===ce.PAGE?null:c,_=this.currentScale,b=f.getViewport({scale:_*bi.PDF_TO_CSS_UNITS});c.style.setProperty("--scale-factor",b.scale),("CanvasText"===l?.foreground||"Canvas"===l?.background)&&(c.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),c.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let E=1;E<=i;++E){const w=new jM({container:v,eventBus:a,id:E,scale:_,defaultViewport:b.clone(),optionalContentConfigPromise:s,renderingQueue:this.renderingQueue,textLayerMode:m,annotationMode:y,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:l,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#l});this._pages.push(w)}this._pages[0]?.setPdfPage(f),this._scrollMode===ce.PAGE?this.#S():this._spreadMode!==At.NONE&&this._updateSpreadMode(),this.#A(u).then(x(function*(){if(e!==t.pdfDocument)return;if(t.findController?.setDocument(e),t._scriptingManager?.setDocument(e),t.#m&&document.addEventListener("copy",t.#T.bind(t,m),{signal:u}),t.#r&&a.dispatch("annotationeditormodechanged",{source:t,mode:t.#i}),e.loadingParams.disableAutoFetch||i>5e3)return void t._pagesCapability.resolve();let E=i-1;if(E<=0)t._pagesCapability.resolve();else for(let w=2;w<=i;++w){const C=e.getPage(w).then(I=>{const A=t._pages[w-1];A.pdfPage||A.setPdfPage(I),0==--E&&t._pagesCapability.resolve()},I=>{console.error(`Unable to get page ${w} to initialize viewer`,I),0==--E&&t._pagesCapability.resolve()});w%250==0&&(yield C)}})),a.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:E})=>{e===this.pdfDocument&&E.Language&&(c.lang=E.Language)}),this.defaultRenderingQueue&&this.update()}).catch(f=>{console.error("Unable to initialize viewer",f),this._pagesCapability.reject(f)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,i=this._pages.length;t<i;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,this.#e=new X5(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=ce.VERTICAL,this._previousScrollMode=ce.UNKNOWN,this._spreadMode=At.NONE,this.#E={previousPageNumber:1,scrollDown:!0,pages:[]},this.#h?.abort(),this.#h=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#j()}#S(){if(this._scrollMode!==ce.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=this.#E,i=this.viewer;if(i.textContent="",t.pages.length=0,this._spreadMode!==At.NONE||this.isInPresentationMode){const r=new Set,s=this._spreadMode-1;-1===s?r.add(e-1):e%2!==s?(r.add(e-1),r.add(e)):(r.add(e-2),r.add(e-1));const o=document.createElement("div");if(o.className="spread",this.isInPresentationMode){const a=document.createElement("div");a.className="dummyPage",o.append(a)}for(const a of r){const l=this._pages[a];l&&(o.append(l.div),t.pages.push(l))}i.append(o)}else{const r=this._pages[e-1];i.append(r.div),t.pages.push(r)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){0!==this.pagesCount&&this.update()}#P(e,t=null){const{div:i,id:r}=e;if(this._currentPageNumber!==r&&this._setCurrentPageNumber(r),this._scrollMode===ce.PAGE&&(this.#S(),this.update()),!t&&!this.isInPresentationMode){const s=i.offsetLeft+i.clientLeft,o=s+i.clientWidth,{scrollLeft:a,clientWidth:l}=this.container;(this._scrollMode===ce.HORIZONTAL||s<a||o>a+l)&&(t={left:0,top:0})}eM(i,t),!this._currentScaleValue&&this._location&&(this._location=null)}#O(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#D(e,t,{noScroll:i=!1,preset:r=!1,drawingDelay:s=-1,origin:o=null}){if(this._currentScaleValue=t.toString(),this.#O(e))return void(r&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t}));this.viewer.style.setProperty("--scale-factor",e*bi.PDF_TO_CSS_UNITS);const a=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:a?s:-1}),a&&(this.#C=setTimeout(()=>{this.#C=null,this.refresh()},s));const l=this._currentScale;if(this._currentScale=e,!i){let u,c=this._currentPageNumber;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(c=this._location.pageNumber,u=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:c,destArray:u,allowNegativeOffset:!0}),Array.isArray(o)){const d=e/l-1,[h,f]=this.containerTopLeft;this.container.scrollLeft+=(o[0]-f)*d,this.container.scrollTop+=(o[1]-h)*d}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:r?t:void 0}),this.defaultRenderingQueue&&this.update()}get#_(){return this._spreadMode!==At.NONE&&this._scrollMode!==ce.HORIZONTAL?2:1}#M(e,t){let i=parseFloat(e);if(i>0)t.preset=!1,this.#D(i,e,t);else{const r=this._pages[this._currentPageNumber-1];if(!r)return;let s=40,o=5;this.isInPresentationMode?(s=o=4,this._spreadMode!==At.NONE&&(s*=2)):this.removePageBorders?s=o=0:this._scrollMode===ce.HORIZONTAL&&([s,o]=[o,s]);const a=(this.container.clientWidth-s)/r.width*r.scale/this.#_,l=(this.container.clientHeight-o)/r.height*r.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=l;break;case"page-fit":i=Math.min(a,l);break;case"auto":const c=rM(r)?a:Math.min(l,a);i=Math.min(1.25,c);break;default:return void console.error(`#setScale: "${e}" is an unknown zoom value.`)}t.preset=!0,this.#D(i,e,t)}}#R(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#M(this._currentScaleValue,{noScroll:!0}),this.#P(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:r=!1}){if(!this.pdfDocument)return;const s=Number.isInteger(e)&&this._pages[e-1];if(!s)return void console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!t)return void this._setCurrentPageNumber(e,!0);let u,d,o=0,a=0,l=0,c=0;const h=s.rotation%180!=0,f=(h?s.height:s.width)/s.scale/bi.PDF_TO_CSS_UNITS,p=(h?s.width:s.height)/s.scale/bi.PDF_TO_CSS_UNITS;let g=0;switch(t[1].name){case"XYZ":o=t[2],a=t[3],g=t[4],o=null!==o?o:0,a=null!==a?a:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":a=t[2],g="page-width",null===a&&this._location?(o=this._location.left,a=this._location.top):("number"!=typeof a||a<0)&&(a=p);break;case"FitV":case"FitBV":o=t[2],l=f,c=p,g="page-height";break;case"FitR":o=t[2],a=t[3],l=t[4]-o,c=t[5]-a;let _=40,b=5;this.removePageBorders&&(_=b=0),u=(this.container.clientWidth-_)/l/bi.PDF_TO_CSS_UNITS,d=(this.container.clientHeight-b)/c/bi.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(u),Math.abs(d));break;default:return void console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`)}if(r||(g&&g!==this._currentScale?this.currentScaleValue=g:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"===g&&!t[4])return void this.#P(s);const y=[s.viewport.convertToViewportPoint(o,a),s.viewport.convertToViewportPoint(o+l,a+c)];let m=Math.min(y[0][0],y[1][0]),v=Math.min(y[0][1],y[1][1]);i||(m=Math.max(m,0),v=Math.max(v,0)),this.#P(s,{left:m,top:v})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,r=parseFloat(i)===t?Math.round(1e4*t)/100:i,s=e.id,a=this.container,l=this._pages[s-1].getPagePoint(a.scrollLeft-e.x,a.scrollTop-e.y),c=Math.round(l[0]),u=Math.round(l[1]);let d=`#page=${s}`;this.isInPresentationMode||(d+=`&zoom=${r},${c},${u}`),this._location={pageNumber:s,scale:r,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:d}}update(){const e=this._getVisiblePages(),t=e.views,i=t.length;if(0===i)return;const r=Math.max(10,2*i+1);this.#e.resize(r,e.ids),this.renderingQueue.renderHighestPriority(e);const s=this._spreadMode===At.NONE&&(this._scrollMode===ce.PAGE||this._scrollMode===ce.VERTICAL),o=this._currentPageNumber;let a=!1;for(const l of t){if(l.percent<100)break;if(l.id===o&&s){a=!0;break}}this._setCurrentPageNumber(a?o:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#L(){const e=this._getVisiblePages(),t=[],{ids:i,views:r}=e;for(const s of r){const{view:o}=s;o.hasEditableAnnotations()?t.push(s):i.delete(o.id)}return 0===t.length?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:i}),i)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return 3===this.presentationModeState}get isChangingPresentationMode(){return 2===this.presentationModeState}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===ce.PAGE?this.#E.pages:this._pages,t=this._scrollMode===ce.HORIZONTAL;return function K4({scrollEl:n,views:e,sortByVisibility:t=!1,horizontal:i=!1,rtl:r=!1}){const s=n.scrollTop,o=s+n.clientHeight,a=n.scrollLeft,l=a+n.clientWidth,d=[],h=new Set,f=e.length;let p=ol(e,i?function u(v){const _=v.div,b=_.offsetLeft+_.clientLeft;return r?b<l:b+_.clientWidth>a}:function c(v){const _=v.div;return _.offsetTop+_.clientTop+_.clientHeight>s});p>0&&p<f&&!i&&(p=function Y4(n,e,t){if(n<2)return n;let i=e[n].div,r=i.offsetTop+i.clientTop;r>=t&&(i=e[n-1].div,r=i.offsetTop+i.clientTop);for(let s=n-2;s>=0&&(i=e[s].div,!(i.offsetTop+i.clientTop+i.clientHeight<=r));--s)n=s;return n}(p,e,s));let g=i?l:-1;for(let v=p;v<f;v++){const _=e[v],b=_.div,E=b.offsetLeft+b.clientLeft,w=b.offsetTop+b.clientTop,C=b.clientWidth,I=b.clientHeight,A=E+C,T=w+I;if(-1===g)T>=o&&(g=T);else if((i?E:w)>g)break;if(T<=s||w>=o||A<=a||E>=l)continue;const N=Math.max(0,s-w)+Math.max(0,T-o),ye=(C-(Math.max(0,a-E)+Math.max(0,A-l)))/C;d.push({id:_.id,x:E,y:w,view:_,percent:(I-N)/I*ye*100|0,widthPercent:100*ye|0}),h.add(_.id)}const y=d[0],m=d.at(-1);return t&&d.sort(function(v,_){const b=v.percent-_.percent;return Math.abs(b)>.001?-b:v.id-_.id}),{first:y,last:m,views:d,ids:h}}({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:t&&this._isContainerRtl})}cleanup(){for(const e of this._pages)e.renderingState!==ke.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}#H(e){var t=this;return x(function*(){if(e.pdfPage)return e.pdfPage;try{const i=yield t.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(i),i}catch(i){return console.error("Unable to get page for page view",i),null}})()}#B(e){if(1===e.first?.id)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case ce.PAGE:return this.#E.scrollDown;case ce.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const t=e||this._getVisiblePages(),i=this.#B(t),s=this.renderingQueue.getHighestPriority(t,this._pages,i,this._spreadMode!==At.NONE&&this._scrollMode!==ce.HORIZONTAL);return!!s&&(this.#H(s).then(()=>{this.renderingQueue.renderView(s)}),!0)}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const r=this._pages[t];if(r.width!==e.width||r.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{const i=t.pdfPage.getViewport({scale:1}),r=rM(i);if(void 0===e)e=r;else if(this.enablePrintAutoRotate&&r!==e)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!function Q4(n){return Number.isInteger(n)&&Object.values(ce).includes(n)&&n!==ce.UNKNOWN}(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>1e4||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===ce.HORIZONTAL),i.classList.toggle("scrollWrapped",t===ce.WRAPPED),this.pdfDocument&&e&&(t===ce.PAGE?this.#S():this._previousScrollMode===ce.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#M(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!function J4(n){return Number.isInteger(n)&&Object.values(At).includes(n)&&n!==At.UNKNOWN}(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===ce.PAGE)this.#S();else if(t.textContent="",this._spreadMode===At.NONE)for(const r of this._pages)t.append(r.div);else{const r=this._spreadMode-1;let s=null;for(let o=0,a=i.length;o<a;++o)null===s?(s=document.createElement("div"),s.className="spread",t.append(s)):o%2===r&&(s=s.cloneNode(!1),t.append(s)),s.append(i[o].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#M(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case ce.WRAPPED:{const{views:i}=this._getVisiblePages(),r=new Map;for(const{id:s,y:o,percent:a,widthPercent:l}of i){if(0===a||l<100)continue;let c=r.get(o);c||r.set(o,c||=[]),c.push(s)}for(const s of r.values()){const o=s.indexOf(e);if(-1===o)continue;const a=s.length;if(1===a)break;if(t)for(let l=o-1,c=0;l>=c;l--){const d=s[l+1]-1;if(s[l]<d)return e-d}else for(let l=o+1,c=a;l<c;l++){const d=s[l-1]+1;if(s[l]>d)return d-e}if(t){const l=s[0];if(l<e)return e-l+1}else{const l=s[a-1];if(l>e)return l-e+1}break}break}case ce.HORIZONTAL:break;case ce.PAGE:case ce.VERTICAL:{if(this._spreadMode===At.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:r}=this._getVisiblePages(),s=t?e-1:e+1;for(const{id:o,percent:a,widthPercent:l}of r)if(o===s){if(a>0&&100===l)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+i,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:i=null,origin:r}){if(null===i&&null===t)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&1!==t)s=Math.round(s*t*100)/100;else if(i){const o=i>0?1.1:1/1.1,a=i>0?Math.ceil:Math.floor;i=Math.abs(i);do{s=a(10*(s*o).toFixed(2))/10}while(--i>0)}s=Math.max(.1,Math.min(10,s)),this.#M(s,{noScroll:!1,drawingDelay:e,origin:r})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#k(e=this.container.clientHeight){e!==this.#b&&(this.#b=e,eq.setProperty("--viewer-container-height",`${e}px`))}#F(e){for(const t of e)if(t.target===this.container){this.#k(Math.floor(t.borderBoxSize[0].blockSize)),this.#a=null;break}}get containerTopLeft(){return this.#a||=[this.container.offsetTop,this.container.offsetLeft]}#j(){this.#f&&(this.eventBus._off("pagerendered",this.#f),this.#f=null),null!==this.#g&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#r?this.#i:rn.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:i=!1}){if(!this.#r)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===e)return;if(!VM(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===rn.STAMP&&this.#p?.loadModel("altText");const{eventBus:r}=this,s=()=>{this.#j(),this.#i=e,this.#r.updateMode(e,t,i),r.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===rn.NONE||this.#i===rn.NONE){const o=e!==rn.NONE;o||this.pdfDocument.annotationStorage.resetModifiedIds();for(const l of this._pages)l.toggleEditingMode(o);const a=this.#L();if(o&&a){this.#j(),this.#f=({pageNumber:c})=>{a.delete(c),0===a.size&&(this.#g=setTimeout(s,0))};const{signal:l}=this.#h;return void r._on("pagerendered",this.#f,{signal:l})}}s()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const i of this._pages)i.update(t);null!==this.#C&&(clearTimeout(this.#C),this.#C=null),e||this.update()}}}class Y5 extends HM{_resetView(){super._resetView(),this._scrollMode=ce.PAGE,this._spreadMode=At.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}var K5=Re.AnnotationLayerBuilder,Z5=Re.DownloadManager,Q5=Re.EventBus,J5=Re.FindState,UM=Re.GenericL10n,co=Re.LinkTarget,$M=Re.PDFFindController,e6=Re.PDFHistory,zM=Re.PDFLinkService,t6=Re.PDFPageView,n6=Re.PDFScriptingManager,WM=Re.PDFSinglePageViewer,GM=Re.PDFViewer,i6=Re.ProgressBar,r6=Re.RenderingStates,s6=Re.ScrollMode,o6=Re.SimpleLinkService,a6=Re.SpreadMode,l6=Re.StructTreeLayerBuilder,c6=Re.TextLayerBuilder,u6=Re.XfaLayerBuilder,d6=Re.parseQueryString;const h6=["pdfViewerContainer"];function Cy(n,e,t){n[e]=t}function dl(){return typeof window>"u"}dl()||Cy(Ci,"verbosity",WT.INFOS),typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let n,e;return{promise:new Promise((i,r)=>{n=i,e=r}),resolve:n,reject:e}});var Dy=function(n){return n[n.DISABLED=0]="DISABLED",n[n.ENABLED=1]="ENABLED",n[n.ENHANCED=2]="ENHANCED",n}(Dy||{});let g6=(()=>{class n{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof Ci<"u"?`https://unpkg.com/pdfjs-dist@${ad}/cmaps/`:null;_imageResourcesPath=typeof Ci<"u"?`https://unpkg.com/pdfjs-dist@${ad}/web/images/`:void 0;_renderText=!0;_renderTextMode=Dy.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new ir;afterLoadComplete=new vt;pageRendered=new vt;pageInitialized=new vt;textLayerRendered=new vt;onError=new vt;onProgress=new vt;pageChange=new vt(!0);src;set cMapsUrl(t){this._cMapsUrl=t}set page(t){const i=t=parseInt(t,10)||1;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,i!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=!!t}set fitToPage(t){this._fitToPage=!!t}set showBorders(t){this._showBorders=!!t}static getLinkTarget(t){switch(t){case"blank":return co.BLANK;case"none":return co.NONE;case"self":return co.SELF;case"parent":return co.PARENT;case"top":return co.TOP}return null}constructor(t,i){if(this.element=t,this.ngZone=i,dl())return;let r;const s=ad;r=window[`pdfWorkerSrc${s}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.mjs`),Cy(zT,"workerSrc",r)}ngAfterViewChecked(){if(this.isInitialized)return;const t=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=t?!1===this.isVisible&&null!=t&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!dl()&&this.isVisible)if("src"in t)this.loadPDF();else if(this._pdf){if(("renderText"in t||"showAll"in t)&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){const{page:i}=t;if(i.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){La(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(Oe(this.destroy$)).subscribe({next:t=>{const i=this._rotation+t.rotate,r=t.getViewport({scale:this._zoom,rotation:i}).width*n.CSS_UNITS;let s=this._zoom,o=!0;if(!this._originalSize||this._fitToPage&&r>this.pdfViewerContainer.nativeElement.clientWidth){const a=t.getViewport({scale:1,rotation:i});s=this.getScale(a.width,a.height),o=!this._stickToPage}this.pdfViewer.pagesPromise?.then(()=>{this.pdfViewer.currentScale=s,o&&this.pdfViewer.scrollPageIntoView({pageNumber:t.pageNumber,ignoreDestinationZoom:!0})})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const t=n.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=function f6(n,e){const t=new n.EventBus;return function p6(n,e){Ne(n,"documentload").pipe(Oe(e)).subscribe(()=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),Ne(n,"pagerendered").pipe(Oe(e)).subscribe(({pageNumber:t,cssTransform:i,source:r})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:i}),r.div.dispatchEvent(s)}),Ne(n,"textlayerrendered").pipe(Oe(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),i.textLayerDiv?.dispatchEvent(r)}),Ne(n,"pagechanging").pipe(Oe(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("pagechanging",!0,!0),r.pageNumber=t,i.container.dispatchEvent(r)}),Ne(n,"pagesinit").pipe(Oe(e)).subscribe(({source:t})=>{const i=document.createEvent("CustomEvent");i.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(i)}),Ne(n,"pagesloaded").pipe(Oe(e)).subscribe(({pagesCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),i.container.dispatchEvent(r)}),Ne(n,"scalechange").pipe(Oe(e)).subscribe(({scale:t,presetValue:i,source:r})=>{const s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=t,s.presetValue=i,r.container.dispatchEvent(s)}),Ne(n,"updateviewarea").pipe(Oe(e)).subscribe(({location:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("updateviewarea",!0,!0),r.location=t,i.container.dispatchEvent(r)}),Ne(n,"find").pipe(Oe(e)).subscribe(({source:t,type:i,query:r,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l})=>{if(t===window)return;const c=document.createEvent("CustomEvent");c.initCustomEvent("find"+i,!0,!0,{query:r,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l}),window.dispatchEvent(c)}),Ne(n,"attachmentsloaded").pipe(Oe(e)).subscribe(({attachmentsCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),i.container.dispatchEvent(r)}),Ne(n,"sidebarviewchanged").pipe(Oe(e)).subscribe(({view:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),i.outerContainer.dispatchEvent(r)}),Ne(n,"pagemode").pipe(Oe(e)).subscribe(({mode:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagemode",!0,!0,{mode:t}),i.pdfViewer.container.dispatchEvent(r)}),Ne(n,"namedaction").pipe(Oe(e)).subscribe(({action:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("namedaction",!0,!0,{action:t}),i.pdfViewer.container.dispatchEvent(r)}),Ne(n,"presentationmodechanged").pipe(Oe(e)).subscribe(({active:t,switchInProgress:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:i}),window.dispatchEvent(r)}),Ne(n,"outlineloaded").pipe(Oe(e)).subscribe(({outlineCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),i.container.dispatchEvent(r)})}(t,e),t}(Sd,this.destroy$),Ne(this.eventBus,"pagerendered").pipe(Oe(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),Ne(this.eventBus,"pagesinit").pipe(Oe(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),Ne(this.eventBus,"pagechanging").pipe(Oe(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),Ne(this.eventBus,"textlayerrendered").pipe(Oe(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new zM({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new $M({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:Dy.DISABLED,findController:this.pdfFindController,l10n:new UM("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:$T.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),Cy(Ci,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new GM(this.getPDFOptions()):new WM(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){const t=typeof this.src;if(!this._cMapsUrl)return this.src;const i={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0,isEvalSupported:!1};return"string"===t?i.url=this.src:"object"===t&&(void 0!==this.src.byteLength?i.data=this.src:Object.assign(i,this.src)),i}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=GT(this.getDocumentParams()),this.loadingTask.onProgress=i=>{this.onProgress.emit(i)};const t=this.src;La(this.loadingTask.promise).pipe(Oe(this.destroy$)).subscribe({next:i=>{this._pdf=i,this.lastLoaded=t,this.afterLoadComplete.emit(i),this.resetPdfDocument(),this.update()},error:i=>{this.lastLoaded=null,this.onError.emit(i)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(t,i){const r=this._showBorders?2*n.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-r,o=this.pdfViewerContainer.nativeElement.clientHeight-r;if(0===o||0===i||0===s||0===t)return 1;let a=1;switch(this._zoomScale){case"page-fit":a=Math.min(o/i,s/t);break;case"page-height":a=o/i;break;default:a=s/t}return this._zoom*a/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){dl()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){dl()||this.ngZone.runOutsideAngular(()=>{Ne(window,"resize").pipe(function tG(n,e=eG){return Kn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(Zn(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(100),kS(()=>this._canAutoResize&&!!this._pdf),Oe(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(i){return new(i||n)(ne(gr),ne(fe))};static \u0275cmp=ph({type:n,selectors:[["pdf-viewer"]],viewQuery:function(i,r){if(1&i&&function xC(n,e,t){bw(n,e,t)}(h6,5),2&i){let s;(function PC(n){const e=D(),t=te(),i=jh();ql(i+1);const r=bp(t,i);if(n.dirty&&function IR(n){return!(4&~n[F])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)n.reset([]);else{const s=Aw(e,i);n.reset(s,Z_),n.notifyOnChanges()}return!0}return!1})(s=RC())&&(r.pdfViewerContainer=s.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[So],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(i,r){1&i&&(B(0,"div",1,0),li(2,"div",2),V())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})}return n})(),m6=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=bo({type:n});static \u0275inj=Kr({})}return n})();function y6(n,e){if(1&n){const t=ci();B(0,"div")(1,"span",10),An("click",function(){return Nn(t),On(zn().sendEvent("logout"))}),Y(2," logout "),V()()}}function v6(n,e){if(1&n){const t=ci();B(0,"h2"),Y(1,"What do we offer?"),V(),B(2,"p"),Y(3,"We offer a platform for booking appointments and managing contracts."),V(),B(4,"p"),Y(5,"Please login to continue."),V(),B(6,"div",11)(7,"button",12),An("click",function(){return Nn(t),On(zn().sendEvent("login"))}),Y(8,"Login"),V(),li(9,"div",13)(10,"div",14),V()}}function _6(n,e){if(1&n){const t=ci();B(0,"p"),Y(1,"You are logged in"),V(),B(2,"div",11)(3,"button",12),An("click",function(){return Nn(t),On(zn().sendEvent("loadUserDetails"))}),Y(4,"Load User Details"),V()()}}function b6(n,e){if(1&n){const t=ci();B(0,"p"),Y(1,"You are showing current available bookings"),V(),B(2,"table",15)(3,"tr")(4,"th"),Y(5,"Booking"),V(),B(6,"th"),Y(7,"Date"),V(),B(8,"th"),Y(9,"Time"),V(),B(10,"th"),Y(11,"Place"),V()(),B(12,"tr")(13,"td"),Y(14,"Booking 1"),V(),B(15,"td"),Y(16,"2024-01-01"),V(),B(17,"td"),Y(18,"10:00"),V(),B(19,"td"),Y(20,"Place 1"),V()(),B(21,"tr")(22,"td"),Y(23,"Booking 2"),V(),B(24,"td"),Y(25,"2024-01-02"),V(),B(26,"td"),Y(27,"11:00"),V(),B(28,"td"),Y(29,"Place 2"),V()(),B(30,"tr")(31,"td"),Y(32,"Booking 3"),V(),B(33,"td"),Y(34,"2024-01-03"),V(),B(35,"td"),Y(36,"12:00"),V(),B(37,"td"),Y(38,"Place 3"),V()()(),B(39,"div",11)(40,"button",12),An("click",function(){return Nn(t),On(zn().sendEvent("requestABooking"))}),Y(41,"Request a Booking"),V()()}}function E6(n,e){if(1&n){const t=ci();B(0,"p"),Y(1,"Choose a booking and the available date, time, and place"),V(),B(2,"div",16)(3,"select",17)(4,"option",18),Y(5,"Booking 1"),V(),B(6,"option",19),Y(7,"Booking 2"),V(),B(8,"option",20),Y(9,"Booking 3"),V()(),B(10,"div",21),li(11,"input",22),V(),B(12,"div",23),li(13,"input",24),V(),B(14,"div",25),li(15,"input",26),V(),B(16,"button",12),An("click",function(){return Nn(t),On(zn().sendEvent("book"))}),Y(17,"Book"),V()()}}function w6(n,e){if(1&n){const t=ci();B(0,"div",6)(1,"p"),Y(2,"Please review the terms and conditions"),V(),B(3,"div",27),li(4,"pdf-viewer",28),V(),B(5,"div",11)(6,"button",29),An("click",function(){return Nn(t),On(zn().sendEvent("decline"))}),Y(7,"Decline"),V(),B(8,"button",30),An("click",function(){return Nn(t),On(zn().sendEvent("accept"))}),Y(9,"Accept"),V()()()}2&n&&(jn(4),Bp("render-text",!0)("original-size",!1))}function A6(n,e){if(1&n){const t=ci();B(0,"p"),Y(1,"You are showing a new appointment"),V(),B(2,"div",11)(3,"button",12),An("click",function(){return Nn(t),On(zn().sendEvent("acknowledge"))}),Y(4,"Acknowledge"),V()()}}function C6(n,e){if(1&n){const t=ci();B(0,"p"),Y(1,"You failed to login"),V(),B(2,"div",11)(3,"button",12),An("click",function(){return Nn(t),On(zn().sendEvent("accept"))}),Y(4,"Accept"),V()()}}let D6=(()=>{class n{mythicLedgerService;blockingCallInProgress=!1;actor$;data;constructor(t){this.mythicLedgerService=t;const i=$I(HW).createMachine((()=>({context:{mythicLedgerService:this.mythicLedgerService,user:{username:"mock",business_name:"Mock Business",business_address:"1234 Mock Street, Mock City, Mock State, 12345",business_phone:"123-456-7890",business_email:"mockbusiness@mock.com"},hostname:window.location.hostname},id:"MythicLedgerComponent",initial:"LoggedOut",states:{LoggedOut:{on:{login:[{target:"LoggedIn",guard:{type:"succesful"}},{target:"FailedToLogin",guard:{type:"failed"}}]}},LoggedIn:{on:{loadUserDetails:[{target:"ShowCurrentAvailableBookings",guard:{type:"exists"}},{target:"BookAnAppointment",guard:{type:"doesNotExist"}}]},entry:{type:"registerUser",params:({context:e})=>({username:e.username})}},FailedToLogin:{on:{accept:{target:"LoggedOut"}}},BookAnAppointment:{on:{book:[{target:"ShowContract",guard:{type:"successful"}},{target:"BookAnAppointment",guard:{type:"failed"}}]}},ShowCurrentAvailableBookings:{on:{requestABooking:{target:"BookAnAppointment"},logout:{target:"LoggedOut"}}},ShowContract:{on:{accept:{target:"ShowNewAppointment"},decline:{target:"ShowCurrentAvailableBookings"}}},ShowNewAppointment:{on:{acknowledge:{target:"ShowCurrentAvailableBookings"}}}}}))());this.actor$=Ba(i,{input:{type:"login"}}),this.actor$.start(),this.actor$.subscribe(r=>this.data=r.value),console.log("Data is ",this.data),console.dir(this.data)}sendEvent(t){this.actor$.send({type:t})}static \u0275fac=function(i){return new(i||n)(ne(dm))};static \u0275cmp=ph({type:n,selectors:[["app-mythic-ledger"]],standalone:!0,features:[r0([dm]),s0],decls:27,vars:8,consts:[["rel","stylesheet","href",zb`https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0`],[1,"container"],[1,"row"],[1,"col-12"],[1,"header"],[1,"content-container"],[1,"contract-container"],[1,"footer"],["href","https://xstate.js.org/"],["href","https://github.com/poss111"],[1,"material-symbols-outlined","clickable",3,"click"],[1,"button-container"],[3,"click"],["id","g_id_onload","data-client_id","YOUR_GOOGLE_CLIENT_ID","data-login_uri","https://your.domain/your_login_endpoint","data-auto_prompt","false"],["data-type","standard","data-size","large","data-theme","outline","data-text","sign_in_with","data-shape","rectangular","data-logo_alignment","left",1,"g_id_signin"],[1,"booking-table"],[1,"booking-container"],["name","booking","id","bookings",1,"booking-selector"],["value","booking1"],["value","booking2"],["value","booking3"],[1,"date-picker-container"],["type","date"],[1,"time-picker-container"],["type","time"],[1,"place-picker-container"],["type","text","placeholder","Place"],[1,"inner-contract-container"],["src","http://localhost:8000/contract",1,"contract-viewer",3,"render-text","original-size"],[1,"error-button",3,"click"],[1,"primary-button",3,"click"]],template:function(i,r){1&i&&(li(0,"link",0),B(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),Y(6,"Mythic Ledger"),V(),Bc(7,y6,3,0,"div"),V(),B(8,"div",5),Bc(9,v6,11,0)(10,_6,5,0)(11,b6,42,0)(12,E6,18,0)(13,w6,10,2,"div",6)(14,A6,5,0)(15,C6,5,0),V(),B(16,"div",7)(17,"p"),Y(18,"Version: 0.0.1"),V(),B(19,"p"),Y(20,"Powered by "),B(21,"a",8),Y(22,"XState"),V()(),B(23,"p"),Y(24,"Made by "),B(25,"a",9),Y(26,"poss111"),V()()()()()()),2&i&&(jn(7),ai("LoggedOut"!==r.data&&null!=r.data?7:-1),jn(2),ai("LoggedOut"===r.data||null==r.data?9:-1),jn(),ai("LoggedIn"===r.data?10:-1),jn(),ai("ShowCurrentAvailableBookings"===r.data?11:-1),jn(),ai("BookAnAppointment"===r.data?12:-1),jn(),ai("ShowContract"===r.data?13:-1),jn(),ai("ShowNewAppointment"===r.data?14:-1),jn(),ai("FailedToLogin"===r.data?15:-1))},dependencies:[PU,h3,m6,g6],styles:[".col-12[_ngcontent-%COMP%]{transition:.3s ease}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid black;width:350px;background:#dbe5ff;background:linear-gradient(135deg,#dbe5ff 71%,#474ed7);background:-webkit-linear-gradient(135deg,hsl(223,100%,93%) 71%,hsl(237,64%,56%) 100%);border-radius:40px;box-shadow:0 0 10px #00000080;padding:10px;transition:max-height .3s ease;font-family:Roboto Slab,serif;font-optical-sizing:auto;font-style:normal;width:400px;max-height:650px}.content-container[_ngcontent-%COMP%]{transition:all 2s ease}.contract-viewer[_ngcontent-%COMP%]{width:350px;height:400px;padding-bottom:1em}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;transition:.3s ease}.booking-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;transition:.3s ease;height:225px}.date-picker-container[_ngcontent-%COMP%], .booking-selector[_ngcontent-%COMP%], .time-picker-container[_ngcontent-%COMP%], .place-picker-container[_ngcontent-%COMP%]{align-self:center}input[_ngcontent-%COMP%]{border:none;appearance:none;background:#f2f2f2;padding:12px;border-radius:3px;width:250px}input[_ngcontent-%COMP%]:hover{background:#e0e0e0}input[_ngcontent-%COMP%]:focus::placeholder{color:transparent}input[_ngcontent-%COMP%]::placeholder{color:#222;transition:color .3s ease}select[_ngcontent-%COMP%]{border:none;appearance:none;background:#f2f2f2;padding:12px;border-radius:3px;width:250px}select[_ngcontent-%COMP%]:hover{background:#e0e0e0}.dropdown-container[_ngcontent-%COMP%]{padding-top:1em;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.date-picker-container[_ngcontent-%COMP%]{padding-top:1em}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:end;padding-top:1em}button[_ngcontent-%COMP%]{border:none;padding:5px 15px;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.primary-button[_ngcontent-%COMP%]{background-color:#00bb3b;color:#fff}.error-button[_ngcontent-%COMP%]{background-color:red;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#333;color:#fff}.inner-contract-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-top:1em}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:conic-gradient(from 0deg,#000,#000);animation:_ngcontent-%COMP%_spin 1s linear infinite}.spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner-inner[_ngcontent-%COMP%]{width:85%;height:85%;display:flex;justify-content:center;align-items:center;border-radius:50%;background:#fff}.spinner-segment[_ngcontent-%COMP%]{width:100%;height:100%;background:#000;border-radius:50%}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.booking-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.booking-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .booking-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.booking-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-top:1em}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;color:gray}.clickable[_ngcontent-%COMP%]{cursor:pointer}","@import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap');"]})}return n})();(function D$(n){return UV(function dS(n){return{appProviders:[...P$,...n?.providers??[]],platformProviders:M$}}(n))})().then(n=>{const e=function kz(n,e){const t=function Tz(n,e){return e.get(As).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new Rz(n,e.injector),r=function Iz(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function wz(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class s extends Oz{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:l,transform:c})=>{if(!this.hasOwnProperty(l))return;const u=this[l];delete this[l],a.setInputValue(l,u,c)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,l,c,u){const[d,h]=r[a];this.ngElementStrategy.setInputValue(d,c,h)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(l)})}}return t.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(l){this.ngElementStrategy.setInputValue(o,l,a)},configurable:!0,enumerable:!0})}),s}(D6,{injector:n.injector});customElements.define("mythic-ledger",e)}).catch(n=>console.error(n))}},Dd=>{Dd(Dd.s=86)}]);